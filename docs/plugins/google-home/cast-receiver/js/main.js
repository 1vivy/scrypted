(()=>{"use strict";var __webpack_modules__={636:(module,__webpack_exports__,__webpack_require__)=>{function startPeriodicGarbageCollection(){if(__webpack_require__.g.gc)try{const e=__webpack_require__.g;if(e.gc)return setInterval((()=>{e.gc()}),1e4)}catch(e){}else console.warn("rpc peer garbage collection not available: global.gc is not exposed.")}__webpack_require__.d(__webpack_exports__,{uD:()=>RpcPeer}),module=__webpack_require__.hmd(module);class RpcProxy{peer;entry;constructorName;proxyProps;proxyOneWayMethods;constructor(e,t,r,i,o){this.peer=e,this.entry=t,this.constructorName=r,this.proxyProps=i,this.proxyOneWayMethods=o}toPrimitive(){const e=this.peer;return`RpcProxy-${e.selfName}:${e.peerName}: ${this.constructorName}`}get(e,t,r){if("__proxy_id"===t)return this.entry.id;if("__proxy_constructor"===t)return this.constructorName;if("__proxy_peer"===t)return this.peer;if(t===RpcPeer.PROPERTY_PROXY_PROPERTIES)return this.proxyProps;if(t===RpcPeer.PROPERTY_PROXY_ONEWAY_METHODS)return this.proxyOneWayMethods;if(t===RpcPeer.PROPERTY_JSON_DISABLE_SERIALIZATION||t===RpcPeer.PROPERTY_JSON_COPY_SERIALIZE_CHILDREN)return;if("then"===t)return;if("constructor"===t)return;if(void 0!==this.proxyProps?.[t])return this.proxyProps?.[t];return RpcPeer.handleFunctionInvocations(this,e,t,r)||new Proxy((()=>t),this)}set(e,t,r,i){return t===RpcPeer.finalizerIdSymbol&&(this.entry.finalizerId=r),!0}apply(e,t,r){if(Object.isFrozen(this.peer.pendingResults))return Promise.reject(new RPCResultError(this.peer,"RpcPeer has been killed"));const i=e()||null,o=[],n={};for(const e of r||[])o.push(this.peer.serialize(e,n));const s={type:"apply",id:void 0,proxyId:this.entry.id,args:o,method:i};return this.proxyOneWayMethods?.includes?.(i)?(s.oneway=!0,this.peer.send(s,void 0,n),Promise.resolve()):this.peer.createPendingResult(((e,t)=>{s.id=e,this.peer.send(s,t,n)}))}}class RPCResultError extends Error{cause;constructor(e,t,r,i){super(`${e.selfName}:${e.peerName}: ${t}`),this.cause=r,i?.name&&(this.name=i?.name),i?.stack&&(this.stack=`${e.peerName}:${e.selfName}\n${r?.stack||i.stack}`)}}function compileFunction(code,params,options){params=params||[];const f=`(function(${params.join(",")}) {;${code};})`;return eval(f)}try{const e=FinalizationRegistry}catch(e){window.WeakRef=class{target;constructor(e){this.target=e}deref(){return this.target}},window.FinalizationRegistry=class{register(){}}}class RpcPeer{selfName;peerName;send;idCounter=1;params={};pendingResults={};proxyCounter=1;localProxied=new Map;localProxyMap={};remoteWeakProxies={};finalizers=new FinalizationRegistry((e=>this.finalize(e)));nameDeserializerMap=new Map;constructorSerializerMap=new Map;transportSafeArgumentTypes=RpcPeer.getDefaultTransportSafeArgumentTypes();static finalizerIdSymbol=Symbol("rpcFinalizerId");static getDefaultTransportSafeArgumentTypes(){const e=new Set;return e.add(Number.name),e.add(String.name),e.add(Object.name),e.add(Boolean.name),e.add(Array.name),e}static handleFunctionInvocations(e,t,r,i){return"apply"===r?(r,i)=>e.apply(t,e,i):"call"===r?(r,...i)=>e.apply(t,e,i):"toString"===r||r===Symbol.toPrimitive?(t,...r)=>e.toPrimitive():void 0}static PROPERTY_PROXY_ONEWAY_METHODS="__proxy_oneway_methods";static PROPERTY_JSON_DISABLE_SERIALIZATION="__json_disable_serialization";static PROPERTY_PROXY_PROPERTIES="__proxy_props";static PROPERTY_JSON_COPY_SERIALIZE_CHILDREN="__json_copy_serialize_children";static PROBED_PROPERTIES=new Set(["then","constructor","__proxy_id","__proxy_constructor","__proxy_peer",RpcPeer.PROPERTY_PROXY_ONEWAY_METHODS,RpcPeer.PROPERTY_JSON_DISABLE_SERIALIZATION,RpcPeer.PROPERTY_PROXY_PROPERTIES,RpcPeer.PROPERTY_JSON_COPY_SERIALIZE_CHILDREN]);constructor(e,t,r){this.selfName=e,this.peerName=t,this.send=r}createPendingResult(e){if(Object.isFrozen(this.pendingResults))return Promise.reject(new RPCResultError(this,"RpcPeer has been killed"));const t=new Promise(((t,r)=>{const i=(this.idCounter++).toString();this.pendingResults[i]={resolve:t,reject:r},e(i,(e=>r(new RPCResultError(this,e.message,e))))}));return t.catch((()=>{})),t}kill(e){const t=new RPCResultError(this,e||"peer was killed");for(const e of Object.values(this.pendingResults))e.reject(t);this.pendingResults=Object.freeze({}),this.remoteWeakProxies=Object.freeze({}),this.localProxyMap=Object.freeze({}),this.localProxied.clear()}addSerializer(e,t,r){this.nameDeserializerMap.set(t,r),this.constructorSerializerMap.set(e,t)}finalize(e){delete this.remoteWeakProxies[e.id];const t={__local_proxy_id:e.id,__local_proxy_finalizer_id:e.finalizerId,type:"finalize"};this.send(t)}async getParam(e){return this.createPendingResult(((t,r)=>{const i={id:t,type:"param",param:e};this.send(i,r)}))}evalLocal(e,t,r){const i=Object.assign({},this.params,r);let o;try{o=module.require("vm").compileFunction}catch(e){o=compileFunction}return o(e,Object.keys(i),{filename:t})(...Object.values(i))}createErrorResult(e,t){e.stack=t.stack||"no stack",e.result=t.name||"no name",e.message=t.message||"no message"}deserialize(e,t){if(!e)return e;if(e[RpcPeer.PROPERTY_JSON_COPY_SERIALIZE_CHILDREN]){const r={};for(const[i,o]of Object.entries(e))r[i]=this.deserialize(o,t);return r}const{__remote_proxy_id:r,__remote_proxy_finalizer_id:i,__local_proxy_id:o,__remote_constructor_name:n,__serialized_value:s,__remote_proxy_props:a,__remote_proxy_oneway_methods:c}=e;if(r){let e=this.remoteWeakProxies[r]?.deref();return e||(e=this.newProxy(r,n,a,c)),e[RpcPeer.finalizerIdSymbol]=i,e}if(o){const e=this.localProxyMap[o];if(!e)throw new RPCResultError(this,`invalid local proxy id ${o}`);return e}const _=this.nameDeserializerMap.get(n);return _?_.deserialize(s,t):e}serialize(e,t){if(!0===e?.[RpcPeer.PROPERTY_JSON_COPY_SERIALIZE_CHILDREN]){const r={};for(const[i,o]of Object.entries(e))r[i]=this.serialize(o,t);return r}if(!e||!e[RpcPeer.PROPERTY_JSON_DISABLE_SERIALIZATION]&&this.transportSafeArgumentTypes.has(e.constructor?.name))return e;let r=e.__proxy_constructor||e.constructor?.name?.toString(),i=this.localProxied.get(e);if(i){const t=(this.proxyCounter++).toString();return i.finalizerId=t,{__remote_proxy_id:i.id,__remote_proxy_finalizer_id:t,__remote_constructor_name:r,__remote_proxy_props:e?.[RpcPeer.PROPERTY_PROXY_PROPERTIES],__remote_proxy_oneway_methods:e?.[RpcPeer.PROPERTY_PROXY_ONEWAY_METHODS]}}const{__proxy_id:o,__proxy_peer:n}=e;if(o&&n===this)return{__local_proxy_id:o};const s=this.constructorSerializerMap.get(e.constructor);if(s){r=s;const i=this.nameDeserializerMap.get(s);if(!i)throw new Error("serializer not found for "+s);const o=i.serialize(e,t);return{__remote_proxy_id:void 0,__remote_proxy_finalizer_id:void 0,__remote_constructor_name:r,__remote_proxy_props:e?.[RpcPeer.PROPERTY_PROXY_PROPERTIES],__remote_proxy_oneway_methods:e?.[RpcPeer.PROPERTY_PROXY_ONEWAY_METHODS],__serialized_value:o}}const a=(this.proxyCounter++).toString();return i={id:a,finalizerId:a},this.localProxied.set(e,i),this.localProxyMap[a]=e,{__remote_proxy_id:a,__remote_proxy_finalizer_id:a,__remote_constructor_name:r,__remote_proxy_props:e?.[RpcPeer.PROPERTY_PROXY_PROPERTIES],__remote_proxy_oneway_methods:e?.[RpcPeer.PROPERTY_PROXY_ONEWAY_METHODS]}}newProxy(e,t,r,i){const o={id:e,finalizerId:void 0},n=new RpcProxy(this,o,t,r,i),s=new Proxy("Function"===t||"AsyncFunction"===t?function(){}:n,n),a=new WeakRef(s);return this.remoteWeakProxies[e]=a,this.finalizers.register(n,o),s}async handleMessage(e,t){try{switch(e.type){case"param":{const t=e,r={},i={type:"result",id:t.id,result:this.serialize(this.params[t.param],r)};this.send(i,void 0,r);break}case"apply":{const r=e,i={type:"result",id:r.id||""},o={};try{const e=this.localProxyMap[r.proxyId];if(!e)throw new Error(`proxy id ${r.proxyId} not found`);const n=[];for(const e of r.args||[])n.push(this.deserialize(e,t));let s;if(r.method){if(!e[r.method])throw new Error(`target ${e?.constructor?.name} does not have method ${r.method}`);s=await e[r.method](...n)}else s=await e(...n);i.result=this.serialize(s,o)}catch(e){this.createErrorResult(i,e)}r.oneway||this.send(i,void 0,o);break}case"result":{const r=e,i=this.pendingResults[r.id];if(delete this.pendingResults[r.id],!i)throw new Error(`unknown result ${r.id}`);if(r.message||r.stack){const e=new RPCResultError(this,r.message||"no message",void 0,{name:r.result,stack:r.stack});return void i.reject(e)}i.resolve(this.deserialize(r.result,t));break}case"finalize":{const t=e,r=this.localProxyMap[t.__local_proxy_id];if(r){const e=this.localProxied.get(r);if(t.__local_proxy_finalizer_id&&t.__local_proxy_finalizer_id!==e?.finalizerId)break;delete this.localProxyMap[t.__local_proxy_id],this.localProxied.delete(r)}break}default:throw new Error(`unknown rpc message type ${e.type}`)}}catch(e){return void console.error("unhandled rpc error",this.peerName,e)}}}function getEvalSource(){return`\n    (() => {\n        ${RpcProxy}\n\n        ${RpcPeer}\n    \n        return {\n            RpcPeer,\n            RpcProxy,\n        };\n    })();\n    `}}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var r=__webpack_module_cache__[e]={id:e,loaded:!1,exports:{}};return __webpack_modules__[e](r,r.exports,__webpack_require__),r.loaded=!0,r.exports}__webpack_require__.d=(e,t)=>{for(var r in t)__webpack_require__.o(t,r)&&!__webpack_require__.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),__webpack_require__.hmd=e=>((e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e),__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var __webpack_exports__={};(()=>{var e=__webpack_require__(636);class t{finished=!1;resolve;reject;promise=new Promise(((e,t)=>{this.resolve=t=>{this.finished=!0,e(t)},this.reject=e=>{this.finished=!0,t(e)}}))}function r(){try{return navigator.userAgent}catch(e){}}class i{pc;pcDeferred=new t;dcDeferred=new t;options={userAgent:r(),capabilities:{audio:RTCRtpReceiver.getCapabilities?.("audio")||{codecs:void 0,headerExtensions:void 0},video:RTCRtpReceiver.getCapabilities?.("video")||{codecs:void 0,headerExtensions:void 0}},screen:{width:screen.width,height:screen.height}};constructor(){}async getOptions(){return this.options}close(){this.pcDeferred.promise.then((e=>{for(const t of e.getTransceivers()||[])try{t.sender?.track?.stop?.()}catch(e){}e.close()})).catch((()=>{})),this.pcDeferred.reject(new Error("iceConnectionState "+this.pc?.iceConnectionState))}async createPeerConnection(e){if(this.pc)return;const t=()=>{console.log("iceConnectionState",r.iceConnectionState),console.log("connectionState",r.connectionState),function(e){return"disconnected"===e.iceConnectionState||"failed"===e.iceConnectionState||"closed"===e.iceConnectionState}(r)&&this.close()},r=this.pc=new RTCPeerConnection(e.configuration);if(this.pcDeferred.resolve(r),r.addEventListener("connectionstatechange",t),r.addEventListener("iceconnectionstatechange",t),r.addEventListener("icegatheringstatechange",(e=>console.log("iceGatheringState",r.iceGatheringState))),r.addEventListener("signalingstatechange",(e=>console.log("signalingState",r.signalingState))),r.addEventListener("icecandidateerror",(e=>console.log("icecandidateerror"))),e.datachannel){const t=r.createDataChannel(e.datachannel.label,e.datachannel.dict);t.binaryType="arraybuffer",this.dcDeferred.resolve(t)}if(e.audio)if("sendrecv"===e.audio.direction||"sendonly"===e.audio.direction)try{const e=await navigator.mediaDevices.getUserMedia({video:!1,audio:!0});for(const t of e.getTracks())r.addTrack(t)}catch(e){let t=()=>{let e=new AudioContext,t=e.createOscillator();const r=e.createMediaStreamDestination();return t.connect(r),t.start(),Object.assign(r.stream.getAudioTracks()[0],{enabled:!1})};r.addTrack(t())}else r.addTransceiver("audio",e.audio);if(e.video)if("sendrecv"===e.video.direction||"sendonly"===e.video.direction)try{const e=await navigator.mediaDevices.getUserMedia({video:!0});for(const t of e.getTracks())r.addTrack(t)}catch(e){}else r.addTransceiver("video",e.video)}async createLocalDescription(e,t,r){await this.createPeerConnection(t);const i=new Promise((e=>{this.pc.onicecandidate=t=>{t.candidate?(console.log("local candidate",t.candidate),r?.(JSON.parse(JSON.stringify(t.candidate)))):e(void 0)},this.pc.onicegatheringstatechange=()=>{"complete"===this.pc.iceGatheringState&&e(void 0)}})),o=e=>({type:e.type,sdp:e.sdp});if("offer"===e){let e=await this.pc.createOffer({offerToReceiveAudio:!!t.audio,offerToReceiveVideo:!!t.video});const n=this.pc.setLocalDescription(e);return r||(await n,await i,e=await this.pc.createOffer({offerToReceiveAudio:!!t.audio,offerToReceiveVideo:!!t.video})),o(e)}{let e=await this.pc.createAnswer();const t=this.pc.setLocalDescription(e);return r||(await t,await i,e=this.pc.currentLocalDescription||e),o(e)}}async setRemoteDescription(e,t){await this.createPeerConnection(t),await this.pc.setRemoteDescription(e)}async addIceCandidate(e){await this.pc.addIceCandidate(e)}async endSession(){}}document.addEventListener("DOMContentLoaded",(function(t){const r=new cast.framework.CastReceiverOptions;r.disableIdleTimeout=!0,cast.framework.CastReceiverContext.getInstance().start(r);const o=cast.framework.CastReceiverContext.getInstance().getPlayerManager(),n=document.getElementById("media");o.setMessageInterceptor(cast.framework.messages.MessageType.LOAD,(t=>{console.log(t);const r=t.media.entity||t.media.contentId,o=t.credentials??t.media.customData.token,s=new URL(r),a=s.pathname,c={};for(const[e,t]of new URLSearchParams(s.search))c[e]=t;const _={path:a,query:c},d=eio(`wss://${s.host}`,_);return d.on("open",(async()=>{d.send(JSON.stringify({token:o}));const t=new e.uD("cast-receiver","host",((e,t)=>{try{d.send(JSON.stringify(e))}catch(e){t?.(e)}}));d.on("message",(e=>{t.handleMessage(JSON.parse(e))}));const r=()=>window.close(),s=new i;s.pcDeferred.promise.then((e=>{e.addEventListener("connectionstatechange",(()=>{"disconnected"!==e.iceConnectionState&&"failed"!==e.iceConnectionState&&"closed"!==e.iceConnectionState||r()})),e.addEventListener("iceconnectionstatechange",(()=>{console.log("iceConnectionStateChange",e.connectionState,e.iceConnectionState),"disconnected"!==e.iceConnectionState&&"failed"!==e.iceConnectionState&&"closed"!==e.iceConnectionState||r()}));const t=new MediaStream(e.getReceivers().map((e=>e.track)));e.ontrack=e=>t.addTrack(e.track),n.srcObject=t})),t.params.session=s})),null}))}))})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsIm1hcHBpbmdzIjoibUdBQU8sU0FBU0EsaUNBQ1osR0FBSyxvQkFBQUMsRUFBT0MsR0FJWixJQUNJLE1BQU1ELEVBQUksb0JBQUFBLEVBQ1YsR0FBSUEsRUFBRUMsR0FDRixPQUFPQyxhQUFZLEtBQ2ZGLEVBQUVDLElBQUksR0FDUCxJQUlYLENBREEsTUFBT0UsR0FDUCxNQVpJQyxRQUFRQyxLQUFLLHVFQWFyQixDLG1HQUNBLE1BQU1DLFNBQ0ZDLEtBQ0FDLE1BQ0FDLGdCQUNBQyxXQUNBQyxtQkFDQUMsWUFBWUwsRUFBTUMsRUFBT0MsRUFBaUJDLEVBQVlDLEdBQ2xERSxLQUFLTixLQUFPQSxFQUNaTSxLQUFLTCxNQUFRQSxFQUNiSyxLQUFLSixnQkFBa0JBLEVBQ3ZCSSxLQUFLSCxXQUFhQSxFQUNsQkcsS0FBS0YsbUJBQXFCQSxDQUM5QixDQUNBRyxjQUNJLE1BQU1QLEVBQU9NLEtBQUtOLEtBQ2xCLE1BQU8sWUFBWUEsRUFBS1EsWUFBWVIsRUFBS1MsYUFBYUgsS0FBS0osaUJBQy9ELENBQ0FRLElBQUlDLEVBQVFDLEVBQUdDLEdBQ1gsR0FBVSxlQUFORCxFQUNBLE9BQU9OLEtBQUtMLE1BQU1hLEdBQ3RCLEdBQVUsd0JBQU5GLEVBQ0EsT0FBT04sS0FBS0osZ0JBQ2hCLEdBQVUsaUJBQU5VLEVBQ0EsT0FBT04sS0FBS04sS0FDaEIsR0FBSVksSUFBTUcsUUFBUUMsMEJBQ2QsT0FBT1YsS0FBS0gsV0FDaEIsR0FBSVMsSUFBTUcsUUFBUUUsOEJBQ2QsT0FBT1gsS0FBS0YsbUJBQ2hCLEdBQUlRLElBQU1HLFFBQVFHLHFDQUF1Q04sSUFBTUcsUUFBUUksc0NBQ25FLE9BQ0osR0FBVSxTQUFOUCxFQUNBLE9BQ0osR0FBVSxnQkFBTkEsRUFDQSxPQUNKLFFBQTZCUSxJQUF6QmQsS0FBS0gsYUFBYVMsR0FDbEIsT0FBT04sS0FBS0gsYUFBYVMsR0FFN0IsT0FEZ0JHLFFBQVFNLDBCQUEwQmYsS0FBTUssRUFBUUMsRUFBR0MsSUFHNUQsSUFBSVMsT0FBTSxJQUFNVixHQUFHTixLQUM5QixDQUNBaUIsSUFBSVosRUFBUUMsRUFBR1ksRUFBT1gsR0FHbEIsT0FGSUQsSUFBTUcsUUFBUVUsb0JBQ2RuQixLQUFLTCxNQUFNeUIsWUFBY0YsSUFDdEIsQ0FDWCxDQUNBRyxNQUFNaEIsRUFBUWlCLEVBQVNDLEdBQ25CLEdBQUlDLE9BQU9DLFNBQVN6QixLQUFLTixLQUFLZ0MsZ0JBQzFCLE9BQU9DLFFBQVFDLE9BQU8sSUFBSUMsZUFBZTdCLEtBQUtOLEtBQU0sNEJBSXhELE1BQU1vQyxFQUFTekIsS0FBWSxLQUNyQjBCLEVBQU8sR0FDUEMsRUFBdUIsQ0FBQyxFQUM5QixJQUFLLE1BQU1DLEtBQVFWLEdBQVksR0FDM0JRLEVBQUtHLEtBQUtsQyxLQUFLTixLQUFLeUMsVUFBVUYsRUFBS0QsSUFFdkMsTUFBTUksRUFBVyxDQUNiQyxLQUFNLFFBQ043QixRQUFJTSxFQUNKd0IsUUFBU3RDLEtBQUtMLE1BQU1hLEdBQ3BCdUIsT0FDQUQsVUFFSixPQUFJOUIsS0FBS0Ysb0JBQW9CeUMsV0FBV1QsSUFDcENNLEVBQVNJLFFBQVMsRUFDbEJ4QyxLQUFLTixLQUFLK0MsS0FBS0wsT0FBVXRCLEVBQVdrQixHQUM3QkwsUUFBUWUsV0FFWjFDLEtBQUtOLEtBQUtpRCxxQkFBb0IsQ0FBQ25DLEVBQUlvQixLQUN0Q1EsRUFBUzVCLEdBQUtBLEVBQ2RSLEtBQUtOLEtBQUsrQyxLQUFLTCxFQUFVUixFQUFRSSxFQUFxQixHQUU5RCxFQUdHLE1BQU1ILHVCQUF1QmUsTUFDaENDLE1BQ0E5QyxZQUFZTCxFQUFNb0QsRUFBU0QsRUFBT0UsR0FDOUJDLE1BQU0sR0FBR3RELEVBQUtRLFlBQVlSLEVBQUtTLGFBQWEyQyxLQUM1QzlDLEtBQUs2QyxNQUFRQSxFQUNURSxHQUFTRSxPQUNUakQsS0FBS2lELEtBQU9GLEdBQVNFLE1BRXJCRixHQUFTRyxRQUNUbEQsS0FBS2tELE1BQVEsR0FBR3hELEVBQUtTLFlBQVlULEVBQUtRLGFBQWEyQyxHQUFPSyxPQUFTSCxFQUFRRyxRQUVuRixFQUVKLFNBQVNDLGdCQUFnQkMsS0FBTUMsT0FBUU4sU0FDbkNNLE9BQVNBLFFBQVUsR0FDbkIsTUFBTUMsRUFBSSxhQUFhRCxPQUFPRSxLQUFLLFdBQVdILFVBQzlDLE9BQU9JLEtBQUtGLEVBQ2hCLENBQ0EsSUFDSSxNQUFNRyxFQUFLQyxvQkFnQmYsQ0FkQSxNQUFPcEUsR0FDSHFFLE9BQU9DLFFBQVUsTUFDYnZELE9BQ0FOLFlBQVlNLEdBQ1JMLEtBQUtLLE9BQVNBLENBQ2xCLENBQ0F3RCxRQUNJLE9BQU83RCxLQUFLSyxNQUNoQixHQUVKc0QsT0FBT0QscUJBQXVCLE1BQzFCSSxXQUNBLEVBRVIsQ0FDTyxNQUFNckQsUUFDVFAsU0FDQUMsU0FDQXNDLEtBQ0FzQixVQUFZLEVBQ1pWLE9BQVMsQ0FBQyxFQUNWM0IsZUFBaUIsQ0FBQyxFQUNsQnNDLGFBQWUsRUFDZkMsYUFBZSxJQUFJQyxJQUNuQkMsY0FBZ0IsQ0FBQyxFQUNqQkMsa0JBQW9CLENBQUMsRUFDckJDLFdBQWEsSUFBSVgsc0JBQXFCL0QsR0FBU0ssS0FBS3NFLFNBQVMzRSxLQUM3RDRFLG9CQUFzQixJQUFJTCxJQUMxQk0seUJBQTJCLElBQUlOLElBQy9CTywyQkFBNkJoRSxRQUFRaUUsdUNBQ3JDQyx5QkFBMkJDLE9BQU8sa0JBQ2xDRCw4Q0FDSSxNQUFNRSxFQUFtQixJQUFJQyxJQU03QixPQUxBRCxFQUFpQkUsSUFBSUMsT0FBTy9CLE1BQzVCNEIsRUFBaUJFLElBQUlFLE9BQU9oQyxNQUM1QjRCLEVBQWlCRSxJQUFJdkQsT0FBT3lCLE1BQzVCNEIsRUFBaUJFLElBQUlHLFFBQVFqQyxNQUM3QjRCLEVBQWlCRSxJQUFJSSxNQUFNbEMsTUFDcEI0QixDQUNYLENBQ0FGLGlDQUFpQ1MsRUFBTS9FLEVBQVFDLEVBQUdDLEdBQzlDLE1BQVUsVUFBTkQsRUFDTyxDQUFDZ0IsRUFBU1MsSUFDTnFELEVBQUsvRCxNQUFNaEIsRUFBUStFLEVBQU1yRCxHQUd6QixTQUFOekIsRUFDRSxDQUFDZ0IsS0FBWVMsSUFDVHFELEVBQUsvRCxNQUFNaEIsRUFBUStFLEVBQU1yRCxHQUd6QixhQUFOekIsR0FBb0JBLElBQU1zRSxPQUFPM0UsWUFDL0IsQ0FBQ3FCLEtBQVlTLElBQ1RxRCxFQUFLbkYsbUJBRmYsQ0FLVCxDQUNBMEUscUNBQXVDLHlCQUN2Q0EsMkNBQTZDLCtCQUM3Q0EsaUNBQW1DLGdCQUNuQ0EsNkNBQStDLGlDQUMvQ0EseUJBQTJCLElBQUlHLElBQUksQ0FDL0IsT0FDQSxjQUNBLGFBQ0Esc0JBQ0EsZUFDQXJFLFFBQVFFLDhCQUNSRixRQUFRRyxvQ0FDUkgsUUFBUUMsMEJBQ1JELFFBQVFJLHdDQUVaZCxZQUFZRyxFQUFVQyxFQUFVc0MsR0FDNUJ6QyxLQUFLRSxTQUFXQSxFQUNoQkYsS0FBS0csU0FBV0EsRUFDaEJILEtBQUt5QyxLQUFPQSxDQUNoQixDQUNBRSxvQkFBb0IwQyxHQUNoQixHQUFJN0QsT0FBT0MsU0FBU3pCLEtBQUswQixnQkFDckIsT0FBT0MsUUFBUUMsT0FBTyxJQUFJQyxlQUFlN0IsS0FBTSw0QkFDbkQsTUFBTXNGLEVBQVUsSUFBSTNELFNBQVEsQ0FBQ2UsRUFBU2QsS0FDbEMsTUFBTXBCLEdBQU1SLEtBQUsrRCxhQUFhd0IsV0FDOUJ2RixLQUFLMEIsZUFBZWxCLEdBQU0sQ0FBRWtDLFVBQVNkLFVBQ3JDeUQsRUFBRzdFLEdBQUlsQixHQUFLc0MsRUFBTyxJQUFJQyxlQUFlN0IsS0FBTVYsRUFBRXdELFFBQVN4RCxLQUFJLElBSS9ELE9BREFnRyxFQUFRRSxPQUFNLFNBQ1BGLENBQ1gsQ0FDQUcsS0FBSzNDLEdBQ0QsTUFBTTRDLEVBQVEsSUFBSTdELGVBQWU3QixLQUFNOEMsR0FBVyxtQkFDbEQsSUFBSyxNQUFNNkMsS0FBVW5FLE9BQU9vRSxPQUFPNUYsS0FBSzBCLGdCQUNwQ2lFLEVBQU8vRCxPQUFPOEQsR0FFbEIxRixLQUFLMEIsZUFBaUJGLE9BQU9xRSxPQUFPLENBQUMsR0FDckM3RixLQUFLb0Usa0JBQW9CNUMsT0FBT3FFLE9BQU8sQ0FBQyxHQUN4QzdGLEtBQUttRSxjQUFnQjNDLE9BQU9xRSxPQUFPLENBQUMsR0FDcEM3RixLQUFLaUUsYUFBYTZCLE9BQ3RCLENBRUFDLGNBQWNDLEVBQUsvQyxFQUFNZ0QsR0FDckJqRyxLQUFLdUUsb0JBQW9CdEQsSUFBSWdDLEVBQU1nRCxHQUNuQ2pHLEtBQUt3RSx5QkFBeUJ2RCxJQUFJK0UsRUFBSy9DLEVBQzNDLENBQ0FxQixTQUFTM0UsVUFDRUssS0FBS29FLGtCQUFrQnpFLEVBQU1hLElBQ3BDLE1BQU0wRixFQUFjLENBQ2hCQyxpQkFBa0J4RyxFQUFNYSxHQUN4QjRGLDJCQUE0QnpHLEVBQU15QixZQUNsQ2lCLEtBQU0sWUFFVnJDLEtBQUt5QyxLQUFLeUQsRUFDZCxDQUNBRyxlQUFlQyxHQUNYLE9BQU90RyxLQUFLMkMscUJBQW9CLENBQUNuQyxFQUFJb0IsS0FDakMsTUFBTTJFLEVBQWUsQ0FDakIvRixLQUNBNkIsS0FBTSxRQUNOaUUsU0FFSnRHLEtBQUt5QyxLQUFLOEQsRUFBYzNFLEVBQU8sR0FFdkMsQ0FDQTRFLFVBQVVDLEVBQVFDLEVBQVVDLEdBQ3hCLE1BQU10RCxFQUFTN0IsT0FBT29GLE9BQU8sQ0FBQyxFQUFHNUcsS0FBS3FELE9BQVFzRCxHQUM5QyxJQUFJRSxFQUNKLElBRUlBLEVBQVVDLE9BQWdCLFFBQUUsTUFBTTNELGVBSXRDLENBRkEsTUFBTzdELEdBQ0h1SCxFQUFVMUQsZUFDZCxDQUtBLE9BSlUwRCxFQUFRSixFQUFRakYsT0FBT3VGLEtBQUsxRCxHQUFTLENBQzNDcUQsWUFFVXBELElBQUs5QixPQUFPb0UsT0FBT3ZDLEdBRXJDLENBQ0EyRCxrQkFBa0JyQixFQUFRckcsR0FDdEJxRyxFQUFPekMsTUFBUTVELEVBQUU0RCxPQUFTLFdBQzFCeUMsRUFBT0EsT0FBU3JHLEVBQUUyRCxNQUFRLFVBQzFCMEMsRUFBTzdDLFFBQVV4RCxFQUFFd0QsU0FBVyxZQUNsQyxDQUNBbUUsWUFBWS9GLEVBQU9nRyxHQUNmLElBQUtoRyxFQUNELE9BQU9BLEVBRVgsR0FEOEJBLEVBQU1ULFFBQVFJLHVDQUNqQixDQUN2QixNQUFNc0csRUFBTSxDQUFDLEVBQ2IsSUFBSyxNQUFPQyxFQUFLQyxLQUFRN0YsT0FBTzhGLFFBQVFwRyxHQUNwQ2lHLEVBQUlDLEdBQU9wSCxLQUFLaUgsWUFBWUksRUFBS0gsR0FFckMsT0FBT0MsQ0FDWCxDQUNBLE1BQU0sa0JBQUVJLEVBQWlCLDRCQUFFQyxFQUEyQixpQkFBRXJCLEVBQWdCLDBCQUFFc0IsRUFBeUIsbUJBQUVDLEVBQWtCLHFCQUFFQyxFQUFvQiw4QkFBRUMsR0FBa0MxRyxFQUNqTCxHQUFJcUcsRUFBbUIsQ0FDbkIsSUFBSU0sRUFBUTdILEtBQUtvRSxrQkFBa0JtRCxJQUFvQjFELFFBSXZELE9BSEtnRSxJQUNEQSxFQUFRN0gsS0FBSzhILFNBQVNQLEVBQW1CRSxFQUEyQkUsRUFBc0JDLElBQzlGQyxFQUFNcEgsUUFBUVUsbUJBQXFCcUcsRUFDNUJLLENBQ1gsQ0FDQSxHQUFJMUIsRUFBa0IsQ0FDbEIsTUFBTWdCLEVBQU1uSCxLQUFLbUUsY0FBY2dDLEdBQy9CLElBQUtnQixFQUNELE1BQU0sSUFBSXRGLGVBQWU3QixLQUFNLDBCQUEwQm1HLEtBQzdELE9BQU9nQixDQUNYLENBQ0EsTUFBTVksRUFBZS9ILEtBQUt1RSxvQkFBb0JuRSxJQUFJcUgsR0FDbEQsT0FBSU0sRUFDT0EsRUFBYWQsWUFBWVMsRUFBb0JSLEdBRWpEaEcsQ0FDWCxDQUNBaUIsVUFBVWpCLEVBQU9jLEdBQ2IsSUFBK0QsSUFBM0RkLElBQVFULFFBQVFJLHVDQUFpRCxDQUNqRSxNQUFNc0csRUFBTSxDQUFDLEVBQ2IsSUFBSyxNQUFPQyxFQUFLQyxLQUFRN0YsT0FBTzhGLFFBQVFwRyxHQUNwQ2lHLEVBQUlDLEdBQU9wSCxLQUFLbUMsVUFBVWtGLEVBQUtyRixHQUVuQyxPQUFPbUYsQ0FDWCxDQUNBLElBQUtqRyxJQUFXQSxFQUFNVCxRQUFRRyxzQ0FBd0NaLEtBQUt5RSwyQkFBMkJ1RCxJQUFJOUcsRUFBTW5CLGFBQWFrRCxNQUN6SCxPQUFPL0IsRUFFWCxJQUFJdUcsRUFBNEJ2RyxFQUFNK0cscUJBQXVCL0csRUFBTW5CLGFBQWFrRCxNQUFNc0MsV0FDbEYyQyxFQUFlbEksS0FBS2lFLGFBQWE3RCxJQUFJYyxHQUN6QyxHQUFJZ0gsRUFBYyxDQUNkLE1BQU1WLEdBQStCeEgsS0FBS2dFLGdCQUFnQnVCLFdBUzFELE9BUkEyQyxFQUFhOUcsWUFBY29HLEVBQ2YsQ0FDUkQsa0JBQW1CVyxFQUFhMUgsR0FDaENnSCw4QkFDQUMsNEJBQ0FFLHFCQUFzQnpHLElBQVFULFFBQVFDLDJCQUN0Q2tILDhCQUErQjFHLElBQVFULFFBQVFFLCtCQUd2RCxDQUNBLE1BQU0sV0FBRXdILEVBQVUsYUFBRUMsR0FBaUJsSCxFQUNyQyxHQUFJaUgsR0FBY0MsSUFBaUJwSSxLQUkvQixNQUhZLENBQ1JtRyxpQkFBa0JnQyxHQUkxQixNQUFNRSxFQUFvQnJJLEtBQUt3RSx5QkFBeUJwRSxJQUFJYyxFQUFNbkIsYUFDbEUsR0FBSXNJLEVBQW1CLENBQ25CWixFQUE0QlksRUFDNUIsTUFBTXBDLEVBQWFqRyxLQUFLdUUsb0JBQW9CbkUsSUFBSWlJLEdBQ2hELElBQUtwQyxFQUNELE1BQU0sSUFBSXJELE1BQU0sNEJBQThCeUYsR0FDbEQsTUFBTUMsRUFBYXJDLEVBQVc5RCxVQUFVakIsRUFBT2MsR0FTL0MsTUFSWSxDQUNSdUYsdUJBQW1CekcsRUFDbkIwRyxpQ0FBNkIxRyxFQUM3QjJHLDRCQUNBRSxxQkFBc0J6RyxJQUFRVCxRQUFRQywyQkFDdENrSCw4QkFBK0IxRyxJQUFRVCxRQUFRRSwrQkFDL0MrRyxtQkFBb0JZLEVBRzVCLENBQ0EsTUFBTWYsR0FBcUJ2SCxLQUFLZ0UsZ0JBQWdCdUIsV0FjaEQsT0FiQTJDLEVBQWUsQ0FDWDFILEdBQUkrRyxFQUNKbkcsWUFBYW1HLEdBRWpCdkgsS0FBS2lFLGFBQWFoRCxJQUFJQyxFQUFPZ0gsR0FDN0JsSSxLQUFLbUUsY0FBY29ELEdBQXFCckcsRUFDNUIsQ0FDUnFHLG9CQUNBQyw0QkFBNkJELEVBQzdCRSw0QkFDQUUscUJBQXNCekcsSUFBUVQsUUFBUUMsMkJBQ3RDa0gsOEJBQStCMUcsSUFBUVQsUUFBUUUsK0JBR3ZELENBQ0FtSCxTQUFTeEYsRUFBU2lHLEVBQXNCMUksRUFBWUMsR0FDaEQsTUFBTTBJLEVBQW9CLENBQ3RCaEksR0FBSThCLEVBQ0psQixpQkFBYU4sR0FFWDJILEVBQU0sSUFBSWhKLFNBQVNPLEtBQU13SSxFQUFtQkQsRUFBc0IxSSxFQUFZQyxHQUU5RStILEVBQVEsSUFBSTdHLE1BRHNCLGFBQXpCdUgsR0FBZ0Usa0JBQXpCQSxFQUEyQyxXQUFjLEVBQUlFLEVBQ25GQSxHQUMxQkMsRUFBVSxJQUFJOUUsUUFBUWlFLEdBRzVCLE9BRkE3SCxLQUFLb0Usa0JBQWtCOUIsR0FBV29HLEVBQ2xDMUksS0FBS3FFLFdBQVdQLFNBQVMyRSxFQUFLRCxHQUN2QlgsQ0FDWCxDQUNBeEIsb0JBQW9CdkQsRUFBU29FLEdBQ3pCLElBQ0ksT0FBUXBFLEVBQVFULE1BQ1osSUFBSyxRQUFTLENBQ1YsTUFBTXNHLEVBQVc3RixFQUNYZCxFQUF1QixDQUFDLEVBQ3hCMkQsRUFBUyxDQUNYdEQsS0FBTSxTQUNON0IsR0FBSW1JLEVBQVNuSSxHQUNibUYsT0FBUTNGLEtBQUttQyxVQUFVbkMsS0FBS3FELE9BQU9zRixFQUFTckMsT0FBUXRFLElBRXhEaEMsS0FBS3lDLEtBQUtrRCxPQUFRN0UsRUFBV2tCLEdBQzdCLEtBQ0osQ0FDQSxJQUFLLFFBQVMsQ0FDVixNQUFNSSxFQUFXVSxFQUNYNkMsRUFBUyxDQUNYdEQsS0FBTSxTQUNON0IsR0FBSTRCLEVBQVM1QixJQUFNLElBRWpCd0IsRUFBdUIsQ0FBQyxFQUM5QixJQUNJLE1BQU0zQixFQUFTTCxLQUFLbUUsY0FBYy9CLEVBQVNFLFNBQzNDLElBQUtqQyxFQUNELE1BQU0sSUFBSXVDLE1BQU0sWUFBWVIsRUFBU0UscUJBQ3pDLE1BQU1QLEVBQU8sR0FDYixJQUFLLE1BQU1FLEtBQVFHLEVBQVNMLE1BQVEsR0FDaENBLEVBQUtHLEtBQUtsQyxLQUFLaUgsWUFBWWhGLEVBQUtpRixJQUVwQyxJQUFJaEcsRUFDSixHQUFJa0IsRUFBU04sT0FBUSxDQUVqQixJQURlekIsRUFBTytCLEVBQVNOLFFBRTNCLE1BQU0sSUFBSWMsTUFBTSxVQUFVdkMsR0FBUU4sYUFBYWtELDZCQUE2QmIsRUFBU04sVUFDekZaLFFBQWNiLEVBQU8rQixFQUFTTixXQUFXQyxFQUM3QyxNQUVJYixRQUFjYixLQUFVMEIsR0FFNUI0RCxFQUFPQSxPQUFTM0YsS0FBS21DLFVBQVVqQixFQUFPYyxFQUsxQyxDQUhBLE1BQU8xQyxHQUVIVSxLQUFLZ0gsa0JBQWtCckIsRUFBUXJHLEVBQ25DLENBQ0s4QyxFQUFTSSxRQUNWeEMsS0FBS3lDLEtBQUtrRCxPQUFRN0UsRUFBV2tCLEdBQ2pDLEtBQ0osQ0FDQSxJQUFLLFNBQVUsQ0FDWCxNQUFNNEcsRUFBWTlGLEVBQ1orRixFQUFXN0ksS0FBSzBCLGVBQWVrSCxFQUFVcEksSUFFL0MsVUFET1IsS0FBSzBCLGVBQWVrSCxFQUFVcEksS0FDaENxSSxFQUNELE1BQU0sSUFBSWpHLE1BQU0sa0JBQWtCZ0csRUFBVXBJLE1BQ2hELEdBQUlvSSxFQUFVOUYsU0FBVzhGLEVBQVUxRixNQUFPLENBQ3RDLE1BQU01RCxFQUFJLElBQUl1QyxlQUFlN0IsS0FBTTRJLEVBQVU5RixTQUFXLGtCQUFjaEMsRUFBVyxDQUM3RW1DLEtBQU0yRixFQUFVakQsT0FDaEJ6QyxNQUFPMEYsRUFBVTFGLFFBR3JCLFlBREEyRixFQUFTakgsT0FBT3RDLEVBRXBCLENBQ0F1SixFQUFTbkcsUUFBUTFDLEtBQUtpSCxZQUFZMkIsRUFBVWpELE9BQVF1QixJQUNwRCxLQUNKLENBQ0EsSUFBSyxXQUFZLENBQ2IsTUFBTWhCLEVBQWNwRCxFQUNkZ0csRUFBUTlJLEtBQUttRSxjQUFjK0IsRUFBWUMsa0JBQzdDLEdBQUkyQyxFQUFPLENBQ1AsTUFBTU4sRUFBb0J4SSxLQUFLaUUsYUFBYTdELElBQUkwSSxHQUVoRCxHQUFJNUMsRUFBWUUsNEJBQThCRixFQUFZRSw2QkFBK0JvQyxHQUFtQnBILFlBQ3hHLGFBRUdwQixLQUFLbUUsY0FBYytCLEVBQVlDLGtCQUN0Q25HLEtBQUtpRSxhQUFhOEUsT0FBT0QsRUFDN0IsQ0FDQSxLQUNKLENBQ0EsUUFDSSxNQUFNLElBQUlsRyxNQUFNLDRCQUE0QkUsRUFBUVQsUUFNaEUsQ0FIQSxNQUFPL0MsR0FFSCxZQURBQyxRQUFRbUcsTUFBTSxzQkFBdUIxRixLQUFLRyxTQUFVYixFQUV4RCxDQUNKLEVBRUcsU0FBUzBKLGdCQUNaLE1BQU8sMkJBRUR2Six1QkFFQWdCLDJHQVFWLEMsR0NyZEl3SSx5QkFBMkIsQ0FBQyxFQUdoQyxTQUFTQyxvQkFBb0JDLEdBRTVCLElBQUlDLEVBQWVILHlCQUF5QkUsR0FDNUMsUUFBcUJySSxJQUFqQnNJLEVBQ0gsT0FBT0EsRUFBYUMsUUFHckIsSUFBSXZDLEVBQVNtQyx5QkFBeUJFLEdBQVksQ0FDakQzSSxHQUFJMkksRUFDSkcsUUFBUSxFQUNSRCxRQUFTLENBQUMsR0FVWCxPQU5BRSxvQkFBb0JKLEdBQVVyQyxFQUFRQSxFQUFPdUMsUUFBU0gscUJBR3REcEMsRUFBT3dDLFFBQVMsRUFHVHhDLEVBQU91QyxPQUNmLENDeEJBSCxvQkFBb0JNLEVBQUksQ0FBQ0gsRUFBU0ksS0FDakMsSUFBSSxJQUFJckMsS0FBT3FDLEVBQ1hQLG9CQUFvQlEsRUFBRUQsRUFBWXJDLEtBQVM4QixvQkFBb0JRLEVBQUVMLEVBQVNqQyxJQUM1RTVGLE9BQU9tSSxlQUFlTixFQUFTakMsRUFBSyxDQUFFd0MsWUFBWSxFQUFNeEosSUFBS3FKLEVBQVdyQyxJQUUxRSxFQ05EOEIsb0JBQW9CL0osRUFBSSxXQUN2QixHQUEwQixpQkFBZjBLLFdBQXlCLE9BQU9BLFdBQzNDLElBQ0MsT0FBTzdKLE1BQVEsSUFBSThKLFNBQVMsY0FBYixFQUdoQixDQUZFLE1BQU94SyxHQUNSLEdBQXNCLGlCQUFYcUUsT0FBcUIsT0FBT0EsTUFDeEMsQ0FDQSxDQVB1QixHQ0F4QnVGLG9CQUFvQmEsSUFBT2pELEtBQzFCQSxFQUFTdEYsT0FBT3dJLE9BQU9sRCxJQUNYbUQsV0FBVW5ELEVBQU9tRCxTQUFXLElBQ3hDekksT0FBT21JLGVBQWU3QyxFQUFRLFVBQVcsQ0FDeEM4QyxZQUFZLEVBQ1ozSSxJQUFLLEtBQ0osTUFBTSxJQUFJMkIsTUFBTSwwRkFBNEZrRSxFQUFPdEcsR0FBRyxJQUdqSHNHLEdDVFJvQyxvQkFBb0JRLEVBQUksQ0FBQ1EsRUFBS0MsSUFBVTNJLE9BQU80SSxVQUFVQyxlQUFlQyxLQUFLSixFQUFLQyxHLGdFQ0EzRSxNQUFNSSxFQUNUQyxVQUFXLEVBQ1g5SCxRQUNBZCxPQUNBMEQsUUFBVSxJQUFJM0QsU0FBUSxDQUFDZSxFQUFTZCxLQUM1QjVCLEtBQUswQyxRQUFVK0gsSUFDWHpLLEtBQUt3SyxVQUFXLEVBQ2hCOUgsRUFBUStILEVBQUUsRUFFZHpLLEtBQUs0QixPQUFTdEMsSUFDVlUsS0FBS3dLLFVBQVcsRUFDaEI1SSxFQUFPdEMsRUFBRSxDQUNaLElDWFQsU0FBU29MLElBQ0wsSUFDSSxPQUFPQyxVQUFVQyxTQUdyQixDQURBLE1BQU90TCxHQUNQLENBQ0osQ0E2Qk8sTUFBTXVMLEVBQ1RDLEdBQ0FDLFdBQWEsSUFBSVIsRUFDakJTLFdBQWEsSUFBSVQsRUFDakJ4SCxRQUFVLENBQ042SCxVQUFXRixJQUNYTyxhQUFjLENBQ1ZDLE1BQU9DLGVBQWVDLGtCQUFrQixVQUFZLENBQ2hEQyxZQUFRdkssRUFDUndLLHNCQUFrQnhLLEdBRXRCeUssTUFBT0osZUFBZUMsa0JBQWtCLFVBQVksQ0FDaERDLFlBQVF2SyxFQUNSd0ssc0JBQWtCeEssSUFHMUIwSyxPQUFRLENBQ0pDLE1BQU9ELE9BQU9DLE1BQ2RDLE9BQVFGLE9BQU9FLFNBR3ZCM0wsY0FDQSxDQUNBc0csbUJBQ0ksT0FBT3JHLEtBQUsrQyxPQUNoQixDQUNBNEksUUFDSTNMLEtBQUsrSyxXQUFXekYsUUFBUXNHLE1BQUtkLElBQ3pCLElBQUssTUFBTWUsS0FBS2YsRUFBR2dCLG1CQUFxQixHQUNwQyxJQUNJRCxFQUFFRSxRQUFRQyxPQUFPQyxRQUdyQixDQURBLE1BQU8zTSxHQUNQLENBRUp3TCxFQUFHYSxPQUFPLElBRVRuRyxPQUFNLFNBQ1h4RixLQUFLK0ssV0FBV25KLE9BQU8sSUFBSWdCLE1BQU0sc0JBQXdCNUMsS0FBSzhLLElBQUlvQixvQkFDdEUsQ0FDQTdGLDJCQUEyQjhGLEdBQ3ZCLEdBQUluTSxLQUFLOEssR0FDTCxPQUNKLE1BQU1zQixFQUFZLEtBQ2Q3TSxRQUFROE0sSUFBSSxxQkFBc0J2QixFQUFHb0Isb0JBQ3JDM00sUUFBUThNLElBQUksa0JBQW1CdkIsRUFBR3dCLGlCQWxEdkMsU0FBZ0N4QixHQUNuQyxNQUFpQyxpQkFBMUJBLEVBQUdvQixvQkFDdUIsV0FBMUJwQixFQUFHb0Isb0JBQ3VCLFdBQTFCcEIsRUFBR29CLGtCQUNkLENBK0NnQkssQ0FBdUJ6QixJQUN2QjlLLEtBQUsyTCxPQUFPLEVBRWRiLEVBQUs5SyxLQUFLOEssR0FBSyxJQUFJMEIsa0JBQWtCTCxFQUFNTSxlQU9qRCxHQU5Bek0sS0FBSytLLFdBQVdySSxRQUFRb0ksR0FDeEJBLEVBQUc0QixpQkFBaUIsd0JBQXlCTixHQUM3Q3RCLEVBQUc0QixpQkFBaUIsMkJBQTRCTixHQUNoRHRCLEVBQUc0QixpQkFBaUIsMkJBQTJCQyxHQUFNcE4sUUFBUThNLElBQUksb0JBQXFCdkIsRUFBRzhCLHFCQUN6RjlCLEVBQUc0QixpQkFBaUIsd0JBQXdCQyxHQUFNcE4sUUFBUThNLElBQUksaUJBQWtCdkIsRUFBRytCLGtCQUNuRi9CLEVBQUc0QixpQkFBaUIscUJBQXFCQyxHQUFNcE4sUUFBUThNLElBQUksdUJBQ3ZERixFQUFNVyxZQUFhLENBQ25CLE1BQU1DLEVBQUtqQyxFQUFHa0Msa0JBQWtCYixFQUFNVyxZQUFZRyxNQUFPZCxFQUFNVyxZQUFZSSxNQUMzRUgsRUFBR0ksV0FBYSxjQUNoQm5OLEtBQUtnTCxXQUFXdEksUUFBUXFLLEVBQzVCLENBQ0EsR0FBSVosRUFBTWpCLE1BQ04sR0FBOEIsYUFBMUJpQixFQUFNakIsTUFBTWtDLFdBQXNELGFBQTFCakIsRUFBTWpCLE1BQU1rQyxVQUNwRCxJQUVJLE1BQU1DLFFBQVkxQyxVQUFVMkMsYUFBYUMsYUFBYSxDQUFFaEMsT0FBTyxFQUFPTCxPQUFPLElBQzdFLElBQUssTUFBTWMsS0FBU3FCLEVBQUlHLFlBQ3BCMUMsRUFBRzJDLFNBQVN6QixFQVlwQixDQVRBLE1BQU8xTSxHQUNILElBQUlvTyxFQUFVLEtBQ1YsSUFBSUMsRUFBTSxJQUFJQyxhQUFnQkMsRUFBYUYsRUFBSUcsbUJBQy9DLE1BQU1DLEVBQU9KLEVBQUlLLCtCQUdqQixPQUZBSCxFQUFXSSxRQUFRRixHQUNuQkYsRUFBV0ssUUFDSjFNLE9BQU9vRixPQUFPbUgsRUFBS0ksT0FBT0MsaUJBQWlCLEdBQUksQ0FBRUMsU0FBUyxHQUFRLEVBRTdFdkQsRUFBRzJDLFNBQVNDLElBQ2hCLE1BR0E1QyxFQUFHd0QsZUFBZSxRQUFTbkMsRUFBTWpCLE9BR3pDLEdBQUlpQixFQUFNWixNQUNOLEdBQThCLGFBQTFCWSxFQUFNWixNQUFNNkIsV0FBc0QsYUFBMUJqQixFQUFNWixNQUFNNkIsVUFDcEQsSUFFSSxNQUFNbUIsUUFBZTVELFVBQVUyQyxhQUFhQyxhQUFhLENBQUVoQyxPQUFPLElBQ2xFLElBQUssTUFBTVMsS0FBU3VDLEVBQU9mLFlBQ3ZCMUMsRUFBRzJDLFNBQVN6QixFQUtwQixDQUZBLE1BQU8xTSxHQUVQLE1BR0F3TCxFQUFHd0QsZUFBZSxRQUFTbkMsRUFBTVosTUFHN0MsQ0FDQWxGLDZCQUE2QmhFLEVBQU04SixFQUFPcUMsU0FDaEN4TyxLQUFLeU8scUJBQXFCdEMsR0FDaEMsTUFBTXVDLEVBQW1CLElBQUkvTSxTQUFRZSxJQUNqQzFDLEtBQUs4SyxHQUFHNkQsZUFBaUJoQyxJQUNqQkEsRUFBR2lDLFdBQ0hyUCxRQUFROE0sSUFBSSxrQkFBbUJNLEVBQUdpQyxXQUNsQ0osSUFBbUJLLEtBQUtDLE1BQU1ELEtBQUtFLFVBQVVwQyxFQUFHaUMsY0FHaERsTSxPQUFRNUIsRUFDWixFQUVKZCxLQUFLOEssR0FBR2tFLDBCQUE0QixLQUNFLGFBQTlCaFAsS0FBSzhLLEdBQUc4QixtQkFDUmxLLE9BQVE1QixFQUFVLENBQ3pCLElBRUNtTyxFQUFpQkMsSUFFWixDQUNIN00sS0FBTTZNLEVBQUs3TSxLQUNYOE0sSUFBS0QsRUFBS0MsTUFHbEIsR0FBYSxVQUFUOU0sRUFBa0IsQ0FDbEIsSUFBSStNLFFBQWNwUCxLQUFLOEssR0FBR3VFLFlBQVksQ0FDbENDLHNCQUF1Qm5ELEVBQU1qQixNQUM3QnFFLHNCQUF1QnBELEVBQU1aLFFBRWpDLE1BQU10SyxFQUFNakIsS0FBSzhLLEdBQUcwRSxvQkFBb0JKLEdBQ3hDLE9BQUlaLFVBRUV2TixRQUNBeU4sRUFDTlUsUUFBY3BQLEtBQUs4SyxHQUFHdUUsWUFBWSxDQUM5QkMsc0JBQXVCbkQsRUFBTWpCLE1BQzdCcUUsc0JBQXVCcEQsRUFBTVosU0FMdEIwRCxFQUFjRyxFQVE3QixDQUNLLENBQ0QsSUFBSUssUUFBZXpQLEtBQUs4SyxHQUFHNEUsZUFDM0IsTUFBTXpPLEVBQU1qQixLQUFLOEssR0FBRzBFLG9CQUFvQkMsR0FDeEMsT0FBSWpCLFVBRUV2TixRQUNBeU4sRUFDTmUsRUFBU3pQLEtBQUs4SyxHQUFHNkUseUJBQTJCRixHQUhqQ1IsRUFBY1EsRUFLN0IsQ0FDSixDQUNBcEosMkJBQTJCdUosRUFBYXpELFNBQzlCbk0sS0FBS3lPLHFCQUFxQnRDLFNBQzFCbk0sS0FBSzhLLEdBQUcrRSxxQkFBcUJELEVBRXZDLENBQ0F2SixzQkFBc0J1SSxTQUNaNU8sS0FBSzhLLEdBQUdnRixnQkFBZ0JsQixFQUVsQyxDQUNBdkksbUJBQ0EsRUN0TUowSixTQUFTckQsaUJBQWlCLG9CQUFvQixTQUFVc0QsR0FDcEQsTUFBTWpOLEVBQVUsSUFBSWtOLEtBQUtDLFVBQVVDLG9CQUNuQ3BOLEVBQVFxTixvQkFBcUIsRUFDN0JILEtBQUtDLFVBQVVHLG9CQUFvQkMsY0FBY3BDLE1BQU1uTCxHQUN2RCxNQUNNd04sRUFEVU4sS0FBS0MsVUFBVUcsb0JBQW9CQyxjQUNyQkUsbUJBQ3hCakYsRUFBUXdFLFNBQVNVLGVBQWUsU0EwRHRDRixFQUFjRyxzQkFBc0JULEtBQUtDLFVBQVVTLFNBQVNDLFlBQVlDLE1BeERuREMsSUFDakJ2UixRQUFROE0sSUFBSXlFLEdBQ1osTUFBTUMsRUFBU0QsRUFBZ0JFLE1BQU1DLFFBQVVILEVBQWdCRSxNQUFNRSxVQUMvREMsRUFBUUwsRUFBZ0JNLGFBQWVOLEVBQWdCRSxNQUFNSyxXQUFXRixNQUN4RUcsRUFBTSxJQUFJQyxJQUFJUixHQUNkUyxFQUFlRixFQUFJRyxTQUNuQkMsRUFBUSxDQUFDLEVBQ2YsSUFBSyxNQUFPQyxFQUFHbEgsS0FBTSxJQUFJbUgsZ0JBQWdCTixFQUFJTyxRQUN6Q0gsRUFBTUMsR0FBS2xILEVBRWYsTUFBTTFILEVBQVUsQ0FDWitPLEtBQU1OLEVBQ05FLFNBRUVLLEVBQVNDLElBQUksU0FBU1YsRUFBSVcsT0FBUWxQLEdBd0N4QyxPQXZDQWdQLEVBQU9HLEdBQUcsUUFBUTdMLFVBQ2QwTCxFQUFPdFAsS0FBS29NLEtBQUtFLFVBQVUsQ0FDdkJvQyxXQUVKLE1BQU1nQixFQUFVLElBQUksS0FBUSxnQkFBaUIsUUFBUSxDQUFDclAsRUFBU2xCLEtBQzNELElBQ0ltUSxFQUFPdFAsS0FBS29NLEtBQUtFLFVBQVVqTSxHQUkvQixDQUZBLE1BQU94RCxHQUNIc0MsSUFBU3RDLEVBQ2IsS0FFSnlTLEVBQU9HLEdBQUcsV0FBWUUsSUFDbEJELEVBQVFFLGNBQWN4RCxLQUFLQyxNQUFNc0QsR0FBTSxJQUUzQyxNQUFNRSxFQUFVLElBQU0zTyxPQUFPZ0ksUUFDdkI0RyxFQUFVLElBQUkxSCxFQUNwQjBILEVBQVF4SCxXQUFXekYsUUFBUXNHLE1BQUtkLElBQzVCQSxFQUFHNEIsaUJBQWlCLHlCQUF5QixLQUNYLGlCQUExQjVCLEVBQUdvQixvQkFDMEIsV0FBMUJwQixFQUFHb0Isb0JBQ3VCLFdBQTFCcEIsRUFBR29CLG9CQUNOb0csR0FDSixJQUVKeEgsRUFBRzRCLGlCQUFpQiw0QkFBNEIsS0FDNUNuTixRQUFROE0sSUFBSSwyQkFBNEJ2QixFQUFHd0IsZ0JBQWlCeEIsRUFBR29CLG9CQUNqQyxpQkFBMUJwQixFQUFHb0Isb0JBQzBCLFdBQTFCcEIsRUFBR29CLG9CQUN1QixXQUExQnBCLEVBQUdvQixvQkFDTm9HLEdBQ0osSUFFSixNQUFNRSxFQUFjLElBQUlDLFlBQVkzSCxFQUFHNEgsZUFBZUMsS0FBS3BTLEdBQWFBLEVBQVN5TCxTQUNqRmxCLEVBQUc4SCxRQUFVdFQsR0FBS2tULEVBQVkvRSxTQUFTbk8sRUFBRTBNLE9BQ3pDVCxFQUFNc0gsVUFBWUwsQ0FBVyxJQUVqQ0wsRUFBUTlPLE9BQWdCLFFBQUlrUCxDQUFPLElBRWhDLElBQUksR0FHbkIsRyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL2Rpc3Qvc2VydmVyL3NyYy9ycGMuanMiLCJ3ZWJwYWNrOi8vL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovLy93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vL3dlYnBhY2svcnVudGltZS9nbG9iYWwiLCJ3ZWJwYWNrOi8vL3dlYnBhY2svcnVudGltZS9oYXJtb255IG1vZHVsZSBkZWNvcmF0b3IiLCJ3ZWJwYWNrOi8vL3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vLy4vZGlzdC9jb21tb24vc3JjL2RlZmVycmVkLmpzIiwid2VicGFjazovLy8uL2Rpc3QvY29tbW9uL3NyYy9ydGMtc2lnbmFsaW5nLmpzIiwid2VicGFjazovLy8uL2Rpc3QvZG9jcy9wbHVnaW5zL2dvb2dsZS1ob21lL2Nhc3QtcmVjZWl2ZXIvc3JjL2Nhc3QuanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGZ1bmN0aW9uIHN0YXJ0UGVyaW9kaWNHYXJiYWdlQ29sbGVjdGlvbigpIHtcbiAgICBpZiAoIWdsb2JhbC5nYykge1xuICAgICAgICBjb25zb2xlLndhcm4oJ3JwYyBwZWVyIGdhcmJhZ2UgY29sbGVjdGlvbiBub3QgYXZhaWxhYmxlOiBnbG9iYWwuZ2MgaXMgbm90IGV4cG9zZWQuJyk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgZyA9IGdsb2JhbDtcbiAgICAgICAgaWYgKGcuZ2MpIHtcbiAgICAgICAgICAgIHJldHVybiBzZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgZy5nYygpO1xuICAgICAgICAgICAgfSwgMTAwMDApO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNhdGNoIChlKSB7XG4gICAgfVxufVxuY2xhc3MgUnBjUHJveHkge1xuICAgIHBlZXI7XG4gICAgZW50cnk7XG4gICAgY29uc3RydWN0b3JOYW1lO1xuICAgIHByb3h5UHJvcHM7XG4gICAgcHJveHlPbmVXYXlNZXRob2RzO1xuICAgIGNvbnN0cnVjdG9yKHBlZXIsIGVudHJ5LCBjb25zdHJ1Y3Rvck5hbWUsIHByb3h5UHJvcHMsIHByb3h5T25lV2F5TWV0aG9kcykge1xuICAgICAgICB0aGlzLnBlZXIgPSBwZWVyO1xuICAgICAgICB0aGlzLmVudHJ5ID0gZW50cnk7XG4gICAgICAgIHRoaXMuY29uc3RydWN0b3JOYW1lID0gY29uc3RydWN0b3JOYW1lO1xuICAgICAgICB0aGlzLnByb3h5UHJvcHMgPSBwcm94eVByb3BzO1xuICAgICAgICB0aGlzLnByb3h5T25lV2F5TWV0aG9kcyA9IHByb3h5T25lV2F5TWV0aG9kcztcbiAgICB9XG4gICAgdG9QcmltaXRpdmUoKSB7XG4gICAgICAgIGNvbnN0IHBlZXIgPSB0aGlzLnBlZXI7XG4gICAgICAgIHJldHVybiBgUnBjUHJveHktJHtwZWVyLnNlbGZOYW1lfToke3BlZXIucGVlck5hbWV9OiAke3RoaXMuY29uc3RydWN0b3JOYW1lfWA7XG4gICAgfVxuICAgIGdldCh0YXJnZXQsIHAsIHJlY2VpdmVyKSB7XG4gICAgICAgIGlmIChwID09PSAnX19wcm94eV9pZCcpXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5lbnRyeS5pZDtcbiAgICAgICAgaWYgKHAgPT09ICdfX3Byb3h5X2NvbnN0cnVjdG9yJylcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnN0cnVjdG9yTmFtZTtcbiAgICAgICAgaWYgKHAgPT09ICdfX3Byb3h5X3BlZXInKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMucGVlcjtcbiAgICAgICAgaWYgKHAgPT09IFJwY1BlZXIuUFJPUEVSVFlfUFJPWFlfUFJPUEVSVElFUylcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByb3h5UHJvcHM7XG4gICAgICAgIGlmIChwID09PSBScGNQZWVyLlBST1BFUlRZX1BST1hZX09ORVdBWV9NRVRIT0RTKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJveHlPbmVXYXlNZXRob2RzO1xuICAgICAgICBpZiAocCA9PT0gUnBjUGVlci5QUk9QRVJUWV9KU09OX0RJU0FCTEVfU0VSSUFMSVpBVElPTiB8fCBwID09PSBScGNQZWVyLlBST1BFUlRZX0pTT05fQ09QWV9TRVJJQUxJWkVfQ0hJTERSRU4pXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGlmIChwID09PSAndGhlbicpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGlmIChwID09PSAnY29uc3RydWN0b3InKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBpZiAodGhpcy5wcm94eVByb3BzPy5bcF0gIT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByb3h5UHJvcHM/LltwXTtcbiAgICAgICAgY29uc3QgaGFuZGxlZCA9IFJwY1BlZXIuaGFuZGxlRnVuY3Rpb25JbnZvY2F0aW9ucyh0aGlzLCB0YXJnZXQsIHAsIHJlY2VpdmVyKTtcbiAgICAgICAgaWYgKGhhbmRsZWQpXG4gICAgICAgICAgICByZXR1cm4gaGFuZGxlZDtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm94eSgoKSA9PiBwLCB0aGlzKTtcbiAgICB9XG4gICAgc2V0KHRhcmdldCwgcCwgdmFsdWUsIHJlY2VpdmVyKSB7XG4gICAgICAgIGlmIChwID09PSBScGNQZWVyLmZpbmFsaXplcklkU3ltYm9sKVxuICAgICAgICAgICAgdGhpcy5lbnRyeS5maW5hbGl6ZXJJZCA9IHZhbHVlO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgYXBwbHkodGFyZ2V0LCB0aGlzQXJnLCBhcmdBcnJheSkge1xuICAgICAgICBpZiAoT2JqZWN0LmlzRnJvemVuKHRoaXMucGVlci5wZW5kaW5nUmVzdWx0cykpXG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IFJQQ1Jlc3VsdEVycm9yKHRoaXMucGVlciwgJ1JwY1BlZXIgaGFzIGJlZW4ga2lsbGVkJykpO1xuICAgICAgICAvLyBycGMgb2JqZWN0cyBjYW4gYmUgZnVuY3Rpb25zLiBpZiB0aGUgZnVuY3Rpb24gaXMgYSBvbmV3YXkgbWV0aG9kLFxuICAgICAgICAvLyBpdCB3aWxsIGhhdmUgYSBudWxsIGluIHRoZSBvbmV3YXkgbWV0aG9kIGxpc3QuIHRoaXMgaXMgYmVjYXVzZVxuICAgICAgICAvLyB1bmRlZmluZWQgaXMgbm90IEpTT04gc2VyaWFsaXphYmxlLlxuICAgICAgICBjb25zdCBtZXRob2QgPSB0YXJnZXQoKSB8fCBudWxsO1xuICAgICAgICBjb25zdCBhcmdzID0gW107XG4gICAgICAgIGNvbnN0IHNlcmlhbGl6YXRpb25Db250ZXh0ID0ge307XG4gICAgICAgIGZvciAoY29uc3QgYXJnIG9mIChhcmdBcnJheSB8fCBbXSkpIHtcbiAgICAgICAgICAgIGFyZ3MucHVzaCh0aGlzLnBlZXIuc2VyaWFsaXplKGFyZywgc2VyaWFsaXphdGlvbkNvbnRleHQpKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBycGNBcHBseSA9IHtcbiAgICAgICAgICAgIHR5cGU6IFwiYXBwbHlcIixcbiAgICAgICAgICAgIGlkOiB1bmRlZmluZWQsXG4gICAgICAgICAgICBwcm94eUlkOiB0aGlzLmVudHJ5LmlkLFxuICAgICAgICAgICAgYXJncyxcbiAgICAgICAgICAgIG1ldGhvZCxcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKHRoaXMucHJveHlPbmVXYXlNZXRob2RzPy5pbmNsdWRlcz8uKG1ldGhvZCkpIHtcbiAgICAgICAgICAgIHJwY0FwcGx5Lm9uZXdheSA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLnBlZXIuc2VuZChycGNBcHBseSwgdW5kZWZpbmVkLCBzZXJpYWxpemF0aW9uQ29udGV4dCk7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMucGVlci5jcmVhdGVQZW5kaW5nUmVzdWx0KChpZCwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICBycGNBcHBseS5pZCA9IGlkO1xuICAgICAgICAgICAgdGhpcy5wZWVyLnNlbmQocnBjQXBwbHksIHJlamVjdCwgc2VyaWFsaXphdGlvbkNvbnRleHQpO1xuICAgICAgICB9KTtcbiAgICB9XG59XG4vLyB0b2RvOiBlcnJvciBjb25zdHJ1Y3RvciBhZGRzIGEgXCJjYXVzZVwiIHZhcmlhYmxlIGluIENocm9tZSA5MywgTm9kZSB2Pz9cbmV4cG9ydCBjbGFzcyBSUENSZXN1bHRFcnJvciBleHRlbmRzIEVycm9yIHtcbiAgICBjYXVzZTtcbiAgICBjb25zdHJ1Y3RvcihwZWVyLCBtZXNzYWdlLCBjYXVzZSwgb3B0aW9ucykge1xuICAgICAgICBzdXBlcihgJHtwZWVyLnNlbGZOYW1lfToke3BlZXIucGVlck5hbWV9OiAke21lc3NhZ2V9YCk7XG4gICAgICAgIHRoaXMuY2F1c2UgPSBjYXVzZTtcbiAgICAgICAgaWYgKG9wdGlvbnM/Lm5hbWUpIHtcbiAgICAgICAgICAgIHRoaXMubmFtZSA9IG9wdGlvbnM/Lm5hbWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9wdGlvbnM/LnN0YWNrKSB7XG4gICAgICAgICAgICB0aGlzLnN0YWNrID0gYCR7cGVlci5wZWVyTmFtZX06JHtwZWVyLnNlbGZOYW1lfVxcbiR7Y2F1c2U/LnN0YWNrIHx8IG9wdGlvbnMuc3RhY2t9YDtcbiAgICAgICAgfVxuICAgIH1cbn1cbmZ1bmN0aW9uIGNvbXBpbGVGdW5jdGlvbihjb2RlLCBwYXJhbXMsIG9wdGlvbnMpIHtcbiAgICBwYXJhbXMgPSBwYXJhbXMgfHwgW107XG4gICAgY29uc3QgZiA9IGAoZnVuY3Rpb24oJHtwYXJhbXMuam9pbignLCcpfSkgezske2NvZGV9O30pYDtcbiAgICByZXR1cm4gZXZhbChmKTtcbn1cbnRyeSB7XG4gICAgY29uc3QgZnIgPSBGaW5hbGl6YXRpb25SZWdpc3RyeTtcbn1cbmNhdGNoIChlKSB7XG4gICAgd2luZG93LldlYWtSZWYgPSBjbGFzcyBXZWFrUmVmIHtcbiAgICAgICAgdGFyZ2V0O1xuICAgICAgICBjb25zdHJ1Y3Rvcih0YXJnZXQpIHtcbiAgICAgICAgICAgIHRoaXMudGFyZ2V0ID0gdGFyZ2V0O1xuICAgICAgICB9XG4gICAgICAgIGRlcmVmKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudGFyZ2V0O1xuICAgICAgICB9XG4gICAgfTtcbiAgICB3aW5kb3cuRmluYWxpemF0aW9uUmVnaXN0cnkgPSBjbGFzcyBGaW5hbGl6YXRpb25SZWdpc3RyeSB7XG4gICAgICAgIHJlZ2lzdGVyKCkge1xuICAgICAgICB9XG4gICAgfTtcbn1cbmV4cG9ydCBjbGFzcyBScGNQZWVyIHtcbiAgICBzZWxmTmFtZTtcbiAgICBwZWVyTmFtZTtcbiAgICBzZW5kO1xuICAgIGlkQ291bnRlciA9IDE7XG4gICAgcGFyYW1zID0ge307XG4gICAgcGVuZGluZ1Jlc3VsdHMgPSB7fTtcbiAgICBwcm94eUNvdW50ZXIgPSAxO1xuICAgIGxvY2FsUHJveGllZCA9IG5ldyBNYXAoKTtcbiAgICBsb2NhbFByb3h5TWFwID0ge307XG4gICAgcmVtb3RlV2Vha1Byb3hpZXMgPSB7fTtcbiAgICBmaW5hbGl6ZXJzID0gbmV3IEZpbmFsaXphdGlvblJlZ2lzdHJ5KGVudHJ5ID0+IHRoaXMuZmluYWxpemUoZW50cnkpKTtcbiAgICBuYW1lRGVzZXJpYWxpemVyTWFwID0gbmV3IE1hcCgpO1xuICAgIGNvbnN0cnVjdG9yU2VyaWFsaXplck1hcCA9IG5ldyBNYXAoKTtcbiAgICB0cmFuc3BvcnRTYWZlQXJndW1lbnRUeXBlcyA9IFJwY1BlZXIuZ2V0RGVmYXVsdFRyYW5zcG9ydFNhZmVBcmd1bWVudFR5cGVzKCk7XG4gICAgc3RhdGljIGZpbmFsaXplcklkU3ltYm9sID0gU3ltYm9sKCdycGNGaW5hbGl6ZXJJZCcpO1xuICAgIHN0YXRpYyBnZXREZWZhdWx0VHJhbnNwb3J0U2FmZUFyZ3VtZW50VHlwZXMoKSB7XG4gICAgICAgIGNvbnN0IGpzb25TZXJpYWxpemFibGUgPSBuZXcgU2V0KCk7XG4gICAgICAgIGpzb25TZXJpYWxpemFibGUuYWRkKE51bWJlci5uYW1lKTtcbiAgICAgICAganNvblNlcmlhbGl6YWJsZS5hZGQoU3RyaW5nLm5hbWUpO1xuICAgICAgICBqc29uU2VyaWFsaXphYmxlLmFkZChPYmplY3QubmFtZSk7XG4gICAgICAgIGpzb25TZXJpYWxpemFibGUuYWRkKEJvb2xlYW4ubmFtZSk7XG4gICAgICAgIGpzb25TZXJpYWxpemFibGUuYWRkKEFycmF5Lm5hbWUpO1xuICAgICAgICByZXR1cm4ganNvblNlcmlhbGl6YWJsZTtcbiAgICB9XG4gICAgc3RhdGljIGhhbmRsZUZ1bmN0aW9uSW52b2NhdGlvbnModGhpeiwgdGFyZ2V0LCBwLCByZWNlaXZlcikge1xuICAgICAgICBpZiAocCA9PT0gJ2FwcGx5Jykge1xuICAgICAgICAgICAgcmV0dXJuICh0aGlzQXJnLCBhcmdzKSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXouYXBwbHkodGFyZ2V0LCB0aGl6LCBhcmdzKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAocCA9PT0gJ2NhbGwnKSB7XG4gICAgICAgICAgICByZXR1cm4gKHRoaXNBcmcsIC4uLmFyZ3MpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpei5hcHBseSh0YXJnZXQsIHRoaXosIGFyZ3MpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChwID09PSAndG9TdHJpbmcnIHx8IHAgPT09IFN5bWJvbC50b1ByaW1pdGl2ZSkge1xuICAgICAgICAgICAgcmV0dXJuICh0aGlzQXJnLCAuLi5hcmdzKSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXoudG9QcmltaXRpdmUoKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhdGljIFBST1BFUlRZX1BST1hZX09ORVdBWV9NRVRIT0RTID0gJ19fcHJveHlfb25ld2F5X21ldGhvZHMnO1xuICAgIHN0YXRpYyBQUk9QRVJUWV9KU09OX0RJU0FCTEVfU0VSSUFMSVpBVElPTiA9ICdfX2pzb25fZGlzYWJsZV9zZXJpYWxpemF0aW9uJztcbiAgICBzdGF0aWMgUFJPUEVSVFlfUFJPWFlfUFJPUEVSVElFUyA9ICdfX3Byb3h5X3Byb3BzJztcbiAgICBzdGF0aWMgUFJPUEVSVFlfSlNPTl9DT1BZX1NFUklBTElaRV9DSElMRFJFTiA9ICdfX2pzb25fY29weV9zZXJpYWxpemVfY2hpbGRyZW4nO1xuICAgIHN0YXRpYyBQUk9CRURfUFJPUEVSVElFUyA9IG5ldyBTZXQoW1xuICAgICAgICAndGhlbicsXG4gICAgICAgICdjb25zdHJ1Y3RvcicsXG4gICAgICAgICdfX3Byb3h5X2lkJyxcbiAgICAgICAgJ19fcHJveHlfY29uc3RydWN0b3InLFxuICAgICAgICAnX19wcm94eV9wZWVyJyxcbiAgICAgICAgUnBjUGVlci5QUk9QRVJUWV9QUk9YWV9PTkVXQVlfTUVUSE9EUyxcbiAgICAgICAgUnBjUGVlci5QUk9QRVJUWV9KU09OX0RJU0FCTEVfU0VSSUFMSVpBVElPTixcbiAgICAgICAgUnBjUGVlci5QUk9QRVJUWV9QUk9YWV9QUk9QRVJUSUVTLFxuICAgICAgICBScGNQZWVyLlBST1BFUlRZX0pTT05fQ09QWV9TRVJJQUxJWkVfQ0hJTERSRU4sXG4gICAgXSk7XG4gICAgY29uc3RydWN0b3Ioc2VsZk5hbWUsIHBlZXJOYW1lLCBzZW5kKSB7XG4gICAgICAgIHRoaXMuc2VsZk5hbWUgPSBzZWxmTmFtZTtcbiAgICAgICAgdGhpcy5wZWVyTmFtZSA9IHBlZXJOYW1lO1xuICAgICAgICB0aGlzLnNlbmQgPSBzZW5kO1xuICAgIH1cbiAgICBjcmVhdGVQZW5kaW5nUmVzdWx0KGNiKSB7XG4gICAgICAgIGlmIChPYmplY3QuaXNGcm96ZW4odGhpcy5wZW5kaW5nUmVzdWx0cykpXG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IFJQQ1Jlc3VsdEVycm9yKHRoaXMsICdScGNQZWVyIGhhcyBiZWVuIGtpbGxlZCcpKTtcbiAgICAgICAgY29uc3QgcHJvbWlzZSA9IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGlkID0gKHRoaXMuaWRDb3VudGVyKyspLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICB0aGlzLnBlbmRpbmdSZXN1bHRzW2lkXSA9IHsgcmVzb2x2ZSwgcmVqZWN0IH07XG4gICAgICAgICAgICBjYihpZCwgZSA9PiByZWplY3QobmV3IFJQQ1Jlc3VsdEVycm9yKHRoaXMsIGUubWVzc2FnZSwgZSkpKTtcbiAgICAgICAgfSk7XG4gICAgICAgIC8vIHRvZG86IG1ha2UgdGhpcyBhbiBvcHRpb24gc28gcnBjIGRvZXNuJ3QgbnVrZSB0aGUgcHJvY2VzcyBpZiB1bmNhdWdodD9cbiAgICAgICAgcHJvbWlzZS5jYXRjaCgoKSA9PiB7IH0pO1xuICAgICAgICByZXR1cm4gcHJvbWlzZTtcbiAgICB9XG4gICAga2lsbChtZXNzYWdlKSB7XG4gICAgICAgIGNvbnN0IGVycm9yID0gbmV3IFJQQ1Jlc3VsdEVycm9yKHRoaXMsIG1lc3NhZ2UgfHwgJ3BlZXIgd2FzIGtpbGxlZCcpO1xuICAgICAgICBmb3IgKGNvbnN0IHJlc3VsdCBvZiBPYmplY3QudmFsdWVzKHRoaXMucGVuZGluZ1Jlc3VsdHMpKSB7XG4gICAgICAgICAgICByZXN1bHQucmVqZWN0KGVycm9yKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnBlbmRpbmdSZXN1bHRzID0gT2JqZWN0LmZyZWV6ZSh7fSk7XG4gICAgICAgIHRoaXMucmVtb3RlV2Vha1Byb3hpZXMgPSBPYmplY3QuZnJlZXplKHt9KTtcbiAgICAgICAgdGhpcy5sb2NhbFByb3h5TWFwID0gT2JqZWN0LmZyZWV6ZSh7fSk7XG4gICAgICAgIHRoaXMubG9jYWxQcm94aWVkLmNsZWFyKCk7XG4gICAgfVxuICAgIC8vIG5lZWQgYSBuYW1lL2NvbnN0cnVjdG9yIG1hcCBkdWUgdG8gYmFiZWwgbmFtZSBtYW5nbGluZz8gZml4IHNvbWVob3c/XG4gICAgYWRkU2VyaWFsaXplcihjdHIsIG5hbWUsIHNlcmlhbGl6ZXIpIHtcbiAgICAgICAgdGhpcy5uYW1lRGVzZXJpYWxpemVyTWFwLnNldChuYW1lLCBzZXJpYWxpemVyKTtcbiAgICAgICAgdGhpcy5jb25zdHJ1Y3RvclNlcmlhbGl6ZXJNYXAuc2V0KGN0ciwgbmFtZSk7XG4gICAgfVxuICAgIGZpbmFsaXplKGVudHJ5KSB7XG4gICAgICAgIGRlbGV0ZSB0aGlzLnJlbW90ZVdlYWtQcm94aWVzW2VudHJ5LmlkXTtcbiAgICAgICAgY29uc3QgcnBjRmluYWxpemUgPSB7XG4gICAgICAgICAgICBfX2xvY2FsX3Byb3h5X2lkOiBlbnRyeS5pZCxcbiAgICAgICAgICAgIF9fbG9jYWxfcHJveHlfZmluYWxpemVyX2lkOiBlbnRyeS5maW5hbGl6ZXJJZCxcbiAgICAgICAgICAgIHR5cGU6ICdmaW5hbGl6ZScsXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuc2VuZChycGNGaW5hbGl6ZSk7XG4gICAgfVxuICAgIGFzeW5jIGdldFBhcmFtKHBhcmFtKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNyZWF0ZVBlbmRpbmdSZXN1bHQoKGlkLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHBhcmFtTWVzc2FnZSA9IHtcbiAgICAgICAgICAgICAgICBpZCxcbiAgICAgICAgICAgICAgICB0eXBlOiAncGFyYW0nLFxuICAgICAgICAgICAgICAgIHBhcmFtLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMuc2VuZChwYXJhbU1lc3NhZ2UsIHJlamVjdCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBldmFsTG9jYWwoc2NyaXB0LCBmaWxlbmFtZSwgY29lcmNlZFBhcmFtcykge1xuICAgICAgICBjb25zdCBwYXJhbXMgPSBPYmplY3QuYXNzaWduKHt9LCB0aGlzLnBhcmFtcywgY29lcmNlZFBhcmFtcyk7XG4gICAgICAgIGxldCBjb21waWxlO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gcHJldmVudCBidW5kbGVycyBmcm9tIHRyeWluZyB0byBpbmNsdWRlIG5vbi1leGlzdGVudCB2bSBtb2R1bGUuXG4gICAgICAgICAgICBjb21waWxlID0gbW9kdWxlW2ByZXF1aXJlYF0oJ3ZtJykuY29tcGlsZUZ1bmN0aW9uO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICBjb21waWxlID0gY29tcGlsZUZ1bmN0aW9uO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGYgPSBjb21waWxlKHNjcmlwdCwgT2JqZWN0LmtleXMocGFyYW1zKSwge1xuICAgICAgICAgICAgZmlsZW5hbWUsXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCB2YWx1ZSA9IGYoLi4uT2JqZWN0LnZhbHVlcyhwYXJhbXMpKTtcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cbiAgICBjcmVhdGVFcnJvclJlc3VsdChyZXN1bHQsIGUpIHtcbiAgICAgICAgcmVzdWx0LnN0YWNrID0gZS5zdGFjayB8fCAnbm8gc3RhY2snO1xuICAgICAgICByZXN1bHQucmVzdWx0ID0gZS5uYW1lIHx8ICdubyBuYW1lJztcbiAgICAgICAgcmVzdWx0Lm1lc3NhZ2UgPSBlLm1lc3NhZ2UgfHwgJ25vIG1lc3NhZ2UnO1xuICAgIH1cbiAgICBkZXNlcmlhbGl6ZSh2YWx1ZSwgZGVzZXJpYWxpemF0aW9uQ29udGV4dCkge1xuICAgICAgICBpZiAoIXZhbHVlKVxuICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICBjb25zdCBjb3B5U2VyaWFsaXplQ2hpbGRyZW4gPSB2YWx1ZVtScGNQZWVyLlBST1BFUlRZX0pTT05fQ09QWV9TRVJJQUxJWkVfQ0hJTERSRU5dO1xuICAgICAgICBpZiAoY29weVNlcmlhbGl6ZUNoaWxkcmVuKSB7XG4gICAgICAgICAgICBjb25zdCByZXQgPSB7fTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsXSBvZiBPYmplY3QuZW50cmllcyh2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICByZXRba2V5XSA9IHRoaXMuZGVzZXJpYWxpemUodmFsLCBkZXNlcmlhbGl6YXRpb25Db250ZXh0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZXQ7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgeyBfX3JlbW90ZV9wcm94eV9pZCwgX19yZW1vdGVfcHJveHlfZmluYWxpemVyX2lkLCBfX2xvY2FsX3Byb3h5X2lkLCBfX3JlbW90ZV9jb25zdHJ1Y3Rvcl9uYW1lLCBfX3NlcmlhbGl6ZWRfdmFsdWUsIF9fcmVtb3RlX3Byb3h5X3Byb3BzLCBfX3JlbW90ZV9wcm94eV9vbmV3YXlfbWV0aG9kcyB9ID0gdmFsdWU7XG4gICAgICAgIGlmIChfX3JlbW90ZV9wcm94eV9pZCkge1xuICAgICAgICAgICAgbGV0IHByb3h5ID0gdGhpcy5yZW1vdGVXZWFrUHJveGllc1tfX3JlbW90ZV9wcm94eV9pZF0/LmRlcmVmKCk7XG4gICAgICAgICAgICBpZiAoIXByb3h5KVxuICAgICAgICAgICAgICAgIHByb3h5ID0gdGhpcy5uZXdQcm94eShfX3JlbW90ZV9wcm94eV9pZCwgX19yZW1vdGVfY29uc3RydWN0b3JfbmFtZSwgX19yZW1vdGVfcHJveHlfcHJvcHMsIF9fcmVtb3RlX3Byb3h5X29uZXdheV9tZXRob2RzKTtcbiAgICAgICAgICAgIHByb3h5W1JwY1BlZXIuZmluYWxpemVySWRTeW1ib2xdID0gX19yZW1vdGVfcHJveHlfZmluYWxpemVyX2lkO1xuICAgICAgICAgICAgcmV0dXJuIHByb3h5O1xuICAgICAgICB9XG4gICAgICAgIGlmIChfX2xvY2FsX3Byb3h5X2lkKSB7XG4gICAgICAgICAgICBjb25zdCByZXQgPSB0aGlzLmxvY2FsUHJveHlNYXBbX19sb2NhbF9wcm94eV9pZF07XG4gICAgICAgICAgICBpZiAoIXJldClcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUlBDUmVzdWx0RXJyb3IodGhpcywgYGludmFsaWQgbG9jYWwgcHJveHkgaWQgJHtfX2xvY2FsX3Byb3h5X2lkfWApO1xuICAgICAgICAgICAgcmV0dXJuIHJldDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBkZXNlcmlhbGl6ZXIgPSB0aGlzLm5hbWVEZXNlcmlhbGl6ZXJNYXAuZ2V0KF9fcmVtb3RlX2NvbnN0cnVjdG9yX25hbWUpO1xuICAgICAgICBpZiAoZGVzZXJpYWxpemVyKSB7XG4gICAgICAgICAgICByZXR1cm4gZGVzZXJpYWxpemVyLmRlc2VyaWFsaXplKF9fc2VyaWFsaXplZF92YWx1ZSwgZGVzZXJpYWxpemF0aW9uQ29udGV4dCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cbiAgICBzZXJpYWxpemUodmFsdWUsIHNlcmlhbGl6YXRpb25Db250ZXh0KSB7XG4gICAgICAgIGlmICh2YWx1ZT8uW1JwY1BlZXIuUFJPUEVSVFlfSlNPTl9DT1BZX1NFUklBTElaRV9DSElMRFJFTl0gPT09IHRydWUpIHtcbiAgICAgICAgICAgIGNvbnN0IHJldCA9IHt9O1xuICAgICAgICAgICAgZm9yIChjb25zdCBba2V5LCB2YWxdIG9mIE9iamVjdC5lbnRyaWVzKHZhbHVlKSkge1xuICAgICAgICAgICAgICAgIHJldFtrZXldID0gdGhpcy5zZXJpYWxpemUodmFsLCBzZXJpYWxpemF0aW9uQ29udGV4dCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmV0O1xuICAgICAgICB9XG4gICAgICAgIGlmICghdmFsdWUgfHwgKCF2YWx1ZVtScGNQZWVyLlBST1BFUlRZX0pTT05fRElTQUJMRV9TRVJJQUxJWkFUSU9OXSAmJiB0aGlzLnRyYW5zcG9ydFNhZmVBcmd1bWVudFR5cGVzLmhhcyh2YWx1ZS5jb25zdHJ1Y3Rvcj8ubmFtZSkpKSB7XG4gICAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IF9fcmVtb3RlX2NvbnN0cnVjdG9yX25hbWUgPSB2YWx1ZS5fX3Byb3h5X2NvbnN0cnVjdG9yIHx8IHZhbHVlLmNvbnN0cnVjdG9yPy5uYW1lPy50b1N0cmluZygpO1xuICAgICAgICBsZXQgcHJveGllZEVudHJ5ID0gdGhpcy5sb2NhbFByb3hpZWQuZ2V0KHZhbHVlKTtcbiAgICAgICAgaWYgKHByb3hpZWRFbnRyeSkge1xuICAgICAgICAgICAgY29uc3QgX19yZW1vdGVfcHJveHlfZmluYWxpemVyX2lkID0gKHRoaXMucHJveHlDb3VudGVyKyspLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICBwcm94aWVkRW50cnkuZmluYWxpemVySWQgPSBfX3JlbW90ZV9wcm94eV9maW5hbGl6ZXJfaWQ7XG4gICAgICAgICAgICBjb25zdCByZXQgPSB7XG4gICAgICAgICAgICAgICAgX19yZW1vdGVfcHJveHlfaWQ6IHByb3hpZWRFbnRyeS5pZCxcbiAgICAgICAgICAgICAgICBfX3JlbW90ZV9wcm94eV9maW5hbGl6ZXJfaWQsXG4gICAgICAgICAgICAgICAgX19yZW1vdGVfY29uc3RydWN0b3JfbmFtZSxcbiAgICAgICAgICAgICAgICBfX3JlbW90ZV9wcm94eV9wcm9wczogdmFsdWU/LltScGNQZWVyLlBST1BFUlRZX1BST1hZX1BST1BFUlRJRVNdLFxuICAgICAgICAgICAgICAgIF9fcmVtb3RlX3Byb3h5X29uZXdheV9tZXRob2RzOiB2YWx1ZT8uW1JwY1BlZXIuUFJPUEVSVFlfUFJPWFlfT05FV0FZX01FVEhPRFNdLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJldHVybiByZXQ7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgeyBfX3Byb3h5X2lkLCBfX3Byb3h5X3BlZXIgfSA9IHZhbHVlO1xuICAgICAgICBpZiAoX19wcm94eV9pZCAmJiBfX3Byb3h5X3BlZXIgPT09IHRoaXMpIHtcbiAgICAgICAgICAgIGNvbnN0IHJldCA9IHtcbiAgICAgICAgICAgICAgICBfX2xvY2FsX3Byb3h5X2lkOiBfX3Byb3h5X2lkLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJldHVybiByZXQ7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgc2VyaWFsaXplck1hcE5hbWUgPSB0aGlzLmNvbnN0cnVjdG9yU2VyaWFsaXplck1hcC5nZXQodmFsdWUuY29uc3RydWN0b3IpO1xuICAgICAgICBpZiAoc2VyaWFsaXplck1hcE5hbWUpIHtcbiAgICAgICAgICAgIF9fcmVtb3RlX2NvbnN0cnVjdG9yX25hbWUgPSBzZXJpYWxpemVyTWFwTmFtZTtcbiAgICAgICAgICAgIGNvbnN0IHNlcmlhbGl6ZXIgPSB0aGlzLm5hbWVEZXNlcmlhbGl6ZXJNYXAuZ2V0KHNlcmlhbGl6ZXJNYXBOYW1lKTtcbiAgICAgICAgICAgIGlmICghc2VyaWFsaXplcilcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3NlcmlhbGl6ZXIgbm90IGZvdW5kIGZvciAnICsgc2VyaWFsaXplck1hcE5hbWUpO1xuICAgICAgICAgICAgY29uc3Qgc2VyaWFsaXplZCA9IHNlcmlhbGl6ZXIuc2VyaWFsaXplKHZhbHVlLCBzZXJpYWxpemF0aW9uQ29udGV4dCk7XG4gICAgICAgICAgICBjb25zdCByZXQgPSB7XG4gICAgICAgICAgICAgICAgX19yZW1vdGVfcHJveHlfaWQ6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICBfX3JlbW90ZV9wcm94eV9maW5hbGl6ZXJfaWQ6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICBfX3JlbW90ZV9jb25zdHJ1Y3Rvcl9uYW1lLFxuICAgICAgICAgICAgICAgIF9fcmVtb3RlX3Byb3h5X3Byb3BzOiB2YWx1ZT8uW1JwY1BlZXIuUFJPUEVSVFlfUFJPWFlfUFJPUEVSVElFU10sXG4gICAgICAgICAgICAgICAgX19yZW1vdGVfcHJveHlfb25ld2F5X21ldGhvZHM6IHZhbHVlPy5bUnBjUGVlci5QUk9QRVJUWV9QUk9YWV9PTkVXQVlfTUVUSE9EU10sXG4gICAgICAgICAgICAgICAgX19zZXJpYWxpemVkX3ZhbHVlOiBzZXJpYWxpemVkLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJldHVybiByZXQ7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgX19yZW1vdGVfcHJveHlfaWQgPSAodGhpcy5wcm94eUNvdW50ZXIrKykudG9TdHJpbmcoKTtcbiAgICAgICAgcHJveGllZEVudHJ5ID0ge1xuICAgICAgICAgICAgaWQ6IF9fcmVtb3RlX3Byb3h5X2lkLFxuICAgICAgICAgICAgZmluYWxpemVySWQ6IF9fcmVtb3RlX3Byb3h5X2lkLFxuICAgICAgICB9O1xuICAgICAgICB0aGlzLmxvY2FsUHJveGllZC5zZXQodmFsdWUsIHByb3hpZWRFbnRyeSk7XG4gICAgICAgIHRoaXMubG9jYWxQcm94eU1hcFtfX3JlbW90ZV9wcm94eV9pZF0gPSB2YWx1ZTtcbiAgICAgICAgY29uc3QgcmV0ID0ge1xuICAgICAgICAgICAgX19yZW1vdGVfcHJveHlfaWQsXG4gICAgICAgICAgICBfX3JlbW90ZV9wcm94eV9maW5hbGl6ZXJfaWQ6IF9fcmVtb3RlX3Byb3h5X2lkLFxuICAgICAgICAgICAgX19yZW1vdGVfY29uc3RydWN0b3JfbmFtZSxcbiAgICAgICAgICAgIF9fcmVtb3RlX3Byb3h5X3Byb3BzOiB2YWx1ZT8uW1JwY1BlZXIuUFJPUEVSVFlfUFJPWFlfUFJPUEVSVElFU10sXG4gICAgICAgICAgICBfX3JlbW90ZV9wcm94eV9vbmV3YXlfbWV0aG9kczogdmFsdWU/LltScGNQZWVyLlBST1BFUlRZX1BST1hZX09ORVdBWV9NRVRIT0RTXSxcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIHJldDtcbiAgICB9XG4gICAgbmV3UHJveHkocHJveHlJZCwgcHJveHlDb25zdHJ1Y3Rvck5hbWUsIHByb3h5UHJvcHMsIHByb3h5T25lV2F5TWV0aG9kcykge1xuICAgICAgICBjb25zdCBsb2NhbFByb3hpZWRFbnRyeSA9IHtcbiAgICAgICAgICAgIGlkOiBwcm94eUlkLFxuICAgICAgICAgICAgZmluYWxpemVySWQ6IHVuZGVmaW5lZCxcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgcnBjID0gbmV3IFJwY1Byb3h5KHRoaXMsIGxvY2FsUHJveGllZEVudHJ5LCBwcm94eUNvbnN0cnVjdG9yTmFtZSwgcHJveHlQcm9wcywgcHJveHlPbmVXYXlNZXRob2RzKTtcbiAgICAgICAgY29uc3QgdGFyZ2V0ID0gcHJveHlDb25zdHJ1Y3Rvck5hbWUgPT09ICdGdW5jdGlvbicgfHwgcHJveHlDb25zdHJ1Y3Rvck5hbWUgPT09ICdBc3luY0Z1bmN0aW9uJyA/IGZ1bmN0aW9uICgpIHsgfSA6IHJwYztcbiAgICAgICAgY29uc3QgcHJveHkgPSBuZXcgUHJveHkodGFyZ2V0LCBycGMpO1xuICAgICAgICBjb25zdCB3ZWFrcmVmID0gbmV3IFdlYWtSZWYocHJveHkpO1xuICAgICAgICB0aGlzLnJlbW90ZVdlYWtQcm94aWVzW3Byb3h5SWRdID0gd2Vha3JlZjtcbiAgICAgICAgdGhpcy5maW5hbGl6ZXJzLnJlZ2lzdGVyKHJwYywgbG9jYWxQcm94aWVkRW50cnkpO1xuICAgICAgICByZXR1cm4gcHJveHk7XG4gICAgfVxuICAgIGFzeW5jIGhhbmRsZU1lc3NhZ2UobWVzc2FnZSwgZGVzZXJpYWxpemF0aW9uQ29udGV4dCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgc3dpdGNoIChtZXNzYWdlLnR5cGUpIHtcbiAgICAgICAgICAgICAgICBjYXNlICdwYXJhbSc6IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcnBjUGFyYW0gPSBtZXNzYWdlO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBzZXJpYWxpemF0aW9uQ29udGV4dCA9IHt9O1xuICAgICAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAncmVzdWx0JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBycGNQYXJhbS5pZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdDogdGhpcy5zZXJpYWxpemUodGhpcy5wYXJhbXNbcnBjUGFyYW0ucGFyYW1dLCBzZXJpYWxpemF0aW9uQ29udGV4dClcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZW5kKHJlc3VsdCwgdW5kZWZpbmVkLCBzZXJpYWxpemF0aW9uQ29udGV4dCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXNlICdhcHBseSc6IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcnBjQXBwbHkgPSBtZXNzYWdlO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAncmVzdWx0JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBycGNBcHBseS5pZCB8fCAnJyxcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2VyaWFsaXphdGlvbkNvbnRleHQgPSB7fTtcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRhcmdldCA9IHRoaXMubG9jYWxQcm94eU1hcFtycGNBcHBseS5wcm94eUlkXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdGFyZ2V0KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgcHJveHkgaWQgJHtycGNBcHBseS5wcm94eUlkfSBub3QgZm91bmRgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGFyZ3MgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgYXJnIG9mIChycGNBcHBseS5hcmdzIHx8IFtdKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyZ3MucHVzaCh0aGlzLmRlc2VyaWFsaXplKGFyZywgZGVzZXJpYWxpemF0aW9uQ29udGV4dCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJwY0FwcGx5Lm1ldGhvZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1ldGhvZCA9IHRhcmdldFtycGNBcHBseS5tZXRob2RdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghbWV0aG9kKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYHRhcmdldCAke3RhcmdldD8uY29uc3RydWN0b3I/Lm5hbWV9IGRvZXMgbm90IGhhdmUgbWV0aG9kICR7cnBjQXBwbHkubWV0aG9kfWApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID0gYXdhaXQgdGFyZ2V0W3JwY0FwcGx5Lm1ldGhvZF0oLi4uYXJncyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IGF3YWl0IHRhcmdldCguLi5hcmdzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5yZXN1bHQgPSB0aGlzLnNlcmlhbGl6ZSh2YWx1ZSwgc2VyaWFsaXphdGlvbkNvbnRleHQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmVycm9yKCdmYWlsdXJlJywgcnBjQXBwbHkubWV0aG9kLCBlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY3JlYXRlRXJyb3JSZXN1bHQocmVzdWx0LCBlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoIXJwY0FwcGx5Lm9uZXdheSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VuZChyZXN1bHQsIHVuZGVmaW5lZCwgc2VyaWFsaXphdGlvbkNvbnRleHQpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2FzZSAncmVzdWx0Jzoge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBycGNSZXN1bHQgPSBtZXNzYWdlO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBkZWZlcnJlZCA9IHRoaXMucGVuZGluZ1Jlc3VsdHNbcnBjUmVzdWx0LmlkXTtcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMucGVuZGluZ1Jlc3VsdHNbcnBjUmVzdWx0LmlkXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFkZWZlcnJlZClcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgdW5rbm93biByZXN1bHQgJHtycGNSZXN1bHQuaWR9YCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChycGNSZXN1bHQubWVzc2FnZSB8fCBycGNSZXN1bHQuc3RhY2spIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGUgPSBuZXcgUlBDUmVzdWx0RXJyb3IodGhpcywgcnBjUmVzdWx0Lm1lc3NhZ2UgfHwgJ25vIG1lc3NhZ2UnLCB1bmRlZmluZWQsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBycGNSZXN1bHQucmVzdWx0LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YWNrOiBycGNSZXN1bHQuc3RhY2ssXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlamVjdChlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKHRoaXMuZGVzZXJpYWxpemUocnBjUmVzdWx0LnJlc3VsdCwgZGVzZXJpYWxpemF0aW9uQ29udGV4dCkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2FzZSAnZmluYWxpemUnOiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJwY0ZpbmFsaXplID0gbWVzc2FnZTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbG9jYWwgPSB0aGlzLmxvY2FsUHJveHlNYXBbcnBjRmluYWxpemUuX19sb2NhbF9wcm94eV9pZF07XG4gICAgICAgICAgICAgICAgICAgIGlmIChsb2NhbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbG9jYWxQcm94aWVkRW50cnkgPSB0aGlzLmxvY2FsUHJveGllZC5nZXQobG9jYWwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgYSBmaW5hbGl6ZXIgaWQgaXMgc3BlY2lmaWVkLCBpdCBtdXN0IG1hdGNoLlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJwY0ZpbmFsaXplLl9fbG9jYWxfcHJveHlfZmluYWxpemVyX2lkICYmIHJwY0ZpbmFsaXplLl9fbG9jYWxfcHJveHlfZmluYWxpemVyX2lkICE9PSBsb2NhbFByb3hpZWRFbnRyeT8uZmluYWxpemVySWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLmxvY2FsUHJveHlNYXBbcnBjRmluYWxpemUuX19sb2NhbF9wcm94eV9pZF07XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxvY2FsUHJveGllZC5kZWxldGUobG9jYWwpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYHVua25vd24gcnBjIG1lc3NhZ2UgdHlwZSAke21lc3NhZ2UudHlwZX1gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcigndW5oYW5kbGVkIHJwYyBlcnJvcicsIHRoaXMucGVlck5hbWUsIGUpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIGdldEV2YWxTb3VyY2UoKSB7XG4gICAgcmV0dXJuIGBcbiAgICAoKCkgPT4ge1xuICAgICAgICAke1JwY1Byb3h5fVxuXG4gICAgICAgICR7UnBjUGVlcn1cbiAgICBcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIFJwY1BlZXIsXG4gICAgICAgICAgICBScGNQcm94eSxcbiAgICAgICAgfTtcbiAgICB9KSgpO1xuICAgIGA7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1ycGMuanMubWFwIiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0dmFyIGNhY2hlZE1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF07XG5cdGlmIChjYWNoZWRNb2R1bGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHRpZDogbW9kdWxlSWQsXG5cdFx0bG9hZGVkOiBmYWxzZSxcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXShtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG5cdG1vZHVsZS5sb2FkZWQgPSB0cnVlO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuIiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5nID0gKGZ1bmN0aW9uKCkge1xuXHRpZiAodHlwZW9mIGdsb2JhbFRoaXMgPT09ICdvYmplY3QnKSByZXR1cm4gZ2xvYmFsVGhpcztcblx0dHJ5IHtcblx0XHRyZXR1cm4gdGhpcyB8fCBuZXcgRnVuY3Rpb24oJ3JldHVybiB0aGlzJykoKTtcblx0fSBjYXRjaCAoZSkge1xuXHRcdGlmICh0eXBlb2Ygd2luZG93ID09PSAnb2JqZWN0JykgcmV0dXJuIHdpbmRvdztcblx0fVxufSkoKTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLmhtZCA9IChtb2R1bGUpID0+IHtcblx0bW9kdWxlID0gT2JqZWN0LmNyZWF0ZShtb2R1bGUpO1xuXHRpZiAoIW1vZHVsZS5jaGlsZHJlbikgbW9kdWxlLmNoaWxkcmVuID0gW107XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShtb2R1bGUsICdleHBvcnRzJywge1xuXHRcdGVudW1lcmFibGU6IHRydWUsXG5cdFx0c2V0OiAoKSA9PiB7XG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoJ0VTIE1vZHVsZXMgbWF5IG5vdCBhc3NpZ24gbW9kdWxlLmV4cG9ydHMgb3IgZXhwb3J0cy4qLCBVc2UgRVNNIGV4cG9ydCBzeW50YXgsIGluc3RlYWQ6ICcgKyBtb2R1bGUuaWQpO1xuXHRcdH1cblx0fSk7XG5cdHJldHVybiBtb2R1bGU7XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IChvYmosIHByb3ApID0+IChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKSkiLCJleHBvcnQgY2xhc3MgRGVmZXJyZWQge1xuICAgIGZpbmlzaGVkID0gZmFsc2U7XG4gICAgcmVzb2x2ZTtcbiAgICByZWplY3Q7XG4gICAgcHJvbWlzZSA9IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgdGhpcy5yZXNvbHZlID0gdiA9PiB7XG4gICAgICAgICAgICB0aGlzLmZpbmlzaGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIHJlc29sdmUodik7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMucmVqZWN0ID0gZSA9PiB7XG4gICAgICAgICAgICB0aGlzLmZpbmlzaGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIHJlamVjdChlKTtcbiAgICAgICAgfTtcbiAgICB9KTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRlZmVycmVkLmpzLm1hcCIsImltcG9ydCB7IERlZmVycmVkIH0gZnJvbSBcIi4vZGVmZXJyZWRcIjtcbmZ1bmN0aW9uIGdldFVzZXJBZ2VudCgpIHtcbiAgICB0cnkge1xuICAgICAgICByZXR1cm4gbmF2aWdhdG9yLnVzZXJBZ2VudDtcbiAgICB9XG4gICAgY2F0Y2ggKGUpIHtcbiAgICB9XG59XG4vLyBjb25uZWN0aW9uU3RhdGUgaXMgbm90IGltcGxlbWVudGVkIGluIGZpcmVmb3g/IHNvIHdhdGNoIGljZUNvbm5lY3Rpb25TdGF0ZSBpbnN0ZWFkLi4uXG5leHBvcnQgZnVuY3Rpb24gd2FpdFBlZXJDb25uZWN0aW9uSWNlQ29ubmVjdGVkKHBjKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgaWYgKHBjLmljZUNvbm5lY3Rpb25TdGF0ZSA9PT0gJ2Nvbm5lY3RlZCcpIHtcbiAgICAgICAgICAgIHJlc29sdmUodW5kZWZpbmVkKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBwYy5hZGRFdmVudExpc3RlbmVyKCdpY2Vjb25uZWN0aW9uc3RhdGVjaGFuZ2UnLCAoKSA9PiB7XG4gICAgICAgICAgICBpZiAocGMuaWNlQ29ubmVjdGlvblN0YXRlID09PSAnY29ubmVjdGVkJylcbiAgICAgICAgICAgICAgICByZXNvbHZlKHVuZGVmaW5lZCk7XG4gICAgICAgIH0pO1xuICAgICAgICB3YWl0UGVlckljZUNvbm5lY3Rpb25DbG9zZWQocGMpLnRoZW4ocmVhc29uID0+IHJlamVjdChuZXcgRXJyb3IocmVhc29uKSkpO1xuICAgIH0pO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHdhaXRQZWVySWNlQ29ubmVjdGlvbkNsb3NlZChwYykge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICAgICAgcGMuYWRkRXZlbnRMaXN0ZW5lcignaWNlY29ubmVjdGlvbnN0YXRlY2hhbmdlJywgKCkgPT4ge1xuICAgICAgICAgICAgaWYgKGlzUGVlckNvbm5lY3Rpb25DbG9zZWQocGMpKSB7XG4gICAgICAgICAgICAgICAgcmVzb2x2ZShwYy5pY2VDb25uZWN0aW9uU3RhdGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBpc1BlZXJDb25uZWN0aW9uQ2xvc2VkKHBjKSB7XG4gICAgcmV0dXJuIHBjLmljZUNvbm5lY3Rpb25TdGF0ZSA9PT0gJ2Rpc2Nvbm5lY3RlZCdcbiAgICAgICAgfHwgcGMuaWNlQ29ubmVjdGlvblN0YXRlID09PSAnZmFpbGVkJ1xuICAgICAgICB8fCBwYy5pY2VDb25uZWN0aW9uU3RhdGUgPT09ICdjbG9zZWQnO1xufVxuZXhwb3J0IGNsYXNzIEJyb3dzZXJTaWduYWxpbmdTZXNzaW9uIHtcbiAgICBwYztcbiAgICBwY0RlZmVycmVkID0gbmV3IERlZmVycmVkKCk7XG4gICAgZGNEZWZlcnJlZCA9IG5ldyBEZWZlcnJlZCgpO1xuICAgIG9wdGlvbnMgPSB7XG4gICAgICAgIHVzZXJBZ2VudDogZ2V0VXNlckFnZW50KCksXG4gICAgICAgIGNhcGFiaWxpdGllczoge1xuICAgICAgICAgICAgYXVkaW86IFJUQ1J0cFJlY2VpdmVyLmdldENhcGFiaWxpdGllcz8uKCdhdWRpbycpIHx8IHtcbiAgICAgICAgICAgICAgICBjb2RlY3M6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICBoZWFkZXJFeHRlbnNpb25zOiB1bmRlZmluZWQsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgdmlkZW86IFJUQ1J0cFJlY2VpdmVyLmdldENhcGFiaWxpdGllcz8uKCd2aWRlbycpIHx8IHtcbiAgICAgICAgICAgICAgICBjb2RlY3M6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICBoZWFkZXJFeHRlbnNpb25zOiB1bmRlZmluZWQsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgICBzY3JlZW46IHtcbiAgICAgICAgICAgIHdpZHRoOiBzY3JlZW4ud2lkdGgsXG4gICAgICAgICAgICBoZWlnaHQ6IHNjcmVlbi5oZWlnaHQsXG4gICAgICAgIH0sXG4gICAgfTtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICB9XG4gICAgYXN5bmMgZ2V0T3B0aW9ucygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub3B0aW9ucztcbiAgICB9XG4gICAgY2xvc2UoKSB7XG4gICAgICAgIHRoaXMucGNEZWZlcnJlZC5wcm9taXNlLnRoZW4ocGMgPT4ge1xuICAgICAgICAgICAgZm9yIChjb25zdCB0IG9mIHBjLmdldFRyYW5zY2VpdmVycygpIHx8IFtdKSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgdC5zZW5kZXI/LnRyYWNrPy5zdG9wPy4oKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwYy5jbG9zZSgpO1xuICAgICAgICB9KVxuICAgICAgICAgICAgLmNhdGNoKCgpID0+IHsgfSk7XG4gICAgICAgIHRoaXMucGNEZWZlcnJlZC5yZWplY3QobmV3IEVycm9yKCdpY2VDb25uZWN0aW9uU3RhdGUgJyArIHRoaXMucGM/LmljZUNvbm5lY3Rpb25TdGF0ZSkpO1xuICAgIH1cbiAgICBhc3luYyBjcmVhdGVQZWVyQ29ubmVjdGlvbihzZXR1cCkge1xuICAgICAgICBpZiAodGhpcy5wYylcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgY29uc3QgY2hlY2tDb25uID0gKCkgPT4ge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ2ljZUNvbm5lY3Rpb25TdGF0ZScsIHBjLmljZUNvbm5lY3Rpb25TdGF0ZSk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnY29ubmVjdGlvblN0YXRlJywgcGMuY29ubmVjdGlvblN0YXRlKTtcbiAgICAgICAgICAgIGlmIChpc1BlZXJDb25uZWN0aW9uQ2xvc2VkKHBjKSlcbiAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHBjID0gdGhpcy5wYyA9IG5ldyBSVENQZWVyQ29ubmVjdGlvbihzZXR1cC5jb25maWd1cmF0aW9uKTtcbiAgICAgICAgdGhpcy5wY0RlZmVycmVkLnJlc29sdmUocGMpO1xuICAgICAgICBwYy5hZGRFdmVudExpc3RlbmVyKCdjb25uZWN0aW9uc3RhdGVjaGFuZ2UnLCBjaGVja0Nvbm4pO1xuICAgICAgICBwYy5hZGRFdmVudExpc3RlbmVyKCdpY2Vjb25uZWN0aW9uc3RhdGVjaGFuZ2UnLCBjaGVja0Nvbm4pO1xuICAgICAgICBwYy5hZGRFdmVudExpc3RlbmVyKCdpY2VnYXRoZXJpbmdzdGF0ZWNoYW5nZScsIGV2ID0+IGNvbnNvbGUubG9nKCdpY2VHYXRoZXJpbmdTdGF0ZScsIHBjLmljZUdhdGhlcmluZ1N0YXRlKSk7XG4gICAgICAgIHBjLmFkZEV2ZW50TGlzdGVuZXIoJ3NpZ25hbGluZ3N0YXRlY2hhbmdlJywgZXYgPT4gY29uc29sZS5sb2coJ3NpZ25hbGluZ1N0YXRlJywgcGMuc2lnbmFsaW5nU3RhdGUpKTtcbiAgICAgICAgcGMuYWRkRXZlbnRMaXN0ZW5lcignaWNlY2FuZGlkYXRlZXJyb3InLCBldiA9PiBjb25zb2xlLmxvZygnaWNlY2FuZGlkYXRlZXJyb3InKSk7XG4gICAgICAgIGlmIChzZXR1cC5kYXRhY2hhbm5lbCkge1xuICAgICAgICAgICAgY29uc3QgZGMgPSBwYy5jcmVhdGVEYXRhQ2hhbm5lbChzZXR1cC5kYXRhY2hhbm5lbC5sYWJlbCwgc2V0dXAuZGF0YWNoYW5uZWwuZGljdCk7XG4gICAgICAgICAgICBkYy5iaW5hcnlUeXBlID0gJ2FycmF5YnVmZmVyJztcbiAgICAgICAgICAgIHRoaXMuZGNEZWZlcnJlZC5yZXNvbHZlKGRjKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc2V0dXAuYXVkaW8pIHtcbiAgICAgICAgICAgIGlmIChzZXR1cC5hdWRpby5kaXJlY3Rpb24gPT09ICdzZW5kcmVjdicgfHwgc2V0dXAuYXVkaW8uZGlyZWN0aW9uID09PSAnc2VuZG9ubHknKSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgLy8gZG9pbmcgc2VuZHJlY3Ygb24gc2FmYXJpIHJlcXVpcmVzIGEgbWljIGJlIGF0dGFjaGVkLCBvciBpdCBmYWlscyB0byBjb25uZWN0LlxuICAgICAgICAgICAgICAgICAgICBjb25zdCBtaWMgPSBhd2FpdCBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYSh7IHZpZGVvOiBmYWxzZSwgYXVkaW86IHRydWUgfSk7XG4gICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgdHJhY2sgb2YgbWljLmdldFRyYWNrcygpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYy5hZGRUcmFjayh0cmFjayk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHNpbGVuY2UgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgY3R4ID0gbmV3IEF1ZGlvQ29udGV4dCgpLCBvc2NpbGxhdG9yID0gY3R4LmNyZWF0ZU9zY2lsbGF0b3IoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGRlc3QgPSBjdHguY3JlYXRlTWVkaWFTdHJlYW1EZXN0aW5hdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgb3NjaWxsYXRvci5jb25uZWN0KGRlc3QpO1xuICAgICAgICAgICAgICAgICAgICAgICAgb3NjaWxsYXRvci5zdGFydCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oZGVzdC5zdHJlYW0uZ2V0QXVkaW9UcmFja3MoKVswXSwgeyBlbmFibGVkOiBmYWxzZSB9KTtcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgcGMuYWRkVHJhY2soc2lsZW5jZSgpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBwYy5hZGRUcmFuc2NlaXZlcignYXVkaW8nLCBzZXR1cC5hdWRpbyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNldHVwLnZpZGVvKSB7XG4gICAgICAgICAgICBpZiAoc2V0dXAudmlkZW8uZGlyZWN0aW9uID09PSAnc2VuZHJlY3YnIHx8IHNldHVwLnZpZGVvLmRpcmVjdGlvbiA9PT0gJ3NlbmRvbmx5Jykge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGRvaW5nIHNlbmRyZWN2IG9uIHNhZmFyaSByZXF1aXJlcyBhIG1pYyBiZSBhdHRhY2hlZCwgb3IgaXQgZmFpbHMgdG8gY29ubmVjdC5cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY2FtZXJhID0gYXdhaXQgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEoeyB2aWRlbzogdHJ1ZSB9KTtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCB0cmFjayBvZiBjYW1lcmEuZ2V0VHJhY2tzKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBjLmFkZFRyYWNrKHRyYWNrKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICAvLyB3aGF0IG5vd1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHBjLmFkZFRyYW5zY2VpdmVyKCd2aWRlbycsIHNldHVwLnZpZGVvKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBjcmVhdGVMb2NhbERlc2NyaXB0aW9uKHR5cGUsIHNldHVwLCBzZW5kSWNlQ2FuZGlkYXRlKSB7XG4gICAgICAgIGF3YWl0IHRoaXMuY3JlYXRlUGVlckNvbm5lY3Rpb24oc2V0dXApO1xuICAgICAgICBjb25zdCBnYXRoZXJpbmdQcm9taXNlID0gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgICAgICAgICB0aGlzLnBjLm9uaWNlY2FuZGlkYXRlID0gZXYgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChldi5jYW5kaWRhdGUpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJsb2NhbCBjYW5kaWRhdGVcIiwgZXYuY2FuZGlkYXRlKTtcbiAgICAgICAgICAgICAgICAgICAgc2VuZEljZUNhbmRpZGF0ZT8uKEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoZXYuY2FuZGlkYXRlKSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSh1bmRlZmluZWQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLnBjLm9uaWNlZ2F0aGVyaW5nc3RhdGVjaGFuZ2UgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucGMuaWNlR2F0aGVyaW5nU3RhdGUgPT09ICdjb21wbGV0ZScpXG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUodW5kZWZpbmVkKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCB0b0Rlc2NyaXB0aW9uID0gKGluaXQpID0+IHtcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdsb2NhbCBkZXNjcmlwdGlvbicsIGluaXQuc2RwKTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgdHlwZTogaW5pdC50eXBlLFxuICAgICAgICAgICAgICAgIHNkcDogaW5pdC5zZHAsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9O1xuICAgICAgICBpZiAodHlwZSA9PT0gJ29mZmVyJykge1xuICAgICAgICAgICAgbGV0IG9mZmVyID0gYXdhaXQgdGhpcy5wYy5jcmVhdGVPZmZlcih7XG4gICAgICAgICAgICAgICAgb2ZmZXJUb1JlY2VpdmVBdWRpbzogISFzZXR1cC5hdWRpbyxcbiAgICAgICAgICAgICAgICBvZmZlclRvUmVjZWl2ZVZpZGVvOiAhIXNldHVwLnZpZGVvLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjb25zdCBzZXQgPSB0aGlzLnBjLnNldExvY2FsRGVzY3JpcHRpb24ob2ZmZXIpO1xuICAgICAgICAgICAgaWYgKHNlbmRJY2VDYW5kaWRhdGUpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRvRGVzY3JpcHRpb24ob2ZmZXIpO1xuICAgICAgICAgICAgYXdhaXQgc2V0O1xuICAgICAgICAgICAgYXdhaXQgZ2F0aGVyaW5nUHJvbWlzZTtcbiAgICAgICAgICAgIG9mZmVyID0gYXdhaXQgdGhpcy5wYy5jcmVhdGVPZmZlcih7XG4gICAgICAgICAgICAgICAgb2ZmZXJUb1JlY2VpdmVBdWRpbzogISFzZXR1cC5hdWRpbyxcbiAgICAgICAgICAgICAgICBvZmZlclRvUmVjZWl2ZVZpZGVvOiAhIXNldHVwLnZpZGVvLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gdG9EZXNjcmlwdGlvbihvZmZlcik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBsZXQgYW5zd2VyID0gYXdhaXQgdGhpcy5wYy5jcmVhdGVBbnN3ZXIoKTtcbiAgICAgICAgICAgIGNvbnN0IHNldCA9IHRoaXMucGMuc2V0TG9jYWxEZXNjcmlwdGlvbihhbnN3ZXIpO1xuICAgICAgICAgICAgaWYgKHNlbmRJY2VDYW5kaWRhdGUpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRvRGVzY3JpcHRpb24oYW5zd2VyKTtcbiAgICAgICAgICAgIGF3YWl0IHNldDtcbiAgICAgICAgICAgIGF3YWl0IGdhdGhlcmluZ1Byb21pc2U7XG4gICAgICAgICAgICBhbnN3ZXIgPSB0aGlzLnBjLmN1cnJlbnRMb2NhbERlc2NyaXB0aW9uIHx8IGFuc3dlcjtcbiAgICAgICAgICAgIHJldHVybiB0b0Rlc2NyaXB0aW9uKGFuc3dlcik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgc2V0UmVtb3RlRGVzY3JpcHRpb24oZGVzY3JpcHRpb24sIHNldHVwKSB7XG4gICAgICAgIGF3YWl0IHRoaXMuY3JlYXRlUGVlckNvbm5lY3Rpb24oc2V0dXApO1xuICAgICAgICBhd2FpdCB0aGlzLnBjLnNldFJlbW90ZURlc2NyaXB0aW9uKGRlc2NyaXB0aW9uKTtcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ3JlbW90ZSBkZXNjcmlwdGlvbicsIGRlc2NyaXB0aW9uLnNkcCk7XG4gICAgfVxuICAgIGFzeW5jIGFkZEljZUNhbmRpZGF0ZShjYW5kaWRhdGUpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5wYy5hZGRJY2VDYW5kaWRhdGUoY2FuZGlkYXRlKTtcbiAgICAgICAgLy8gY29uc29sZS5sb2coXCJyZW1vdGUgY2FuZGlkYXRlXCIsIGNhbmRpZGF0ZSk7XG4gICAgfVxuICAgIGFzeW5jIGVuZFNlc3Npb24oKSB7XG4gICAgfVxufVxuZnVuY3Rpb24gbG9nU2VuZENhbmRpZGF0ZShjb25zb2xlLCB0eXBlLCBzZXNzaW9uKSB7XG4gICAgcmV0dXJuIGFzeW5jIChjYW5kaWRhdGUpID0+IHtcbiAgICAgICAgLy8gY29uc29sZS5sb2coYCR7dHlwZX0gdHJpY2tsZWQgY2FuZGlkYXRlOmAsIGNhbmRpZGF0ZS5zZHBNTGluZUluZGV4LCBjYW5kaWRhdGUuY2FuZGlkYXRlKTtcbiAgICAgICAgcmV0dXJuIHNlc3Npb24uYWRkSWNlQ2FuZGlkYXRlKGNhbmRpZGF0ZSk7XG4gICAgfTtcbn1cbmZ1bmN0aW9uIGNyZWF0ZUNhbmRpZGF0ZVF1ZXVlKGNvbnNvbGUsIHR5cGUsIHNlc3Npb24pIHtcbiAgICBsZXQgcmVhZHkgPSBmYWxzZTtcbiAgICBsZXQgY2FuZGlkYXRlUXVldWUgPSBbXTtcbiAgICBjb25zdCBscyA9IGxvZ1NlbmRDYW5kaWRhdGUoY29uc29sZSwgdHlwZSwgc2Vzc2lvbik7XG4gICAgY29uc3QgcXVldWVTZW5kQ2FuZGlkYXRlID0gYXN5bmMgKGNhbmRpZGF0ZSkgPT4ge1xuICAgICAgICBpZiAoIXJlYWR5KVxuICAgICAgICAgICAgY2FuZGlkYXRlUXVldWUucHVzaChjYW5kaWRhdGUpO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgICBscyhjYW5kaWRhdGUpO1xuICAgIH07XG4gICAgcmV0dXJuIHtcbiAgICAgICAgZmx1c2goKSB7XG4gICAgICAgICAgICByZWFkeSA9IHRydWU7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGNhbmRpZGF0ZSBvZiBjYW5kaWRhdGVRdWV1ZSkge1xuICAgICAgICAgICAgICAgIGxzKGNhbmRpZGF0ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYW5kaWRhdGVRdWV1ZSA9IFtdO1xuICAgICAgICB9LFxuICAgICAgICBxdWV1ZVNlbmRDYW5kaWRhdGUsXG4gICAgfTtcbn1cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjb25uZWN0UlRDU2lnbmFsaW5nQ2xpZW50cyhjb25zb2xlLCBvZmZlckNsaWVudCwgb2ZmZXJTZXR1cCwgYW5zd2VyQ2xpZW50LCBhbnN3ZXJTZXR1cCkge1xuICAgIGNvbnN0IG9mZmVyT3B0aW9ucyA9IGF3YWl0IG9mZmVyQ2xpZW50LmdldE9wdGlvbnMoKTtcbiAgICBjb25zdCBhbnN3ZXJPcHRpb25zID0gYXdhaXQgYW5zd2VyQ2xpZW50LmdldE9wdGlvbnMoKTtcbiAgICBjb25zdCBkaXNhYmxlVHJpY2tsZSA9IG9mZmVyT3B0aW9ucz8uZGlzYWJsZVRyaWNrbGUgfHwgYW5zd2VyT3B0aW9ucz8uZGlzYWJsZVRyaWNrbGU7XG4gICAgaWYgKG9mZmVyT3B0aW9ucz8ub2ZmZXIgJiYgYW5zd2VyT3B0aW9ucz8ub2ZmZXIpXG4gICAgICAgIHRocm93IG5ldyBFcnJvcignQm90aCBSVEMgY2xpZW50cyBoYXZlIG9mZmVycyBhbmQgY2FuIG5vdCBuZWdvdGlhdGUuIENvbnNpZGVyIGltcGxlbWVudGluZyB0aGlzIGluIEBzY3J5cHRlZC93ZWJydGMuJyk7XG4gICAgaWYgKG9mZmVyT3B0aW9ucz8ucmVxdWlyZXNPZmZlciAmJiBhbnN3ZXJPcHRpb25zLnJlcXVpcmVzT2ZmZXIpXG4gICAgICAgIHRocm93IG5ldyBFcnJvcignQm90aCBSVEMgY2xpZW50cyByZXF1aXJlIG9mZmVycyBhbmQgY2FuIG5vdCBuZWdvdGlhdGUuJyk7XG4gICAgb2ZmZXJTZXR1cC50eXBlID0gJ29mZmVyJztcbiAgICBhbnN3ZXJTZXR1cC50eXBlID0gJ2Fuc3dlcic7XG4gICAgY29uc3QgYW5zd2VyUXVldWUgPSBjcmVhdGVDYW5kaWRhdGVRdWV1ZShjb25zb2xlLCAnb2ZmZXInLCBhbnN3ZXJDbGllbnQpO1xuICAgIGNvbnN0IG9mZmVyUXVldWUgPSBjcmVhdGVDYW5kaWRhdGVRdWV1ZShjb25zb2xlLCAnYW5zd2VyJywgb2ZmZXJDbGllbnQpO1xuICAgIGNvbnN0IG9mZmVyID0gYXdhaXQgb2ZmZXJDbGllbnQuY3JlYXRlTG9jYWxEZXNjcmlwdGlvbignb2ZmZXInLCBvZmZlclNldHVwLCBkaXNhYmxlVHJpY2tsZSA/IHVuZGVmaW5lZCA6IGFuc3dlclF1ZXVlLnF1ZXVlU2VuZENhbmRpZGF0ZSk7XG4gICAgLy8gY29uc29sZS5sb2coJ29mZmVyIHNkcCcsIG9mZmVyLnNkcCk7XG4gICAgYXdhaXQgYW5zd2VyQ2xpZW50LnNldFJlbW90ZURlc2NyaXB0aW9uKG9mZmVyLCBhbnN3ZXJTZXR1cCk7XG4gICAgYW5zd2VyUXVldWUuZmx1c2goKTtcbiAgICBjb25zdCBhbnN3ZXIgPSBhd2FpdCBhbnN3ZXJDbGllbnQuY3JlYXRlTG9jYWxEZXNjcmlwdGlvbignYW5zd2VyJywgYW5zd2VyU2V0dXAsIGRpc2FibGVUcmlja2xlID8gdW5kZWZpbmVkIDogb2ZmZXJRdWV1ZS5xdWV1ZVNlbmRDYW5kaWRhdGUpO1xuICAgIC8vIGNvbnNvbGUubG9nKCdhbnN3ZXIgc2RwJywgYW5zd2VyLnNkcCk7XG4gICAgYXdhaXQgb2ZmZXJDbGllbnQuc2V0UmVtb3RlRGVzY3JpcHRpb24oYW5zd2VyLCBvZmZlclNldHVwKTtcbiAgICBvZmZlclF1ZXVlLmZsdXNoKCk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1ydGMtc2lnbmFsaW5nLmpzLm1hcCIsImltcG9ydCB7IFJwY1BlZXIgfSBmcm9tICcuLi8uLi8uLi8uLi8uLi9zZXJ2ZXIvc3JjL3JwYyc7XG5pbXBvcnQgeyBCcm93c2VyU2lnbmFsaW5nU2Vzc2lvbiB9IGZyb20gJy4uLy4uLy4uLy4uLy4uL2NvbW1vbi9zcmMvcnRjLXNpZ25hbGluZyc7XG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICBjb25zdCBvcHRpb25zID0gbmV3IGNhc3QuZnJhbWV3b3JrLkNhc3RSZWNlaXZlck9wdGlvbnMoKTtcbiAgICBvcHRpb25zLmRpc2FibGVJZGxlVGltZW91dCA9IHRydWU7XG4gICAgY2FzdC5mcmFtZXdvcmsuQ2FzdFJlY2VpdmVyQ29udGV4dC5nZXRJbnN0YW5jZSgpLnN0YXJ0KG9wdGlvbnMpO1xuICAgIGNvbnN0IGNvbnRleHQgPSBjYXN0LmZyYW1ld29yay5DYXN0UmVjZWl2ZXJDb250ZXh0LmdldEluc3RhbmNlKCk7XG4gICAgY29uc3QgcGxheWVyTWFuYWdlciA9IGNvbnRleHQuZ2V0UGxheWVyTWFuYWdlcigpO1xuICAgIGNvbnN0IHZpZGVvID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21lZGlhJyk7XG4gICAgLy8gaW50ZXJjZXB0IHRoZSBMT0FEIHJlcXVlc3QgdG8gYmUgYWJsZSB0byByZWFkIGluIGEgY29udGVudElkIGFuZCBnZXQgZGF0YVxuICAgIGNvbnN0IGludGVyY2VwdG9yID0gKGxvYWRSZXF1ZXN0RGF0YSkgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhsb2FkUmVxdWVzdERhdGEpO1xuICAgICAgICBjb25zdCBlaW9VcmwgPSBsb2FkUmVxdWVzdERhdGEubWVkaWEuZW50aXR5IHx8IGxvYWRSZXF1ZXN0RGF0YS5tZWRpYS5jb250ZW50SWQ7XG4gICAgICAgIGNvbnN0IHRva2VuID0gbG9hZFJlcXVlc3REYXRhLmNyZWRlbnRpYWxzID8/IGxvYWRSZXF1ZXN0RGF0YS5tZWRpYS5jdXN0b21EYXRhLnRva2VuO1xuICAgICAgICBjb25zdCB1cmwgPSBuZXcgVVJMKGVpb1VybCk7XG4gICAgICAgIGNvbnN0IGVuZHBvaW50UGF0aCA9IHVybC5wYXRobmFtZTtcbiAgICAgICAgY29uc3QgcXVlcnkgPSB7fTtcbiAgICAgICAgZm9yIChjb25zdCBbaywgdl0gb2YgbmV3IFVSTFNlYXJjaFBhcmFtcyh1cmwuc2VhcmNoKSkge1xuICAgICAgICAgICAgcXVlcnlba10gPSB2O1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG9wdGlvbnMgPSB7XG4gICAgICAgICAgICBwYXRoOiBlbmRwb2ludFBhdGgsXG4gICAgICAgICAgICBxdWVyeSxcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3Qgc29ja2V0ID0gZWlvKGB3c3M6Ly8ke3VybC5ob3N0fWAsIG9wdGlvbnMpO1xuICAgICAgICBzb2NrZXQub24oJ29wZW4nLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBzb2NrZXQuc2VuZChKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICAgICAgdG9rZW4sXG4gICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICBjb25zdCBycGNQZWVyID0gbmV3IFJwY1BlZXIoJ2Nhc3QtcmVjZWl2ZXInLCAnaG9zdCcsIChtZXNzYWdlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBzb2NrZXQuc2VuZChKU09OLnN0cmluZ2lmeShtZXNzYWdlKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlamVjdD8uKGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgc29ja2V0Lm9uKCdtZXNzYWdlJywgKGRhdGEpID0+IHtcbiAgICAgICAgICAgICAgICBycGNQZWVyLmhhbmRsZU1lc3NhZ2UoSlNPTi5wYXJzZShkYXRhKSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNvbnN0IGNsZWFudXAgPSAoKSA9PiB3aW5kb3cuY2xvc2UoKTtcbiAgICAgICAgICAgIGNvbnN0IHNlc3Npb24gPSBuZXcgQnJvd3NlclNpZ25hbGluZ1Nlc3Npb24oKTtcbiAgICAgICAgICAgIHNlc3Npb24ucGNEZWZlcnJlZC5wcm9taXNlLnRoZW4ocGMgPT4ge1xuICAgICAgICAgICAgICAgIHBjLmFkZEV2ZW50TGlzdGVuZXIoJ2Nvbm5lY3Rpb25zdGF0ZWNoYW5nZScsICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBjLmljZUNvbm5lY3Rpb25TdGF0ZSA9PT0gJ2Rpc2Nvbm5lY3RlZCdcbiAgICAgICAgICAgICAgICAgICAgICAgIHx8IHBjLmljZUNvbm5lY3Rpb25TdGF0ZSA9PT0gJ2ZhaWxlZCdcbiAgICAgICAgICAgICAgICAgICAgICAgIHx8IHBjLmljZUNvbm5lY3Rpb25TdGF0ZSA9PT0gJ2Nsb3NlZCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFudXAoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHBjLmFkZEV2ZW50TGlzdGVuZXIoJ2ljZWNvbm5lY3Rpb25zdGF0ZWNoYW5nZScsICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2ljZUNvbm5lY3Rpb25TdGF0ZUNoYW5nZScsIHBjLmNvbm5lY3Rpb25TdGF0ZSwgcGMuaWNlQ29ubmVjdGlvblN0YXRlKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBjLmljZUNvbm5lY3Rpb25TdGF0ZSA9PT0gJ2Rpc2Nvbm5lY3RlZCdcbiAgICAgICAgICAgICAgICAgICAgICAgIHx8IHBjLmljZUNvbm5lY3Rpb25TdGF0ZSA9PT0gJ2ZhaWxlZCdcbiAgICAgICAgICAgICAgICAgICAgICAgIHx8IHBjLmljZUNvbm5lY3Rpb25TdGF0ZSA9PT0gJ2Nsb3NlZCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFudXAoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGNvbnN0IG1lZGlhU3RyZWFtID0gbmV3IE1lZGlhU3RyZWFtKHBjLmdldFJlY2VpdmVycygpLm1hcCgocmVjZWl2ZXIpID0+IHJlY2VpdmVyLnRyYWNrKSk7XG4gICAgICAgICAgICAgICAgcGMub250cmFjayA9IGUgPT4gbWVkaWFTdHJlYW0uYWRkVHJhY2soZS50cmFjayk7XG4gICAgICAgICAgICAgICAgdmlkZW8uc3JjT2JqZWN0ID0gbWVkaWFTdHJlYW07XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJwY1BlZXIucGFyYW1zWydzZXNzaW9uJ10gPSBzZXNzaW9uO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfTtcbiAgICBwbGF5ZXJNYW5hZ2VyLnNldE1lc3NhZ2VJbnRlcmNlcHRvcihjYXN0LmZyYW1ld29yay5tZXNzYWdlcy5NZXNzYWdlVHlwZS5MT0FELCBpbnRlcmNlcHRvcik7XG59KTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNhc3QuanMubWFwIl0sIm5hbWVzIjpbInN0YXJ0UGVyaW9kaWNHYXJiYWdlQ29sbGVjdGlvbiIsImciLCJnYyIsInNldEludGVydmFsIiwiZSIsImNvbnNvbGUiLCJ3YXJuIiwiUnBjUHJveHkiLCJwZWVyIiwiZW50cnkiLCJjb25zdHJ1Y3Rvck5hbWUiLCJwcm94eVByb3BzIiwicHJveHlPbmVXYXlNZXRob2RzIiwiY29uc3RydWN0b3IiLCJ0aGlzIiwidG9QcmltaXRpdmUiLCJzZWxmTmFtZSIsInBlZXJOYW1lIiwiZ2V0IiwidGFyZ2V0IiwicCIsInJlY2VpdmVyIiwiaWQiLCJScGNQZWVyIiwiUFJPUEVSVFlfUFJPWFlfUFJPUEVSVElFUyIsIlBST1BFUlRZX1BST1hZX09ORVdBWV9NRVRIT0RTIiwiUFJPUEVSVFlfSlNPTl9ESVNBQkxFX1NFUklBTElaQVRJT04iLCJQUk9QRVJUWV9KU09OX0NPUFlfU0VSSUFMSVpFX0NISUxEUkVOIiwidW5kZWZpbmVkIiwiaGFuZGxlRnVuY3Rpb25JbnZvY2F0aW9ucyIsIlByb3h5Iiwic2V0IiwidmFsdWUiLCJmaW5hbGl6ZXJJZFN5bWJvbCIsImZpbmFsaXplcklkIiwiYXBwbHkiLCJ0aGlzQXJnIiwiYXJnQXJyYXkiLCJPYmplY3QiLCJpc0Zyb3plbiIsInBlbmRpbmdSZXN1bHRzIiwiUHJvbWlzZSIsInJlamVjdCIsIlJQQ1Jlc3VsdEVycm9yIiwibWV0aG9kIiwiYXJncyIsInNlcmlhbGl6YXRpb25Db250ZXh0IiwiYXJnIiwicHVzaCIsInNlcmlhbGl6ZSIsInJwY0FwcGx5IiwidHlwZSIsInByb3h5SWQiLCJpbmNsdWRlcyIsIm9uZXdheSIsInNlbmQiLCJyZXNvbHZlIiwiY3JlYXRlUGVuZGluZ1Jlc3VsdCIsIkVycm9yIiwiY2F1c2UiLCJtZXNzYWdlIiwib3B0aW9ucyIsInN1cGVyIiwibmFtZSIsInN0YWNrIiwiY29tcGlsZUZ1bmN0aW9uIiwiY29kZSIsInBhcmFtcyIsImYiLCJqb2luIiwiZXZhbCIsImZyIiwiRmluYWxpemF0aW9uUmVnaXN0cnkiLCJ3aW5kb3ciLCJXZWFrUmVmIiwiZGVyZWYiLCJyZWdpc3RlciIsImlkQ291bnRlciIsInByb3h5Q291bnRlciIsImxvY2FsUHJveGllZCIsIk1hcCIsImxvY2FsUHJveHlNYXAiLCJyZW1vdGVXZWFrUHJveGllcyIsImZpbmFsaXplcnMiLCJmaW5hbGl6ZSIsIm5hbWVEZXNlcmlhbGl6ZXJNYXAiLCJjb25zdHJ1Y3RvclNlcmlhbGl6ZXJNYXAiLCJ0cmFuc3BvcnRTYWZlQXJndW1lbnRUeXBlcyIsImdldERlZmF1bHRUcmFuc3BvcnRTYWZlQXJndW1lbnRUeXBlcyIsInN0YXRpYyIsIlN5bWJvbCIsImpzb25TZXJpYWxpemFibGUiLCJTZXQiLCJhZGQiLCJOdW1iZXIiLCJTdHJpbmciLCJCb29sZWFuIiwiQXJyYXkiLCJ0aGl6IiwiY2IiLCJwcm9taXNlIiwidG9TdHJpbmciLCJjYXRjaCIsImtpbGwiLCJlcnJvciIsInJlc3VsdCIsInZhbHVlcyIsImZyZWV6ZSIsImNsZWFyIiwiYWRkU2VyaWFsaXplciIsImN0ciIsInNlcmlhbGl6ZXIiLCJycGNGaW5hbGl6ZSIsIl9fbG9jYWxfcHJveHlfaWQiLCJfX2xvY2FsX3Byb3h5X2ZpbmFsaXplcl9pZCIsImFzeW5jIiwicGFyYW0iLCJwYXJhbU1lc3NhZ2UiLCJldmFsTG9jYWwiLCJzY3JpcHQiLCJmaWxlbmFtZSIsImNvZXJjZWRQYXJhbXMiLCJhc3NpZ24iLCJjb21waWxlIiwibW9kdWxlIiwia2V5cyIsImNyZWF0ZUVycm9yUmVzdWx0IiwiZGVzZXJpYWxpemUiLCJkZXNlcmlhbGl6YXRpb25Db250ZXh0IiwicmV0Iiwia2V5IiwidmFsIiwiZW50cmllcyIsIl9fcmVtb3RlX3Byb3h5X2lkIiwiX19yZW1vdGVfcHJveHlfZmluYWxpemVyX2lkIiwiX19yZW1vdGVfY29uc3RydWN0b3JfbmFtZSIsIl9fc2VyaWFsaXplZF92YWx1ZSIsIl9fcmVtb3RlX3Byb3h5X3Byb3BzIiwiX19yZW1vdGVfcHJveHlfb25ld2F5X21ldGhvZHMiLCJwcm94eSIsIm5ld1Byb3h5IiwiZGVzZXJpYWxpemVyIiwiaGFzIiwiX19wcm94eV9jb25zdHJ1Y3RvciIsInByb3hpZWRFbnRyeSIsIl9fcHJveHlfaWQiLCJfX3Byb3h5X3BlZXIiLCJzZXJpYWxpemVyTWFwTmFtZSIsInNlcmlhbGl6ZWQiLCJwcm94eUNvbnN0cnVjdG9yTmFtZSIsImxvY2FsUHJveGllZEVudHJ5IiwicnBjIiwid2Vha3JlZiIsInJwY1BhcmFtIiwicnBjUmVzdWx0IiwiZGVmZXJyZWQiLCJsb2NhbCIsImRlbGV0ZSIsImdldEV2YWxTb3VyY2UiLCJfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18iLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJjYWNoZWRNb2R1bGUiLCJleHBvcnRzIiwibG9hZGVkIiwiX193ZWJwYWNrX21vZHVsZXNfXyIsImQiLCJkZWZpbml0aW9uIiwibyIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdsb2JhbFRoaXMiLCJGdW5jdGlvbiIsImhtZCIsImNyZWF0ZSIsImNoaWxkcmVuIiwib2JqIiwicHJvcCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsIkRlZmVycmVkIiwiZmluaXNoZWQiLCJ2IiwiZ2V0VXNlckFnZW50IiwibmF2aWdhdG9yIiwidXNlckFnZW50IiwiQnJvd3NlclNpZ25hbGluZ1Nlc3Npb24iLCJwYyIsInBjRGVmZXJyZWQiLCJkY0RlZmVycmVkIiwiY2FwYWJpbGl0aWVzIiwiYXVkaW8iLCJSVENSdHBSZWNlaXZlciIsImdldENhcGFiaWxpdGllcyIsImNvZGVjcyIsImhlYWRlckV4dGVuc2lvbnMiLCJ2aWRlbyIsInNjcmVlbiIsIndpZHRoIiwiaGVpZ2h0IiwiY2xvc2UiLCJ0aGVuIiwidCIsImdldFRyYW5zY2VpdmVycyIsInNlbmRlciIsInRyYWNrIiwic3RvcCIsImljZUNvbm5lY3Rpb25TdGF0ZSIsInNldHVwIiwiY2hlY2tDb25uIiwibG9nIiwiY29ubmVjdGlvblN0YXRlIiwiaXNQZWVyQ29ubmVjdGlvbkNsb3NlZCIsIlJUQ1BlZXJDb25uZWN0aW9uIiwiY29uZmlndXJhdGlvbiIsImFkZEV2ZW50TGlzdGVuZXIiLCJldiIsImljZUdhdGhlcmluZ1N0YXRlIiwic2lnbmFsaW5nU3RhdGUiLCJkYXRhY2hhbm5lbCIsImRjIiwiY3JlYXRlRGF0YUNoYW5uZWwiLCJsYWJlbCIsImRpY3QiLCJiaW5hcnlUeXBlIiwiZGlyZWN0aW9uIiwibWljIiwibWVkaWFEZXZpY2VzIiwiZ2V0VXNlck1lZGlhIiwiZ2V0VHJhY2tzIiwiYWRkVHJhY2siLCJzaWxlbmNlIiwiY3R4IiwiQXVkaW9Db250ZXh0Iiwib3NjaWxsYXRvciIsImNyZWF0ZU9zY2lsbGF0b3IiLCJkZXN0IiwiY3JlYXRlTWVkaWFTdHJlYW1EZXN0aW5hdGlvbiIsImNvbm5lY3QiLCJzdGFydCIsInN0cmVhbSIsImdldEF1ZGlvVHJhY2tzIiwiZW5hYmxlZCIsImFkZFRyYW5zY2VpdmVyIiwiY2FtZXJhIiwic2VuZEljZUNhbmRpZGF0ZSIsImNyZWF0ZVBlZXJDb25uZWN0aW9uIiwiZ2F0aGVyaW5nUHJvbWlzZSIsIm9uaWNlY2FuZGlkYXRlIiwiY2FuZGlkYXRlIiwiSlNPTiIsInBhcnNlIiwic3RyaW5naWZ5Iiwib25pY2VnYXRoZXJpbmdzdGF0ZWNoYW5nZSIsInRvRGVzY3JpcHRpb24iLCJpbml0Iiwic2RwIiwib2ZmZXIiLCJjcmVhdGVPZmZlciIsIm9mZmVyVG9SZWNlaXZlQXVkaW8iLCJvZmZlclRvUmVjZWl2ZVZpZGVvIiwic2V0TG9jYWxEZXNjcmlwdGlvbiIsImFuc3dlciIsImNyZWF0ZUFuc3dlciIsImN1cnJlbnRMb2NhbERlc2NyaXB0aW9uIiwiZGVzY3JpcHRpb24iLCJzZXRSZW1vdGVEZXNjcmlwdGlvbiIsImFkZEljZUNhbmRpZGF0ZSIsImRvY3VtZW50IiwiZXZlbnQiLCJjYXN0IiwiZnJhbWV3b3JrIiwiQ2FzdFJlY2VpdmVyT3B0aW9ucyIsImRpc2FibGVJZGxlVGltZW91dCIsIkNhc3RSZWNlaXZlckNvbnRleHQiLCJnZXRJbnN0YW5jZSIsInBsYXllck1hbmFnZXIiLCJnZXRQbGF5ZXJNYW5hZ2VyIiwiZ2V0RWxlbWVudEJ5SWQiLCJzZXRNZXNzYWdlSW50ZXJjZXB0b3IiLCJtZXNzYWdlcyIsIk1lc3NhZ2VUeXBlIiwiTE9BRCIsImxvYWRSZXF1ZXN0RGF0YSIsImVpb1VybCIsIm1lZGlhIiwiZW50aXR5IiwiY29udGVudElkIiwidG9rZW4iLCJjcmVkZW50aWFscyIsImN1c3RvbURhdGEiLCJ1cmwiLCJVUkwiLCJlbmRwb2ludFBhdGgiLCJwYXRobmFtZSIsInF1ZXJ5IiwiayIsIlVSTFNlYXJjaFBhcmFtcyIsInNlYXJjaCIsInBhdGgiLCJzb2NrZXQiLCJlaW8iLCJob3N0Iiwib24iLCJycGNQZWVyIiwiZGF0YSIsImhhbmRsZU1lc3NhZ2UiLCJjbGVhbnVwIiwic2Vzc2lvbiIsIm1lZGlhU3RyZWFtIiwiTWVkaWFTdHJlYW0iLCJnZXRSZWNlaXZlcnMiLCJtYXAiLCJvbnRyYWNrIiwic3JjT2JqZWN0Il0sInNvdXJjZVJvb3QiOiIifQ==