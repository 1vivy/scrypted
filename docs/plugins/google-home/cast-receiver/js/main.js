(()=>{"use strict";var __webpack_modules__={636:(module,__webpack_exports__,__webpack_require__)=>{function startPeriodicGarbageCollection(){if(__webpack_require__.g.gc)try{const e=__webpack_require__.g;if(e.gc)return setInterval((()=>{e.gc()}),1e4)}catch(e){}else console.warn("rpc peer garbage collection not available: global.gc is not exposed.")}__webpack_require__.d(__webpack_exports__,{uD:()=>RpcPeer}),module=__webpack_require__.hmd(module);class RpcProxy{peer;entry;constructorName;proxyProps;proxyOneWayMethods;constructor(e,t,r,i,o){this.peer=e,this.entry=t,this.constructorName=r,this.proxyProps=i,this.proxyOneWayMethods=o}toPrimitive(){const e=this.peer;return`RpcProxy-${e.selfName}:${e.peerName}: ${this.constructorName}`}get(e,t,r){if(t===RpcPeer.PROPERTY_PROXY_ID)return this.entry.id;if("__proxy_constructor"===t)return this.constructorName;if("__proxy_peer"===t)return this.peer;if(t===RpcPeer.PROPERTY_PROXY_PROPERTIES)return this.proxyProps;if(t===RpcPeer.PROPERTY_PROXY_ONEWAY_METHODS)return this.proxyOneWayMethods;if(t===RpcPeer.PROPERTY_JSON_DISABLE_SERIALIZATION||t===RpcPeer.PROPERTY_JSON_COPY_SERIALIZE_CHILDREN)return;if("then"===t)return;if("constructor"===t)return;if(void 0!==this.proxyProps?.[t])return this.proxyProps?.[t];return RpcPeer.handleFunctionInvocations(this,e,t,r)||new Proxy((()=>t),this)}set(e,t,r,i){return t===RpcPeer.finalizerIdSymbol&&(this.entry.finalizerId=r),!0}apply(e,t,r){if(Object.isFrozen(this.peer.pendingResults))return Promise.reject(new RPCResultError(this.peer,"RpcPeer has been killed"));const i=e()||null,o=[],n={};for(const e of r||[])o.push(this.peer.serialize(e,n));const s={type:"apply",id:void 0,proxyId:this.entry.id,args:o,method:i};return this.proxyOneWayMethods?.includes?.(i)?(s.oneway=!0,this.peer.send(s,void 0,n),Promise.resolve()):this.peer.createPendingResult(((e,t)=>{s.id=e,this.peer.send(s,t,n)}))}}class RPCResultError extends Error{cause;constructor(e,t,r,i){super(`${e.selfName}:${e.peerName}: ${t}`),this.cause=r,i?.name&&(this.name=i?.name),i?.stack&&(this.stack=`${e.peerName}:${e.selfName}\n${r?.stack||i.stack}`)}}function compileFunction(code,params,options){params=params||[];const f=`(function(${params.join(",")}) {;${code};})`;return eval(f)}try{const e=FinalizationRegistry}catch(e){window.WeakRef=class{target;constructor(e){this.target=e}deref(){return this.target}},window.FinalizationRegistry=class{register(){}}}class RpcPeer{selfName;peerName;send;idCounter=1;params={};pendingResults={};proxyCounter=1;localProxied=new Map;localProxyMap={};remoteWeakProxies={};finalizers=new FinalizationRegistry((e=>this.finalize(e)));nameDeserializerMap=new Map;constructorSerializerMap=new Map;transportSafeArgumentTypes=RpcPeer.getDefaultTransportSafeArgumentTypes();killed;killedDeferred;static finalizerIdSymbol=Symbol("rpcFinalizerId");static isRpcProxy(e){return!!e?.[RpcPeer.PROPERTY_PROXY_ID]}static getDefaultTransportSafeArgumentTypes(){const e=new Set;return e.add(Number.name),e.add(String.name),e.add(Object.name),e.add(Boolean.name),e.add(Array.name),e}static handleFunctionInvocations(e,t,r,i){return"apply"===r?(r,i)=>e.apply(t,e,i):"call"===r?(r,...i)=>e.apply(t,e,i):"toString"===r||r===Symbol.toPrimitive?(t,...r)=>e.toPrimitive():void 0}static PROPERTY_PROXY_ID="__proxy_id";static PROPERTY_PROXY_ONEWAY_METHODS="__proxy_oneway_methods";static PROPERTY_JSON_DISABLE_SERIALIZATION="__json_disable_serialization";static PROPERTY_PROXY_PROPERTIES="__proxy_props";static PROPERTY_JSON_COPY_SERIALIZE_CHILDREN="__json_copy_serialize_children";static PROBED_PROPERTIES=new Set(["then","constructor","__proxy_id","__proxy_constructor","__proxy_peer",RpcPeer.PROPERTY_PROXY_ONEWAY_METHODS,RpcPeer.PROPERTY_JSON_DISABLE_SERIALIZATION,RpcPeer.PROPERTY_PROXY_PROPERTIES,RpcPeer.PROPERTY_JSON_COPY_SERIALIZE_CHILDREN]);constructor(e,t,r){this.selfName=e,this.peerName=t,this.send=r,this.killed=new Promise(((e,t)=>{this.killedDeferred={resolve:e,reject:t}}))}createPendingResult(e){if(Object.isFrozen(this.pendingResults))return Promise.reject(new RPCResultError(this,"RpcPeer has been killed"));const t=new Promise(((t,r)=>{const i=(this.idCounter++).toString();this.pendingResults[i]={resolve:t,reject:r},e(i,(e=>r(new RPCResultError(this,e.message,e))))}));return t.catch((()=>{})),t}kill(e){const t=new RPCResultError(this,e||"peer was killed");this.killedDeferred.reject(t);for(const e of Object.values(this.pendingResults))e.reject(t);this.pendingResults=Object.freeze({}),this.params=Object.freeze({}),this.remoteWeakProxies=Object.freeze({}),this.localProxyMap=Object.freeze({}),this.localProxied.clear()}addSerializer(e,t,r){this.nameDeserializerMap.set(t,r),this.constructorSerializerMap.set(e,t)}finalize(e){delete this.remoteWeakProxies[e.id];const t={__local_proxy_id:e.id,__local_proxy_finalizer_id:e.finalizerId,type:"finalize"};this.send(t)}async getParam(e){return this.createPendingResult(((t,r)=>{const i={id:t,type:"param",param:e};this.send(i,r)}))}evalLocal(e,t,r){const i=Object.assign({},this.params,r);let o;try{o=module.require("vm").compileFunction}catch(e){o=compileFunction}return o(e,Object.keys(i),{filename:t})(...Object.values(i))}createErrorResult(e,t){e.stack=t.stack||"no stack",e.result=t.name||"no name",e.message=t.message||"no message"}deserialize(e,t){if(!e)return e;if(e[RpcPeer.PROPERTY_JSON_COPY_SERIALIZE_CHILDREN]){const r={};for(const[i,o]of Object.entries(e))r[i]=this.deserialize(o,t);return r}const{__remote_proxy_id:r,__remote_proxy_finalizer_id:i,__local_proxy_id:o,__remote_constructor_name:n,__serialized_value:s,__remote_proxy_props:a,__remote_proxy_oneway_methods:c}=e;if(r){let e=this.remoteWeakProxies[r]?.deref();return e||(e=this.newProxy(r,n,a,c)),e[RpcPeer.finalizerIdSymbol]=i,e}if(o){const e=this.localProxyMap[o];if(!e)throw new RPCResultError(this,`invalid local proxy id ${o}`);return e}const _=this.nameDeserializerMap.get(n);return _?_.deserialize(s,t):e}serialize(e,t){if(!0===e?.[RpcPeer.PROPERTY_JSON_COPY_SERIALIZE_CHILDREN]){const r={};for(const[i,o]of Object.entries(e))r[i]=this.serialize(o,t);return r}if(!e||!e[RpcPeer.PROPERTY_JSON_DISABLE_SERIALIZATION]&&this.transportSafeArgumentTypes.has(e.constructor?.name))return e;let r=e.__proxy_constructor||e.constructor?.name?.toString(),i=this.localProxied.get(e);if(i){const t=(this.proxyCounter++).toString();return i.finalizerId=t,{__remote_proxy_id:i.id,__remote_proxy_finalizer_id:t,__remote_constructor_name:r,__remote_proxy_props:e?.[RpcPeer.PROPERTY_PROXY_PROPERTIES],__remote_proxy_oneway_methods:e?.[RpcPeer.PROPERTY_PROXY_ONEWAY_METHODS]}}const{__proxy_id:o,__proxy_peer:n}=e;if(o&&n===this)return{__local_proxy_id:o};const s=this.constructorSerializerMap.get(e.constructor);if(s){r=s;const i=this.nameDeserializerMap.get(s);if(!i)throw new Error("serializer not found for "+s);const o=i.serialize(e,t);return{__remote_proxy_id:void 0,__remote_proxy_finalizer_id:void 0,__remote_constructor_name:r,__remote_proxy_props:e?.[RpcPeer.PROPERTY_PROXY_PROPERTIES],__remote_proxy_oneway_methods:e?.[RpcPeer.PROPERTY_PROXY_ONEWAY_METHODS],__serialized_value:o}}const a=(this.proxyCounter++).toString();return i={id:a,finalizerId:a},this.localProxied.set(e,i),this.localProxyMap[a]=e,{__remote_proxy_id:a,__remote_proxy_finalizer_id:a,__remote_constructor_name:r,__remote_proxy_props:e?.[RpcPeer.PROPERTY_PROXY_PROPERTIES],__remote_proxy_oneway_methods:e?.[RpcPeer.PROPERTY_PROXY_ONEWAY_METHODS]}}newProxy(e,t,r,i){const o={id:e,finalizerId:void 0},n=new RpcProxy(this,o,t,r,i),s=new Proxy("Function"===t||"AsyncFunction"===t?function(){}:n,n),a=new WeakRef(s);return this.remoteWeakProxies[e]=a,this.finalizers.register(n,o),s}async handleMessage(e,t){try{switch(e.type){case"param":{const t=e,r={},i={type:"result",id:t.id,result:this.serialize(this.params[t.param],r)};this.send(i,void 0,r);break}case"apply":{const r=e,i={type:"result",id:r.id||""},o={};try{const e=this.localProxyMap[r.proxyId];if(!e)throw new Error(`proxy id ${r.proxyId} not found`);const n=[];for(const e of r.args||[])n.push(this.deserialize(e,t));let s;if(r.method){if(!e[r.method])throw new Error(`target ${e?.constructor?.name} does not have method ${r.method}`);s=await e[r.method](...n)}else s=await e(...n);i.result=this.serialize(s,o)}catch(e){this.createErrorResult(i,e)}r.oneway||this.send(i,void 0,o);break}case"result":{const r=e,i=this.pendingResults[r.id];if(delete this.pendingResults[r.id],!i)throw new Error(`unknown result ${r.id}`);if(r.message||r.stack){const e=new RPCResultError(this,r.message||"no message",void 0,{name:r.result,stack:r.stack});return void i.reject(e)}i.resolve(this.deserialize(r.result,t));break}case"finalize":{const t=e,r=this.localProxyMap[t.__local_proxy_id];if(r){const e=this.localProxied.get(r);if(t.__local_proxy_finalizer_id&&t.__local_proxy_finalizer_id!==e?.finalizerId)break;delete this.localProxyMap[t.__local_proxy_id],this.localProxied.delete(r)}break}default:throw new Error(`unknown rpc message type ${e.type}`)}}catch(e){return void console.error("unhandled rpc error",this.peerName,e)}}}function getEvalSource(){return`\n    (() => {\n        ${RpcProxy}\n\n        ${RpcPeer}\n    \n        return {\n            RpcPeer,\n            RpcProxy,\n        };\n    })();\n    `}}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var r=__webpack_module_cache__[e]={id:e,loaded:!1,exports:{}};return __webpack_modules__[e](r,r.exports,__webpack_require__),r.loaded=!0,r.exports}__webpack_require__.d=(e,t)=>{for(var r in t)__webpack_require__.o(t,r)&&!__webpack_require__.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),__webpack_require__.hmd=e=>((e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e),__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var __webpack_exports__={};(()=>{var e=__webpack_require__(636);class t{finished=!1;resolve;reject;promise=new Promise(((e,t)=>{this.resolve=t=>{this.finished=!0,e(t)},this.reject=e=>{this.finished=!0,t(e)}}))}function r(){try{return navigator.userAgent}catch(e){}}function i(e){return new Promise((t=>{e.addEventListener("iceconnectionstatechange",(()=>{o(e)&&t(e.iceConnectionState)}))}))}function o(e){return"disconnected"===e.iceConnectionState||"failed"===e.iceConnectionState||"closed"===e.iceConnectionState}class n{pc;pcDeferred=new t;dcDeferred=new t;microphone;micEnabled=!1;onPeerConnection;options={userAgent:r(),capabilities:{audio:RTCRtpReceiver.getCapabilities?.("audio")||{codecs:void 0,headerExtensions:void 0},video:RTCRtpReceiver.getCapabilities?.("video")||{codecs:void 0,headerExtensions:void 0}},screen:{width:screen.width,height:screen.height}};constructor(){}async getOptions(){return this.options}async setMicrophone(e){if(this.microphone&&e&&!this.micEnabled){this.micEnabled=!0;const e=await navigator.mediaDevices.getUserMedia({video:!1,audio:!0});await this.microphone.replaceTrack(e.getTracks()[0])}this.microphone.track.enabled=e}close(){this.pcDeferred.promise.then((e=>{for(const t of e.getTransceivers()||[])try{t.sender?.track?.stop?.()}catch(e){}e.close()})).catch((()=>{})),this.pcDeferred.reject(new Error("iceConnectionState "+this.pc?.iceConnectionState))}async createPeerConnection(e){if(this.pc)return;const t=this.pc=new RTCPeerConnection(e.configuration);if(this.pcDeferred.resolve(t),await(this.onPeerConnection?.(t)),t.addEventListener("iceconnectionstatechange",(()=>{console.log("iceConnectionState",t.iceConnectionState),console.log("connectionState",t.connectionState),o(t)&&this.close()})),e.datachannel){const r=t.createDataChannel(e.datachannel.label,e.datachannel.dict);r.binaryType="arraybuffer",this.dcDeferred.resolve(r)}if(e.audio){const r=t.addTransceiver("audio",e.audio);"sendrecv"!==e.audio.direction&&"sendonly"!==e.audio.direction||(this.microphone=r.sender)}if(e.video)if("sendrecv"===e.video.direction||"sendonly"===e.video.direction)try{const e=await navigator.mediaDevices.getUserMedia({video:!0});for(const r of e.getTracks())t.addTrack(r)}catch(e){}else t.addTransceiver("video",e.video)}async createLocalDescription(e,t,r){await this.createPeerConnection(t);const i=new Promise((e=>{this.pc.onicecandidate=t=>{t.candidate?r?.(JSON.parse(JSON.stringify(t.candidate))):e(void 0)},this.pc.onicegatheringstatechange=()=>{"complete"===this.pc.iceGatheringState&&e(void 0)}})),o=e=>({type:e.type,sdp:e.sdp});if("offer"===e){let e=await this.pc.createOffer({offerToReceiveAudio:!!t.audio,offerToReceiveVideo:!!t.video});const n=this.pc.setLocalDescription(e);return r||(await n,await i,e=await this.pc.createOffer({offerToReceiveAudio:!!t.audio,offerToReceiveVideo:!!t.video})),o(e)}{let e=await this.pc.createAnswer();const t=this.pc.setLocalDescription(e);return r||(await t,await i,e=this.pc.currentLocalDescription||e),o(e)}}async setRemoteDescription(e,t){await this.createPeerConnection(t),await this.pc.setRemoteDescription(e)}async addIceCandidate(e){await this.pc.addIceCandidate(e)}async endSession(){}}document.addEventListener("DOMContentLoaded",(function(t){const r=new cast.framework.CastReceiverOptions;r.disableIdleTimeout=!0,cast.framework.CastReceiverContext.getInstance().start(r);const o=cast.framework.CastReceiverContext.getInstance().getPlayerManager(),s=document.getElementById("media");let a;o.setMessageInterceptor(cast.framework.messages.MessageType.LOAD,(t=>{console.log(t);const r=t.media.entity||t.media.contentId,o=t.credentials??t.media.customData.token,c=new URL(r),_=c.pathname,d={};for(const[e,t]of new URLSearchParams(c.search))d[e]=t;const p={path:_,query:d},l=eio(`wss://${c.host}`,p);return l.on("open",(async()=>{l.send(JSON.stringify({token:o}));const t=new e.uD("cast-receiver","host",((e,t)=>{try{l.send(JSON.stringify(e))}catch(e){t?.(e)}}));l.on("message",(e=>{t.handleMessage(JSON.parse(e))}));const r=new n,c=()=>{console.log("cleanup"),l.close(),r.pcDeferred.promise.then((e=>e.close()))};a?.(),a=c,l.on("close",(()=>{console.log("socket io connection close event"),c()})),r.onPeerConnection=async e=>{i(e).then(c);const t=new MediaStream(e.getReceivers().map((e=>e.track)));e.ontrack=e=>t.addTrack(e.track),s.srcObject=t,function(e){return new Promise(((t,r)=>{"connected"!==e.iceConnectionState?(e.addEventListener("iceconnectionstatechange",(()=>{"connected"===e.iceConnectionState&&t(void 0)})),i(e).then((e=>r(new Error(e))))):t(void 0)}))}(e).then((()=>{l.removeAllListeners(),l.close()}))},t.params.session=r})),null}))}))})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QU1DLEVBQWMsSUFBSUMsWUFBWXJILEVBQUdzSCxlQUFlQyxLQUFLalMsR0FBYUEsRUFBU29NLFNBQ2pGMUIsRUFBR3dILFFBQVVuVCxHQUFLK1MsRUFBWXJFLFNBQVMxTyxFQUFFcU4sT0FDekNWLEVBQU15RyxVQUFZTCxFRGhEM0IsU0FBd0NwSCxHQUMzQyxPQUFPLElBQUlySixTQUFRLENBQUNlLEVBQVNkLEtBQ0ssY0FBMUJvSixFQUFHRyxvQkFJUEgsRUFBR0MsaUJBQWlCLDRCQUE0QixLQUNkLGNBQTFCRCxFQUFHRyxvQkFDSHpJLE9BQVE1QixFQUFVLElBRTFCaUssRUFBNEJDLEdBQUk0QixNQUFLOEYsR0FBVTlRLEVBQU8sSUFBSWdCLE1BQU04UCxPQVA1RGhRLE9BQVE1QixFQU82RCxHQUVqRixDQ3FDZ0I2UixDQUErQjNILEdBQzFCNEIsTUFBSyxLQUNOK0UsRUFBT2lCLHFCQUNQakIsRUFBT2hGLE9BQU8sR0FDaEIsRUFFTm9GLEVBQVExTyxPQUFnQixRQUFJNk8sQ0FBTyxJQUVoQyxJQUFJLEdBR25CLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9kaXN0L3NlcnZlci9zcmMvcnBjLmpzIiwid2VicGFjazovLy93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly8vd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovLy93ZWJwYWNrL3J1bnRpbWUvZ2xvYmFsIiwid2VicGFjazovLy93ZWJwYWNrL3J1bnRpbWUvaGFybW9ueSBtb2R1bGUgZGVjb3JhdG9yIiwid2VicGFjazovLy93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovLy8uL2Rpc3QvY29tbW9uL3NyYy9kZWZlcnJlZC5qcyIsIndlYnBhY2s6Ly8vLi9kaXN0L2NvbW1vbi9zcmMvcnRjLXNpZ25hbGluZy5qcyIsIndlYnBhY2s6Ly8vLi9kaXN0L2RvY3MvcGx1Z2lucy9nb29nbGUtaG9tZS9jYXN0LXJlY2VpdmVyL3NyYy9jYXN0LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBmdW5jdGlvbiBzdGFydFBlcmlvZGljR2FyYmFnZUNvbGxlY3Rpb24oKSB7XG4gICAgaWYgKCFnbG9iYWwuZ2MpIHtcbiAgICAgICAgY29uc29sZS53YXJuKCdycGMgcGVlciBnYXJiYWdlIGNvbGxlY3Rpb24gbm90IGF2YWlsYWJsZTogZ2xvYmFsLmdjIGlzIG5vdCBleHBvc2VkLicpO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGcgPSBnbG9iYWw7XG4gICAgICAgIGlmIChnLmdjKSB7XG4gICAgICAgICAgICByZXR1cm4gc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgICAgICAgICAgIGcuZ2MoKTtcbiAgICAgICAgICAgIH0sIDEwMDAwKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjYXRjaCAoZSkge1xuICAgIH1cbn1cbmNsYXNzIFJwY1Byb3h5IHtcbiAgICBwZWVyO1xuICAgIGVudHJ5O1xuICAgIGNvbnN0cnVjdG9yTmFtZTtcbiAgICBwcm94eVByb3BzO1xuICAgIHByb3h5T25lV2F5TWV0aG9kcztcbiAgICBjb25zdHJ1Y3RvcihwZWVyLCBlbnRyeSwgY29uc3RydWN0b3JOYW1lLCBwcm94eVByb3BzLCBwcm94eU9uZVdheU1ldGhvZHMpIHtcbiAgICAgICAgdGhpcy5wZWVyID0gcGVlcjtcbiAgICAgICAgdGhpcy5lbnRyeSA9IGVudHJ5O1xuICAgICAgICB0aGlzLmNvbnN0cnVjdG9yTmFtZSA9IGNvbnN0cnVjdG9yTmFtZTtcbiAgICAgICAgdGhpcy5wcm94eVByb3BzID0gcHJveHlQcm9wcztcbiAgICAgICAgdGhpcy5wcm94eU9uZVdheU1ldGhvZHMgPSBwcm94eU9uZVdheU1ldGhvZHM7XG4gICAgfVxuICAgIHRvUHJpbWl0aXZlKCkge1xuICAgICAgICBjb25zdCBwZWVyID0gdGhpcy5wZWVyO1xuICAgICAgICByZXR1cm4gYFJwY1Byb3h5LSR7cGVlci5zZWxmTmFtZX06JHtwZWVyLnBlZXJOYW1lfTogJHt0aGlzLmNvbnN0cnVjdG9yTmFtZX1gO1xuICAgIH1cbiAgICBnZXQodGFyZ2V0LCBwLCByZWNlaXZlcikge1xuICAgICAgICBpZiAocCA9PT0gUnBjUGVlci5QUk9QRVJUWV9QUk9YWV9JRClcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmVudHJ5LmlkO1xuICAgICAgICBpZiAocCA9PT0gJ19fcHJveHlfY29uc3RydWN0b3InKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29uc3RydWN0b3JOYW1lO1xuICAgICAgICBpZiAocCA9PT0gJ19fcHJveHlfcGVlcicpXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wZWVyO1xuICAgICAgICBpZiAocCA9PT0gUnBjUGVlci5QUk9QRVJUWV9QUk9YWV9QUk9QRVJUSUVTKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJveHlQcm9wcztcbiAgICAgICAgaWYgKHAgPT09IFJwY1BlZXIuUFJPUEVSVFlfUFJPWFlfT05FV0FZX01FVEhPRFMpXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcm94eU9uZVdheU1ldGhvZHM7XG4gICAgICAgIGlmIChwID09PSBScGNQZWVyLlBST1BFUlRZX0pTT05fRElTQUJMRV9TRVJJQUxJWkFUSU9OIHx8IHAgPT09IFJwY1BlZXIuUFJPUEVSVFlfSlNPTl9DT1BZX1NFUklBTElaRV9DSElMRFJFTilcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgaWYgKHAgPT09ICd0aGVuJylcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgaWYgKHAgPT09ICdjb25zdHJ1Y3RvcicpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGlmICh0aGlzLnByb3h5UHJvcHM/LltwXSAhPT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJveHlQcm9wcz8uW3BdO1xuICAgICAgICBjb25zdCBoYW5kbGVkID0gUnBjUGVlci5oYW5kbGVGdW5jdGlvbkludm9jYXRpb25zKHRoaXMsIHRhcmdldCwgcCwgcmVjZWl2ZXIpO1xuICAgICAgICBpZiAoaGFuZGxlZClcbiAgICAgICAgICAgIHJldHVybiBoYW5kbGVkO1xuICAgICAgICByZXR1cm4gbmV3IFByb3h5KCgpID0+IHAsIHRoaXMpO1xuICAgIH1cbiAgICBzZXQodGFyZ2V0LCBwLCB2YWx1ZSwgcmVjZWl2ZXIpIHtcbiAgICAgICAgaWYgKHAgPT09IFJwY1BlZXIuZmluYWxpemVySWRTeW1ib2wpXG4gICAgICAgICAgICB0aGlzLmVudHJ5LmZpbmFsaXplcklkID0gdmFsdWU7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBhcHBseSh0YXJnZXQsIHRoaXNBcmcsIGFyZ0FycmF5KSB7XG4gICAgICAgIGlmIChPYmplY3QuaXNGcm96ZW4odGhpcy5wZWVyLnBlbmRpbmdSZXN1bHRzKSlcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgUlBDUmVzdWx0RXJyb3IodGhpcy5wZWVyLCAnUnBjUGVlciBoYXMgYmVlbiBraWxsZWQnKSk7XG4gICAgICAgIC8vIHJwYyBvYmplY3RzIGNhbiBiZSBmdW5jdGlvbnMuIGlmIHRoZSBmdW5jdGlvbiBpcyBhIG9uZXdheSBtZXRob2QsXG4gICAgICAgIC8vIGl0IHdpbGwgaGF2ZSBhIG51bGwgaW4gdGhlIG9uZXdheSBtZXRob2QgbGlzdC4gdGhpcyBpcyBiZWNhdXNlXG4gICAgICAgIC8vIHVuZGVmaW5lZCBpcyBub3QgSlNPTiBzZXJpYWxpemFibGUuXG4gICAgICAgIGNvbnN0IG1ldGhvZCA9IHRhcmdldCgpIHx8IG51bGw7XG4gICAgICAgIGNvbnN0IGFyZ3MgPSBbXTtcbiAgICAgICAgY29uc3Qgc2VyaWFsaXphdGlvbkNvbnRleHQgPSB7fTtcbiAgICAgICAgZm9yIChjb25zdCBhcmcgb2YgKGFyZ0FycmF5IHx8IFtdKSkge1xuICAgICAgICAgICAgYXJncy5wdXNoKHRoaXMucGVlci5zZXJpYWxpemUoYXJnLCBzZXJpYWxpemF0aW9uQ29udGV4dCkpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHJwY0FwcGx5ID0ge1xuICAgICAgICAgICAgdHlwZTogXCJhcHBseVwiLFxuICAgICAgICAgICAgaWQ6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIHByb3h5SWQ6IHRoaXMuZW50cnkuaWQsXG4gICAgICAgICAgICBhcmdzLFxuICAgICAgICAgICAgbWV0aG9kLFxuICAgICAgICB9O1xuICAgICAgICBpZiAodGhpcy5wcm94eU9uZVdheU1ldGhvZHM/LmluY2x1ZGVzPy4obWV0aG9kKSkge1xuICAgICAgICAgICAgcnBjQXBwbHkub25ld2F5ID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMucGVlci5zZW5kKHJwY0FwcGx5LCB1bmRlZmluZWQsIHNlcmlhbGl6YXRpb25Db250ZXh0KTtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5wZWVyLmNyZWF0ZVBlbmRpbmdSZXN1bHQoKGlkLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIHJwY0FwcGx5LmlkID0gaWQ7XG4gICAgICAgICAgICB0aGlzLnBlZXIuc2VuZChycGNBcHBseSwgcmVqZWN0LCBzZXJpYWxpemF0aW9uQ29udGV4dCk7XG4gICAgICAgIH0pO1xuICAgIH1cbn1cbi8vIHRvZG86IGVycm9yIGNvbnN0cnVjdG9yIGFkZHMgYSBcImNhdXNlXCIgdmFyaWFibGUgaW4gQ2hyb21lIDkzLCBOb2RlIHY/P1xuZXhwb3J0IGNsYXNzIFJQQ1Jlc3VsdEVycm9yIGV4dGVuZHMgRXJyb3Ige1xuICAgIGNhdXNlO1xuICAgIGNvbnN0cnVjdG9yKHBlZXIsIG1lc3NhZ2UsIGNhdXNlLCBvcHRpb25zKSB7XG4gICAgICAgIHN1cGVyKGAke3BlZXIuc2VsZk5hbWV9OiR7cGVlci5wZWVyTmFtZX06ICR7bWVzc2FnZX1gKTtcbiAgICAgICAgdGhpcy5jYXVzZSA9IGNhdXNlO1xuICAgICAgICBpZiAob3B0aW9ucz8ubmFtZSkge1xuICAgICAgICAgICAgdGhpcy5uYW1lID0gb3B0aW9ucz8ubmFtZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAob3B0aW9ucz8uc3RhY2spIHtcbiAgICAgICAgICAgIHRoaXMuc3RhY2sgPSBgJHtwZWVyLnBlZXJOYW1lfToke3BlZXIuc2VsZk5hbWV9XFxuJHtjYXVzZT8uc3RhY2sgfHwgb3B0aW9ucy5zdGFja31gO1xuICAgICAgICB9XG4gICAgfVxufVxuZnVuY3Rpb24gY29tcGlsZUZ1bmN0aW9uKGNvZGUsIHBhcmFtcywgb3B0aW9ucykge1xuICAgIHBhcmFtcyA9IHBhcmFtcyB8fCBbXTtcbiAgICBjb25zdCBmID0gYChmdW5jdGlvbigke3BhcmFtcy5qb2luKCcsJyl9KSB7OyR7Y29kZX07fSlgO1xuICAgIHJldHVybiBldmFsKGYpO1xufVxudHJ5IHtcbiAgICBjb25zdCBmciA9IEZpbmFsaXphdGlvblJlZ2lzdHJ5O1xufVxuY2F0Y2ggKGUpIHtcbiAgICB3aW5kb3cuV2Vha1JlZiA9IGNsYXNzIFdlYWtSZWYge1xuICAgICAgICB0YXJnZXQ7XG4gICAgICAgIGNvbnN0cnVjdG9yKHRhcmdldCkge1xuICAgICAgICAgICAgdGhpcy50YXJnZXQgPSB0YXJnZXQ7XG4gICAgICAgIH1cbiAgICAgICAgZGVyZWYoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy50YXJnZXQ7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHdpbmRvdy5GaW5hbGl6YXRpb25SZWdpc3RyeSA9IGNsYXNzIEZpbmFsaXphdGlvblJlZ2lzdHJ5IHtcbiAgICAgICAgcmVnaXN0ZXIoKSB7XG4gICAgICAgIH1cbiAgICB9O1xufVxuZXhwb3J0IGNsYXNzIFJwY1BlZXIge1xuICAgIHNlbGZOYW1lO1xuICAgIHBlZXJOYW1lO1xuICAgIHNlbmQ7XG4gICAgaWRDb3VudGVyID0gMTtcbiAgICBwYXJhbXMgPSB7fTtcbiAgICBwZW5kaW5nUmVzdWx0cyA9IHt9O1xuICAgIHByb3h5Q291bnRlciA9IDE7XG4gICAgbG9jYWxQcm94aWVkID0gbmV3IE1hcCgpO1xuICAgIGxvY2FsUHJveHlNYXAgPSB7fTtcbiAgICByZW1vdGVXZWFrUHJveGllcyA9IHt9O1xuICAgIGZpbmFsaXplcnMgPSBuZXcgRmluYWxpemF0aW9uUmVnaXN0cnkoZW50cnkgPT4gdGhpcy5maW5hbGl6ZShlbnRyeSkpO1xuICAgIG5hbWVEZXNlcmlhbGl6ZXJNYXAgPSBuZXcgTWFwKCk7XG4gICAgY29uc3RydWN0b3JTZXJpYWxpemVyTWFwID0gbmV3IE1hcCgpO1xuICAgIHRyYW5zcG9ydFNhZmVBcmd1bWVudFR5cGVzID0gUnBjUGVlci5nZXREZWZhdWx0VHJhbnNwb3J0U2FmZUFyZ3VtZW50VHlwZXMoKTtcbiAgICBraWxsZWQ7XG4gICAga2lsbGVkRGVmZXJyZWQ7XG4gICAgc3RhdGljIGZpbmFsaXplcklkU3ltYm9sID0gU3ltYm9sKCdycGNGaW5hbGl6ZXJJZCcpO1xuICAgIHN0YXRpYyBpc1JwY1Byb3h5KHZhbHVlKSB7XG4gICAgICAgIHJldHVybiAhIXZhbHVlPy5bUnBjUGVlci5QUk9QRVJUWV9QUk9YWV9JRF07XG4gICAgfVxuICAgIHN0YXRpYyBnZXREZWZhdWx0VHJhbnNwb3J0U2FmZUFyZ3VtZW50VHlwZXMoKSB7XG4gICAgICAgIGNvbnN0IGpzb25TZXJpYWxpemFibGUgPSBuZXcgU2V0KCk7XG4gICAgICAgIGpzb25TZXJpYWxpemFibGUuYWRkKE51bWJlci5uYW1lKTtcbiAgICAgICAganNvblNlcmlhbGl6YWJsZS5hZGQoU3RyaW5nLm5hbWUpO1xuICAgICAgICBqc29uU2VyaWFsaXphYmxlLmFkZChPYmplY3QubmFtZSk7XG4gICAgICAgIGpzb25TZXJpYWxpemFibGUuYWRkKEJvb2xlYW4ubmFtZSk7XG4gICAgICAgIGpzb25TZXJpYWxpemFibGUuYWRkKEFycmF5Lm5hbWUpO1xuICAgICAgICByZXR1cm4ganNvblNlcmlhbGl6YWJsZTtcbiAgICB9XG4gICAgc3RhdGljIGhhbmRsZUZ1bmN0aW9uSW52b2NhdGlvbnModGhpeiwgdGFyZ2V0LCBwLCByZWNlaXZlcikge1xuICAgICAgICBpZiAocCA9PT0gJ2FwcGx5Jykge1xuICAgICAgICAgICAgcmV0dXJuICh0aGlzQXJnLCBhcmdzKSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXouYXBwbHkodGFyZ2V0LCB0aGl6LCBhcmdzKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAocCA9PT0gJ2NhbGwnKSB7XG4gICAgICAgICAgICByZXR1cm4gKHRoaXNBcmcsIC4uLmFyZ3MpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpei5hcHBseSh0YXJnZXQsIHRoaXosIGFyZ3MpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChwID09PSAndG9TdHJpbmcnIHx8IHAgPT09IFN5bWJvbC50b1ByaW1pdGl2ZSkge1xuICAgICAgICAgICAgcmV0dXJuICh0aGlzQXJnLCAuLi5hcmdzKSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXoudG9QcmltaXRpdmUoKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhdGljIFBST1BFUlRZX1BST1hZX0lEID0gJ19fcHJveHlfaWQnO1xuICAgIHN0YXRpYyBQUk9QRVJUWV9QUk9YWV9PTkVXQVlfTUVUSE9EUyA9ICdfX3Byb3h5X29uZXdheV9tZXRob2RzJztcbiAgICBzdGF0aWMgUFJPUEVSVFlfSlNPTl9ESVNBQkxFX1NFUklBTElaQVRJT04gPSAnX19qc29uX2Rpc2FibGVfc2VyaWFsaXphdGlvbic7XG4gICAgc3RhdGljIFBST1BFUlRZX1BST1hZX1BST1BFUlRJRVMgPSAnX19wcm94eV9wcm9wcyc7XG4gICAgc3RhdGljIFBST1BFUlRZX0pTT05fQ09QWV9TRVJJQUxJWkVfQ0hJTERSRU4gPSAnX19qc29uX2NvcHlfc2VyaWFsaXplX2NoaWxkcmVuJztcbiAgICBzdGF0aWMgUFJPQkVEX1BST1BFUlRJRVMgPSBuZXcgU2V0KFtcbiAgICAgICAgJ3RoZW4nLFxuICAgICAgICAnY29uc3RydWN0b3InLFxuICAgICAgICAnX19wcm94eV9pZCcsXG4gICAgICAgICdfX3Byb3h5X2NvbnN0cnVjdG9yJyxcbiAgICAgICAgJ19fcHJveHlfcGVlcicsXG4gICAgICAgIFJwY1BlZXIuUFJPUEVSVFlfUFJPWFlfT05FV0FZX01FVEhPRFMsXG4gICAgICAgIFJwY1BlZXIuUFJPUEVSVFlfSlNPTl9ESVNBQkxFX1NFUklBTElaQVRJT04sXG4gICAgICAgIFJwY1BlZXIuUFJPUEVSVFlfUFJPWFlfUFJPUEVSVElFUyxcbiAgICAgICAgUnBjUGVlci5QUk9QRVJUWV9KU09OX0NPUFlfU0VSSUFMSVpFX0NISUxEUkVOLFxuICAgIF0pO1xuICAgIGNvbnN0cnVjdG9yKHNlbGZOYW1lLCBwZWVyTmFtZSwgc2VuZCkge1xuICAgICAgICB0aGlzLnNlbGZOYW1lID0gc2VsZk5hbWU7XG4gICAgICAgIHRoaXMucGVlck5hbWUgPSBwZWVyTmFtZTtcbiAgICAgICAgdGhpcy5zZW5kID0gc2VuZDtcbiAgICAgICAgdGhpcy5raWxsZWQgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICB0aGlzLmtpbGxlZERlZmVycmVkID0geyByZXNvbHZlLCByZWplY3QgfTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGNyZWF0ZVBlbmRpbmdSZXN1bHQoY2IpIHtcbiAgICAgICAgaWYgKE9iamVjdC5pc0Zyb3plbih0aGlzLnBlbmRpbmdSZXN1bHRzKSlcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgUlBDUmVzdWx0RXJyb3IodGhpcywgJ1JwY1BlZXIgaGFzIGJlZW4ga2lsbGVkJykpO1xuICAgICAgICBjb25zdCBwcm9taXNlID0gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgaWQgPSAodGhpcy5pZENvdW50ZXIrKykudG9TdHJpbmcoKTtcbiAgICAgICAgICAgIHRoaXMucGVuZGluZ1Jlc3VsdHNbaWRdID0geyByZXNvbHZlLCByZWplY3QgfTtcbiAgICAgICAgICAgIGNiKGlkLCBlID0+IHJlamVjdChuZXcgUlBDUmVzdWx0RXJyb3IodGhpcywgZS5tZXNzYWdlLCBlKSkpO1xuICAgICAgICB9KTtcbiAgICAgICAgLy8gdG9kbzogbWFrZSB0aGlzIGFuIG9wdGlvbiBzbyBycGMgZG9lc24ndCBudWtlIHRoZSBwcm9jZXNzIGlmIHVuY2F1Z2h0P1xuICAgICAgICBwcm9taXNlLmNhdGNoKCgpID0+IHsgfSk7XG4gICAgICAgIHJldHVybiBwcm9taXNlO1xuICAgIH1cbiAgICBraWxsKG1lc3NhZ2UpIHtcbiAgICAgICAgY29uc3QgZXJyb3IgPSBuZXcgUlBDUmVzdWx0RXJyb3IodGhpcywgbWVzc2FnZSB8fCAncGVlciB3YXMga2lsbGVkJyk7XG4gICAgICAgIHRoaXMua2lsbGVkRGVmZXJyZWQucmVqZWN0KGVycm9yKTtcbiAgICAgICAgZm9yIChjb25zdCByZXN1bHQgb2YgT2JqZWN0LnZhbHVlcyh0aGlzLnBlbmRpbmdSZXN1bHRzKSkge1xuICAgICAgICAgICAgcmVzdWx0LnJlamVjdChlcnJvcik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5wZW5kaW5nUmVzdWx0cyA9IE9iamVjdC5mcmVlemUoe30pO1xuICAgICAgICB0aGlzLnBhcmFtcyA9IE9iamVjdC5mcmVlemUoe30pO1xuICAgICAgICB0aGlzLnJlbW90ZVdlYWtQcm94aWVzID0gT2JqZWN0LmZyZWV6ZSh7fSk7XG4gICAgICAgIHRoaXMubG9jYWxQcm94eU1hcCA9IE9iamVjdC5mcmVlemUoe30pO1xuICAgICAgICB0aGlzLmxvY2FsUHJveGllZC5jbGVhcigpO1xuICAgIH1cbiAgICAvLyBuZWVkIGEgbmFtZS9jb25zdHJ1Y3RvciBtYXAgZHVlIHRvIGJhYmVsIG5hbWUgbWFuZ2xpbmc/IGZpeCBzb21laG93P1xuICAgIGFkZFNlcmlhbGl6ZXIoY3RyLCBuYW1lLCBzZXJpYWxpemVyKSB7XG4gICAgICAgIHRoaXMubmFtZURlc2VyaWFsaXplck1hcC5zZXQobmFtZSwgc2VyaWFsaXplcik7XG4gICAgICAgIHRoaXMuY29uc3RydWN0b3JTZXJpYWxpemVyTWFwLnNldChjdHIsIG5hbWUpO1xuICAgIH1cbiAgICBmaW5hbGl6ZShlbnRyeSkge1xuICAgICAgICBkZWxldGUgdGhpcy5yZW1vdGVXZWFrUHJveGllc1tlbnRyeS5pZF07XG4gICAgICAgIGNvbnN0IHJwY0ZpbmFsaXplID0ge1xuICAgICAgICAgICAgX19sb2NhbF9wcm94eV9pZDogZW50cnkuaWQsXG4gICAgICAgICAgICBfX2xvY2FsX3Byb3h5X2ZpbmFsaXplcl9pZDogZW50cnkuZmluYWxpemVySWQsXG4gICAgICAgICAgICB0eXBlOiAnZmluYWxpemUnLFxuICAgICAgICB9O1xuICAgICAgICB0aGlzLnNlbmQocnBjRmluYWxpemUpO1xuICAgIH1cbiAgICBhc3luYyBnZXRQYXJhbShwYXJhbSkge1xuICAgICAgICByZXR1cm4gdGhpcy5jcmVhdGVQZW5kaW5nUmVzdWx0KChpZCwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBwYXJhbU1lc3NhZ2UgPSB7XG4gICAgICAgICAgICAgICAgaWQsXG4gICAgICAgICAgICAgICAgdHlwZTogJ3BhcmFtJyxcbiAgICAgICAgICAgICAgICBwYXJhbSxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLnNlbmQocGFyYW1NZXNzYWdlLCByZWplY3QpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgZXZhbExvY2FsKHNjcmlwdCwgZmlsZW5hbWUsIGNvZXJjZWRQYXJhbXMpIHtcbiAgICAgICAgY29uc3QgcGFyYW1zID0gT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5wYXJhbXMsIGNvZXJjZWRQYXJhbXMpO1xuICAgICAgICBsZXQgY29tcGlsZTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIHByZXZlbnQgYnVuZGxlcnMgZnJvbSB0cnlpbmcgdG8gaW5jbHVkZSBub24tZXhpc3RlbnQgdm0gbW9kdWxlLlxuICAgICAgICAgICAgY29tcGlsZSA9IG1vZHVsZVtgcmVxdWlyZWBdKCd2bScpLmNvbXBpbGVGdW5jdGlvbjtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgY29tcGlsZSA9IGNvbXBpbGVGdW5jdGlvbjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBmID0gY29tcGlsZShzY3JpcHQsIE9iamVjdC5rZXlzKHBhcmFtcyksIHtcbiAgICAgICAgICAgIGZpbGVuYW1lLFxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgdmFsdWUgPSBmKC4uLk9iamVjdC52YWx1ZXMocGFyYW1zKSk7XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG4gICAgY3JlYXRlRXJyb3JSZXN1bHQocmVzdWx0LCBlKSB7XG4gICAgICAgIHJlc3VsdC5zdGFjayA9IGUuc3RhY2sgfHwgJ25vIHN0YWNrJztcbiAgICAgICAgcmVzdWx0LnJlc3VsdCA9IGUubmFtZSB8fCAnbm8gbmFtZSc7XG4gICAgICAgIHJlc3VsdC5tZXNzYWdlID0gZS5tZXNzYWdlIHx8ICdubyBtZXNzYWdlJztcbiAgICB9XG4gICAgZGVzZXJpYWxpemUodmFsdWUsIGRlc2VyaWFsaXphdGlvbkNvbnRleHQpIHtcbiAgICAgICAgaWYgKCF2YWx1ZSlcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgICAgY29uc3QgY29weVNlcmlhbGl6ZUNoaWxkcmVuID0gdmFsdWVbUnBjUGVlci5QUk9QRVJUWV9KU09OX0NPUFlfU0VSSUFMSVpFX0NISUxEUkVOXTtcbiAgICAgICAgaWYgKGNvcHlTZXJpYWxpemVDaGlsZHJlbikge1xuICAgICAgICAgICAgY29uc3QgcmV0ID0ge307XG4gICAgICAgICAgICBmb3IgKGNvbnN0IFtrZXksIHZhbF0gb2YgT2JqZWN0LmVudHJpZXModmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgcmV0W2tleV0gPSB0aGlzLmRlc2VyaWFsaXplKHZhbCwgZGVzZXJpYWxpemF0aW9uQ29udGV4dCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmV0O1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHsgX19yZW1vdGVfcHJveHlfaWQsIF9fcmVtb3RlX3Byb3h5X2ZpbmFsaXplcl9pZCwgX19sb2NhbF9wcm94eV9pZCwgX19yZW1vdGVfY29uc3RydWN0b3JfbmFtZSwgX19zZXJpYWxpemVkX3ZhbHVlLCBfX3JlbW90ZV9wcm94eV9wcm9wcywgX19yZW1vdGVfcHJveHlfb25ld2F5X21ldGhvZHMgfSA9IHZhbHVlO1xuICAgICAgICBpZiAoX19yZW1vdGVfcHJveHlfaWQpIHtcbiAgICAgICAgICAgIGxldCBwcm94eSA9IHRoaXMucmVtb3RlV2Vha1Byb3hpZXNbX19yZW1vdGVfcHJveHlfaWRdPy5kZXJlZigpO1xuICAgICAgICAgICAgaWYgKCFwcm94eSlcbiAgICAgICAgICAgICAgICBwcm94eSA9IHRoaXMubmV3UHJveHkoX19yZW1vdGVfcHJveHlfaWQsIF9fcmVtb3RlX2NvbnN0cnVjdG9yX25hbWUsIF9fcmVtb3RlX3Byb3h5X3Byb3BzLCBfX3JlbW90ZV9wcm94eV9vbmV3YXlfbWV0aG9kcyk7XG4gICAgICAgICAgICBwcm94eVtScGNQZWVyLmZpbmFsaXplcklkU3ltYm9sXSA9IF9fcmVtb3RlX3Byb3h5X2ZpbmFsaXplcl9pZDtcbiAgICAgICAgICAgIHJldHVybiBwcm94eTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoX19sb2NhbF9wcm94eV9pZCkge1xuICAgICAgICAgICAgY29uc3QgcmV0ID0gdGhpcy5sb2NhbFByb3h5TWFwW19fbG9jYWxfcHJveHlfaWRdO1xuICAgICAgICAgICAgaWYgKCFyZXQpXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFJQQ1Jlc3VsdEVycm9yKHRoaXMsIGBpbnZhbGlkIGxvY2FsIHByb3h5IGlkICR7X19sb2NhbF9wcm94eV9pZH1gKTtcbiAgICAgICAgICAgIHJldHVybiByZXQ7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZGVzZXJpYWxpemVyID0gdGhpcy5uYW1lRGVzZXJpYWxpemVyTWFwLmdldChfX3JlbW90ZV9jb25zdHJ1Y3Rvcl9uYW1lKTtcbiAgICAgICAgaWYgKGRlc2VyaWFsaXplcikge1xuICAgICAgICAgICAgcmV0dXJuIGRlc2VyaWFsaXplci5kZXNlcmlhbGl6ZShfX3NlcmlhbGl6ZWRfdmFsdWUsIGRlc2VyaWFsaXphdGlvbkNvbnRleHQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG4gICAgc2VyaWFsaXplKHZhbHVlLCBzZXJpYWxpemF0aW9uQ29udGV4dCkge1xuICAgICAgICBpZiAodmFsdWU/LltScGNQZWVyLlBST1BFUlRZX0pTT05fQ09QWV9TRVJJQUxJWkVfQ0hJTERSRU5dID09PSB0cnVlKSB7XG4gICAgICAgICAgICBjb25zdCByZXQgPSB7fTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsXSBvZiBPYmplY3QuZW50cmllcyh2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICByZXRba2V5XSA9IHRoaXMuc2VyaWFsaXplKHZhbCwgc2VyaWFsaXphdGlvbkNvbnRleHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJldDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXZhbHVlIHx8ICghdmFsdWVbUnBjUGVlci5QUk9QRVJUWV9KU09OX0RJU0FCTEVfU0VSSUFMSVpBVElPTl0gJiYgdGhpcy50cmFuc3BvcnRTYWZlQXJndW1lbnRUeXBlcy5oYXModmFsdWUuY29uc3RydWN0b3I/Lm5hbWUpKSkge1xuICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIGxldCBfX3JlbW90ZV9jb25zdHJ1Y3Rvcl9uYW1lID0gdmFsdWUuX19wcm94eV9jb25zdHJ1Y3RvciB8fCB2YWx1ZS5jb25zdHJ1Y3Rvcj8ubmFtZT8udG9TdHJpbmcoKTtcbiAgICAgICAgbGV0IHByb3hpZWRFbnRyeSA9IHRoaXMubG9jYWxQcm94aWVkLmdldCh2YWx1ZSk7XG4gICAgICAgIGlmIChwcm94aWVkRW50cnkpIHtcbiAgICAgICAgICAgIGNvbnN0IF9fcmVtb3RlX3Byb3h5X2ZpbmFsaXplcl9pZCA9ICh0aGlzLnByb3h5Q291bnRlcisrKS50b1N0cmluZygpO1xuICAgICAgICAgICAgcHJveGllZEVudHJ5LmZpbmFsaXplcklkID0gX19yZW1vdGVfcHJveHlfZmluYWxpemVyX2lkO1xuICAgICAgICAgICAgY29uc3QgcmV0ID0ge1xuICAgICAgICAgICAgICAgIF9fcmVtb3RlX3Byb3h5X2lkOiBwcm94aWVkRW50cnkuaWQsXG4gICAgICAgICAgICAgICAgX19yZW1vdGVfcHJveHlfZmluYWxpemVyX2lkLFxuICAgICAgICAgICAgICAgIF9fcmVtb3RlX2NvbnN0cnVjdG9yX25hbWUsXG4gICAgICAgICAgICAgICAgX19yZW1vdGVfcHJveHlfcHJvcHM6IHZhbHVlPy5bUnBjUGVlci5QUk9QRVJUWV9QUk9YWV9QUk9QRVJUSUVTXSxcbiAgICAgICAgICAgICAgICBfX3JlbW90ZV9wcm94eV9vbmV3YXlfbWV0aG9kczogdmFsdWU/LltScGNQZWVyLlBST1BFUlRZX1BST1hZX09ORVdBWV9NRVRIT0RTXSxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICByZXR1cm4gcmV0O1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHsgX19wcm94eV9pZCwgX19wcm94eV9wZWVyIH0gPSB2YWx1ZTtcbiAgICAgICAgaWYgKF9fcHJveHlfaWQgJiYgX19wcm94eV9wZWVyID09PSB0aGlzKSB7XG4gICAgICAgICAgICBjb25zdCByZXQgPSB7XG4gICAgICAgICAgICAgICAgX19sb2NhbF9wcm94eV9pZDogX19wcm94eV9pZCxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICByZXR1cm4gcmV0O1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHNlcmlhbGl6ZXJNYXBOYW1lID0gdGhpcy5jb25zdHJ1Y3RvclNlcmlhbGl6ZXJNYXAuZ2V0KHZhbHVlLmNvbnN0cnVjdG9yKTtcbiAgICAgICAgaWYgKHNlcmlhbGl6ZXJNYXBOYW1lKSB7XG4gICAgICAgICAgICBfX3JlbW90ZV9jb25zdHJ1Y3Rvcl9uYW1lID0gc2VyaWFsaXplck1hcE5hbWU7XG4gICAgICAgICAgICBjb25zdCBzZXJpYWxpemVyID0gdGhpcy5uYW1lRGVzZXJpYWxpemVyTWFwLmdldChzZXJpYWxpemVyTWFwTmFtZSk7XG4gICAgICAgICAgICBpZiAoIXNlcmlhbGl6ZXIpXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdzZXJpYWxpemVyIG5vdCBmb3VuZCBmb3IgJyArIHNlcmlhbGl6ZXJNYXBOYW1lKTtcbiAgICAgICAgICAgIGNvbnN0IHNlcmlhbGl6ZWQgPSBzZXJpYWxpemVyLnNlcmlhbGl6ZSh2YWx1ZSwgc2VyaWFsaXphdGlvbkNvbnRleHQpO1xuICAgICAgICAgICAgY29uc3QgcmV0ID0ge1xuICAgICAgICAgICAgICAgIF9fcmVtb3RlX3Byb3h5X2lkOiB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgX19yZW1vdGVfcHJveHlfZmluYWxpemVyX2lkOiB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgX19yZW1vdGVfY29uc3RydWN0b3JfbmFtZSxcbiAgICAgICAgICAgICAgICBfX3JlbW90ZV9wcm94eV9wcm9wczogdmFsdWU/LltScGNQZWVyLlBST1BFUlRZX1BST1hZX1BST1BFUlRJRVNdLFxuICAgICAgICAgICAgICAgIF9fcmVtb3RlX3Byb3h5X29uZXdheV9tZXRob2RzOiB2YWx1ZT8uW1JwY1BlZXIuUFJPUEVSVFlfUFJPWFlfT05FV0FZX01FVEhPRFNdLFxuICAgICAgICAgICAgICAgIF9fc2VyaWFsaXplZF92YWx1ZTogc2VyaWFsaXplZCxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICByZXR1cm4gcmV0O1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IF9fcmVtb3RlX3Byb3h5X2lkID0gKHRoaXMucHJveHlDb3VudGVyKyspLnRvU3RyaW5nKCk7XG4gICAgICAgIHByb3hpZWRFbnRyeSA9IHtcbiAgICAgICAgICAgIGlkOiBfX3JlbW90ZV9wcm94eV9pZCxcbiAgICAgICAgICAgIGZpbmFsaXplcklkOiBfX3JlbW90ZV9wcm94eV9pZCxcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5sb2NhbFByb3hpZWQuc2V0KHZhbHVlLCBwcm94aWVkRW50cnkpO1xuICAgICAgICB0aGlzLmxvY2FsUHJveHlNYXBbX19yZW1vdGVfcHJveHlfaWRdID0gdmFsdWU7XG4gICAgICAgIGNvbnN0IHJldCA9IHtcbiAgICAgICAgICAgIF9fcmVtb3RlX3Byb3h5X2lkLFxuICAgICAgICAgICAgX19yZW1vdGVfcHJveHlfZmluYWxpemVyX2lkOiBfX3JlbW90ZV9wcm94eV9pZCxcbiAgICAgICAgICAgIF9fcmVtb3RlX2NvbnN0cnVjdG9yX25hbWUsXG4gICAgICAgICAgICBfX3JlbW90ZV9wcm94eV9wcm9wczogdmFsdWU/LltScGNQZWVyLlBST1BFUlRZX1BST1hZX1BST1BFUlRJRVNdLFxuICAgICAgICAgICAgX19yZW1vdGVfcHJveHlfb25ld2F5X21ldGhvZHM6IHZhbHVlPy5bUnBjUGVlci5QUk9QRVJUWV9QUk9YWV9PTkVXQVlfTUVUSE9EU10sXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiByZXQ7XG4gICAgfVxuICAgIG5ld1Byb3h5KHByb3h5SWQsIHByb3h5Q29uc3RydWN0b3JOYW1lLCBwcm94eVByb3BzLCBwcm94eU9uZVdheU1ldGhvZHMpIHtcbiAgICAgICAgY29uc3QgbG9jYWxQcm94aWVkRW50cnkgPSB7XG4gICAgICAgICAgICBpZDogcHJveHlJZCxcbiAgICAgICAgICAgIGZpbmFsaXplcklkOiB1bmRlZmluZWQsXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHJwYyA9IG5ldyBScGNQcm94eSh0aGlzLCBsb2NhbFByb3hpZWRFbnRyeSwgcHJveHlDb25zdHJ1Y3Rvck5hbWUsIHByb3h5UHJvcHMsIHByb3h5T25lV2F5TWV0aG9kcyk7XG4gICAgICAgIGNvbnN0IHRhcmdldCA9IHByb3h5Q29uc3RydWN0b3JOYW1lID09PSAnRnVuY3Rpb24nIHx8IHByb3h5Q29uc3RydWN0b3JOYW1lID09PSAnQXN5bmNGdW5jdGlvbicgPyBmdW5jdGlvbiAoKSB7IH0gOiBycGM7XG4gICAgICAgIGNvbnN0IHByb3h5ID0gbmV3IFByb3h5KHRhcmdldCwgcnBjKTtcbiAgICAgICAgY29uc3Qgd2Vha3JlZiA9IG5ldyBXZWFrUmVmKHByb3h5KTtcbiAgICAgICAgdGhpcy5yZW1vdGVXZWFrUHJveGllc1twcm94eUlkXSA9IHdlYWtyZWY7XG4gICAgICAgIHRoaXMuZmluYWxpemVycy5yZWdpc3RlcihycGMsIGxvY2FsUHJveGllZEVudHJ5KTtcbiAgICAgICAgcmV0dXJuIHByb3h5O1xuICAgIH1cbiAgICBhc3luYyBoYW5kbGVNZXNzYWdlKG1lc3NhZ2UsIGRlc2VyaWFsaXphdGlvbkNvbnRleHQpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHN3aXRjaCAobWVzc2FnZS50eXBlKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAncGFyYW0nOiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJwY1BhcmFtID0gbWVzc2FnZTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2VyaWFsaXphdGlvbkNvbnRleHQgPSB7fTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3Jlc3VsdCcsXG4gICAgICAgICAgICAgICAgICAgICAgICBpZDogcnBjUGFyYW0uaWQsXG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQ6IHRoaXMuc2VyaWFsaXplKHRoaXMucGFyYW1zW3JwY1BhcmFtLnBhcmFtXSwgc2VyaWFsaXphdGlvbkNvbnRleHQpXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VuZChyZXN1bHQsIHVuZGVmaW5lZCwgc2VyaWFsaXphdGlvbkNvbnRleHQpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2FzZSAnYXBwbHknOiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJwY0FwcGx5ID0gbWVzc2FnZTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3Jlc3VsdCcsXG4gICAgICAgICAgICAgICAgICAgICAgICBpZDogcnBjQXBwbHkuaWQgfHwgJycsXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHNlcmlhbGl6YXRpb25Db250ZXh0ID0ge307XG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0YXJnZXQgPSB0aGlzLmxvY2FsUHJveHlNYXBbcnBjQXBwbHkucHJveHlJZF07XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRhcmdldClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYHByb3h5IGlkICR7cnBjQXBwbHkucHJveHlJZH0gbm90IGZvdW5kYCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhcmdzID0gW107XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGFyZyBvZiAocnBjQXBwbHkuYXJncyB8fCBbXSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcmdzLnB1c2godGhpcy5kZXNlcmlhbGl6ZShhcmcsIGRlc2VyaWFsaXphdGlvbkNvbnRleHQpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChycGNBcHBseS5tZXRob2QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtZXRob2QgPSB0YXJnZXRbcnBjQXBwbHkubWV0aG9kXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIW1ldGhvZClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGB0YXJnZXQgJHt0YXJnZXQ/LmNvbnN0cnVjdG9yPy5uYW1lfSBkb2VzIG5vdCBoYXZlIG1ldGhvZCAke3JwY0FwcGx5Lm1ldGhvZH1gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IGF3YWl0IHRhcmdldFtycGNBcHBseS5tZXRob2RdKC4uLmFyZ3MpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBhd2FpdCB0YXJnZXQoLi4uYXJncyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQucmVzdWx0ID0gdGhpcy5zZXJpYWxpemUodmFsdWUsIHNlcmlhbGl6YXRpb25Db250ZXh0KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5lcnJvcignZmFpbHVyZScsIHJwY0FwcGx5Lm1ldGhvZCwgZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNyZWF0ZUVycm9yUmVzdWx0KHJlc3VsdCwgZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKCFycGNBcHBseS5vbmV3YXkpXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbmQocmVzdWx0LCB1bmRlZmluZWQsIHNlcmlhbGl6YXRpb25Db250ZXh0KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhc2UgJ3Jlc3VsdCc6IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcnBjUmVzdWx0ID0gbWVzc2FnZTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZGVmZXJyZWQgPSB0aGlzLnBlbmRpbmdSZXN1bHRzW3JwY1Jlc3VsdC5pZF07XG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLnBlbmRpbmdSZXN1bHRzW3JwY1Jlc3VsdC5pZF07XG4gICAgICAgICAgICAgICAgICAgIGlmICghZGVmZXJyZWQpXG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYHVua25vd24gcmVzdWx0ICR7cnBjUmVzdWx0LmlkfWApO1xuICAgICAgICAgICAgICAgICAgICBpZiAocnBjUmVzdWx0Lm1lc3NhZ2UgfHwgcnBjUmVzdWx0LnN0YWNrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBlID0gbmV3IFJQQ1Jlc3VsdEVycm9yKHRoaXMsIHJwY1Jlc3VsdC5tZXNzYWdlIHx8ICdubyBtZXNzYWdlJywgdW5kZWZpbmVkLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogcnBjUmVzdWx0LnJlc3VsdCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGFjazogcnBjUmVzdWx0LnN0YWNrLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZWplY3QoZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZSh0aGlzLmRlc2VyaWFsaXplKHJwY1Jlc3VsdC5yZXN1bHQsIGRlc2VyaWFsaXphdGlvbkNvbnRleHQpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhc2UgJ2ZpbmFsaXplJzoge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBycGNGaW5hbGl6ZSA9IG1lc3NhZ2U7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGxvY2FsID0gdGhpcy5sb2NhbFByb3h5TWFwW3JwY0ZpbmFsaXplLl9fbG9jYWxfcHJveHlfaWRdO1xuICAgICAgICAgICAgICAgICAgICBpZiAobG9jYWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGxvY2FsUHJveGllZEVudHJ5ID0gdGhpcy5sb2NhbFByb3hpZWQuZ2V0KGxvY2FsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIGEgZmluYWxpemVyIGlkIGlzIHNwZWNpZmllZCwgaXQgbXVzdCBtYXRjaC5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChycGNGaW5hbGl6ZS5fX2xvY2FsX3Byb3h5X2ZpbmFsaXplcl9pZCAmJiBycGNGaW5hbGl6ZS5fX2xvY2FsX3Byb3h5X2ZpbmFsaXplcl9pZCAhPT0gbG9jYWxQcm94aWVkRW50cnk/LmZpbmFsaXplcklkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5sb2NhbFByb3h5TWFwW3JwY0ZpbmFsaXplLl9fbG9jYWxfcHJveHlfaWRdO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2NhbFByb3hpZWQuZGVsZXRlKGxvY2FsKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGB1bmtub3duIHJwYyBtZXNzYWdlIHR5cGUgJHttZXNzYWdlLnR5cGV9YCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ3VuaGFuZGxlZCBycGMgZXJyb3InLCB0aGlzLnBlZXJOYW1lLCBlKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiBnZXRFdmFsU291cmNlKCkge1xuICAgIHJldHVybiBgXG4gICAgKCgpID0+IHtcbiAgICAgICAgJHtScGNQcm94eX1cblxuICAgICAgICAke1JwY1BlZXJ9XG4gICAgXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBScGNQZWVyLFxuICAgICAgICAgICAgUnBjUHJveHksXG4gICAgICAgIH07XG4gICAgfSkoKTtcbiAgICBgO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cnBjLmpzLm1hcCIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdHZhciBjYWNoZWRNb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdO1xuXHRpZiAoY2FjaGVkTW9kdWxlICE9PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gY2FjaGVkTW9kdWxlLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0aWQ6IG1vZHVsZUlkLFxuXHRcdGxvYWRlZDogZmFsc2UsXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0obW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuXHRtb2R1bGUubG9hZGVkID0gdHJ1ZTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbiIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IChleHBvcnRzLCBkZWZpbml0aW9uKSA9PiB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18uZyA9IChmdW5jdGlvbigpIHtcblx0aWYgKHR5cGVvZiBnbG9iYWxUaGlzID09PSAnb2JqZWN0JykgcmV0dXJuIGdsb2JhbFRoaXM7XG5cdHRyeSB7XG5cdFx0cmV0dXJuIHRoaXMgfHwgbmV3IEZ1bmN0aW9uKCdyZXR1cm4gdGhpcycpKCk7XG5cdH0gY2F0Y2ggKGUpIHtcblx0XHRpZiAodHlwZW9mIHdpbmRvdyA9PT0gJ29iamVjdCcpIHJldHVybiB3aW5kb3c7XG5cdH1cbn0pKCk7IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5obWQgPSAobW9kdWxlKSA9PiB7XG5cdG1vZHVsZSA9IE9iamVjdC5jcmVhdGUobW9kdWxlKTtcblx0aWYgKCFtb2R1bGUuY2hpbGRyZW4pIG1vZHVsZS5jaGlsZHJlbiA9IFtdO1xuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkobW9kdWxlLCAnZXhwb3J0cycsIHtcblx0XHRlbnVtZXJhYmxlOiB0cnVlLFxuXHRcdHNldDogKCkgPT4ge1xuXHRcdFx0dGhyb3cgbmV3IEVycm9yKCdFUyBNb2R1bGVzIG1heSBub3QgYXNzaWduIG1vZHVsZS5leHBvcnRzIG9yIGV4cG9ydHMuKiwgVXNlIEVTTSBleHBvcnQgc3ludGF4LCBpbnN0ZWFkOiAnICsgbW9kdWxlLmlkKTtcblx0XHR9XG5cdH0pO1xuXHRyZXR1cm4gbW9kdWxlO1xufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkpIiwiZXhwb3J0IGNsYXNzIERlZmVycmVkIHtcbiAgICBmaW5pc2hlZCA9IGZhbHNlO1xuICAgIHJlc29sdmU7XG4gICAgcmVqZWN0O1xuICAgIHByb21pc2UgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgIHRoaXMucmVzb2x2ZSA9IHYgPT4ge1xuICAgICAgICAgICAgdGhpcy5maW5pc2hlZCA9IHRydWU7XG4gICAgICAgICAgICByZXNvbHZlKHYpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLnJlamVjdCA9IGUgPT4ge1xuICAgICAgICAgICAgdGhpcy5maW5pc2hlZCA9IHRydWU7XG4gICAgICAgICAgICByZWplY3QoZSk7XG4gICAgICAgIH07XG4gICAgfSk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1kZWZlcnJlZC5qcy5tYXAiLCJpbXBvcnQgeyBEZWZlcnJlZCB9IGZyb20gXCIuL2RlZmVycmVkXCI7XG5mdW5jdGlvbiBnZXRVc2VyQWdlbnQoKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIG5hdmlnYXRvci51c2VyQWdlbnQ7XG4gICAgfVxuICAgIGNhdGNoIChlKSB7XG4gICAgfVxufVxuLy8gY29ubmVjdGlvblN0YXRlIGlzIG5vdCBpbXBsZW1lbnRlZCBpbiBmaXJlZm94PyBzbyB3YXRjaCBpY2VDb25uZWN0aW9uU3RhdGUgaW5zdGVhZC4uLlxuZXhwb3J0IGZ1bmN0aW9uIHdhaXRQZWVyQ29ubmVjdGlvbkljZUNvbm5lY3RlZChwYykge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgIGlmIChwYy5pY2VDb25uZWN0aW9uU3RhdGUgPT09ICdjb25uZWN0ZWQnKSB7XG4gICAgICAgICAgICByZXNvbHZlKHVuZGVmaW5lZCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgcGMuYWRkRXZlbnRMaXN0ZW5lcignaWNlY29ubmVjdGlvbnN0YXRlY2hhbmdlJywgKCkgPT4ge1xuICAgICAgICAgICAgaWYgKHBjLmljZUNvbm5lY3Rpb25TdGF0ZSA9PT0gJ2Nvbm5lY3RlZCcpXG4gICAgICAgICAgICAgICAgcmVzb2x2ZSh1bmRlZmluZWQpO1xuICAgICAgICB9KTtcbiAgICAgICAgd2FpdFBlZXJJY2VDb25uZWN0aW9uQ2xvc2VkKHBjKS50aGVuKHJlYXNvbiA9PiByZWplY3QobmV3IEVycm9yKHJlYXNvbikpKTtcbiAgICB9KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiB3YWl0UGVlckljZUNvbm5lY3Rpb25DbG9zZWQocGMpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgICAgIHBjLmFkZEV2ZW50TGlzdGVuZXIoJ2ljZWNvbm5lY3Rpb25zdGF0ZWNoYW5nZScsICgpID0+IHtcbiAgICAgICAgICAgIGlmIChpc1BlZXJDb25uZWN0aW9uQ2xvc2VkKHBjKSkge1xuICAgICAgICAgICAgICAgIHJlc29sdmUocGMuaWNlQ29ubmVjdGlvblN0YXRlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSk7XG59XG5leHBvcnQgZnVuY3Rpb24gaXNQZWVyQ29ubmVjdGlvbkNsb3NlZChwYykge1xuICAgIHJldHVybiBwYy5pY2VDb25uZWN0aW9uU3RhdGUgPT09ICdkaXNjb25uZWN0ZWQnXG4gICAgICAgIHx8IHBjLmljZUNvbm5lY3Rpb25TdGF0ZSA9PT0gJ2ZhaWxlZCdcbiAgICAgICAgfHwgcGMuaWNlQ29ubmVjdGlvblN0YXRlID09PSAnY2xvc2VkJztcbn1cbmZ1bmN0aW9uIHNpbGVuY2UoKSB7XG4gICAgbGV0IGN0eCA9IG5ldyBBdWRpb0NvbnRleHQoKSwgb3NjaWxsYXRvciA9IGN0eC5jcmVhdGVPc2NpbGxhdG9yKCk7XG4gICAgY29uc3QgZGVzdCA9IGN0eC5jcmVhdGVNZWRpYVN0cmVhbURlc3RpbmF0aW9uKCk7XG4gICAgb3NjaWxsYXRvci5jb25uZWN0KGRlc3QpO1xuICAgIG9zY2lsbGF0b3Iuc3RhcnQoKTtcbiAgICBjb25zdCByZXQgPSBkZXN0LnN0cmVhbS5nZXRBdWRpb1RyYWNrcygpWzBdO1xuICAgIHJldC5lbmFibGVkID0gZmFsc2U7XG4gICAgcmV0dXJuIHJldDtcbn1cbmV4cG9ydCBjbGFzcyBCcm93c2VyU2lnbmFsaW5nU2Vzc2lvbiB7XG4gICAgcGM7XG4gICAgcGNEZWZlcnJlZCA9IG5ldyBEZWZlcnJlZCgpO1xuICAgIGRjRGVmZXJyZWQgPSBuZXcgRGVmZXJyZWQoKTtcbiAgICBtaWNyb3Bob25lO1xuICAgIG1pY0VuYWJsZWQgPSBmYWxzZTtcbiAgICBvblBlZXJDb25uZWN0aW9uO1xuICAgIG9wdGlvbnMgPSB7XG4gICAgICAgIHVzZXJBZ2VudDogZ2V0VXNlckFnZW50KCksXG4gICAgICAgIGNhcGFiaWxpdGllczoge1xuICAgICAgICAgICAgYXVkaW86IFJUQ1J0cFJlY2VpdmVyLmdldENhcGFiaWxpdGllcz8uKCdhdWRpbycpIHx8IHtcbiAgICAgICAgICAgICAgICBjb2RlY3M6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICBoZWFkZXJFeHRlbnNpb25zOiB1bmRlZmluZWQsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgdmlkZW86IFJUQ1J0cFJlY2VpdmVyLmdldENhcGFiaWxpdGllcz8uKCd2aWRlbycpIHx8IHtcbiAgICAgICAgICAgICAgICBjb2RlY3M6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICBoZWFkZXJFeHRlbnNpb25zOiB1bmRlZmluZWQsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgICBzY3JlZW46IHtcbiAgICAgICAgICAgIHdpZHRoOiBzY3JlZW4ud2lkdGgsXG4gICAgICAgICAgICBoZWlnaHQ6IHNjcmVlbi5oZWlnaHQsXG4gICAgICAgIH0sXG4gICAgfTtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICB9XG4gICAgYXN5bmMgZ2V0T3B0aW9ucygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub3B0aW9ucztcbiAgICB9XG4gICAgYXN5bmMgc2V0TWljcm9waG9uZShlbmFibGVkKSB7XG4gICAgICAgIGlmICh0aGlzLm1pY3JvcGhvbmUgJiYgZW5hYmxlZCAmJiAhdGhpcy5taWNFbmFibGVkKSB7XG4gICAgICAgICAgICB0aGlzLm1pY0VuYWJsZWQgPSB0cnVlO1xuICAgICAgICAgICAgLy8gZG9pbmcgc2VuZHJlY3Ygb24gc2FmYXJpIHJlcXVpcmVzIGEgbWljIGJlIGF0dGFjaGVkLCBvciBpdCBmYWlscyB0byBjb25uZWN0LlxuICAgICAgICAgICAgY29uc3QgbWljID0gYXdhaXQgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEoeyB2aWRlbzogZmFsc2UsIGF1ZGlvOiB0cnVlIH0pO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5taWNyb3Bob25lLnJlcGxhY2VUcmFjayhtaWMuZ2V0VHJhY2tzKClbMF0pO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubWljcm9waG9uZS50cmFjay5lbmFibGVkID0gZW5hYmxlZDtcbiAgICB9XG4gICAgY2xvc2UoKSB7XG4gICAgICAgIHRoaXMucGNEZWZlcnJlZC5wcm9taXNlLnRoZW4ocGMgPT4ge1xuICAgICAgICAgICAgZm9yIChjb25zdCB0IG9mIHBjLmdldFRyYW5zY2VpdmVycygpIHx8IFtdKSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgdC5zZW5kZXI/LnRyYWNrPy5zdG9wPy4oKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwYy5jbG9zZSgpO1xuICAgICAgICB9KVxuICAgICAgICAgICAgLmNhdGNoKCgpID0+IHsgfSk7XG4gICAgICAgIHRoaXMucGNEZWZlcnJlZC5yZWplY3QobmV3IEVycm9yKCdpY2VDb25uZWN0aW9uU3RhdGUgJyArIHRoaXMucGM/LmljZUNvbm5lY3Rpb25TdGF0ZSkpO1xuICAgIH1cbiAgICBhc3luYyBjcmVhdGVQZWVyQ29ubmVjdGlvbihzZXR1cCkge1xuICAgICAgICBpZiAodGhpcy5wYylcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgY29uc3QgY2hlY2tDb25uID0gKCkgPT4ge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ2ljZUNvbm5lY3Rpb25TdGF0ZScsIHBjLmljZUNvbm5lY3Rpb25TdGF0ZSk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnY29ubmVjdGlvblN0YXRlJywgcGMuY29ubmVjdGlvblN0YXRlKTtcbiAgICAgICAgICAgIGlmIChpc1BlZXJDb25uZWN0aW9uQ2xvc2VkKHBjKSlcbiAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHBjID0gdGhpcy5wYyA9IG5ldyBSVENQZWVyQ29ubmVjdGlvbihzZXR1cC5jb25maWd1cmF0aW9uKTtcbiAgICAgICAgdGhpcy5wY0RlZmVycmVkLnJlc29sdmUocGMpO1xuICAgICAgICBhd2FpdCB0aGlzLm9uUGVlckNvbm5lY3Rpb24/LihwYyk7XG4gICAgICAgIC8vIHBjLmFkZEV2ZW50TGlzdGVuZXIoJ2Nvbm5lY3Rpb25zdGF0ZWNoYW5nZScsIGNoZWNrQ29ubik7XG4gICAgICAgIHBjLmFkZEV2ZW50TGlzdGVuZXIoJ2ljZWNvbm5lY3Rpb25zdGF0ZWNoYW5nZScsIGNoZWNrQ29ubik7XG4gICAgICAgIC8vIHBjLmFkZEV2ZW50TGlzdGVuZXIoJ2ljZWdhdGhlcmluZ3N0YXRlY2hhbmdlJywgZXYgPT4gY29uc29sZS5sb2coJ2ljZUdhdGhlcmluZ1N0YXRlJywgcGMuaWNlR2F0aGVyaW5nU3RhdGUpKVxuICAgICAgICAvLyBwYy5hZGRFdmVudExpc3RlbmVyKCdzaWduYWxpbmdzdGF0ZWNoYW5nZScsIGV2ID0+IGNvbnNvbGUubG9nKCdzaWduYWxpbmdTdGF0ZScsIHBjLnNpZ25hbGluZ1N0YXRlKSlcbiAgICAgICAgLy8gcGMuYWRkRXZlbnRMaXN0ZW5lcignaWNlY2FuZGlkYXRlZXJyb3InLCBldiA9PiBjb25zb2xlLmxvZygnaWNlY2FuZGlkYXRlZXJyb3InKSlcbiAgICAgICAgaWYgKHNldHVwLmRhdGFjaGFubmVsKSB7XG4gICAgICAgICAgICBjb25zdCBkYyA9IHBjLmNyZWF0ZURhdGFDaGFubmVsKHNldHVwLmRhdGFjaGFubmVsLmxhYmVsLCBzZXR1cC5kYXRhY2hhbm5lbC5kaWN0KTtcbiAgICAgICAgICAgIGRjLmJpbmFyeVR5cGUgPSAnYXJyYXlidWZmZXInO1xuICAgICAgICAgICAgdGhpcy5kY0RlZmVycmVkLnJlc29sdmUoZGMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzZXR1cC5hdWRpbykge1xuICAgICAgICAgICAgY29uc3QgYXVkaW8gPSBwYy5hZGRUcmFuc2NlaXZlcignYXVkaW8nLCBzZXR1cC5hdWRpbyk7XG4gICAgICAgICAgICBpZiAoc2V0dXAuYXVkaW8uZGlyZWN0aW9uID09PSAnc2VuZHJlY3YnIHx8IHNldHVwLmF1ZGlvLmRpcmVjdGlvbiA9PT0gJ3NlbmRvbmx5Jykge1xuICAgICAgICAgICAgICAgIHRoaXMubWljcm9waG9uZSA9IGF1ZGlvLnNlbmRlcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoc2V0dXAudmlkZW8pIHtcbiAgICAgICAgICAgIGlmIChzZXR1cC52aWRlby5kaXJlY3Rpb24gPT09ICdzZW5kcmVjdicgfHwgc2V0dXAudmlkZW8uZGlyZWN0aW9uID09PSAnc2VuZG9ubHknKSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgLy8gZG9pbmcgc2VuZHJlY3Ygb24gc2FmYXJpIHJlcXVpcmVzIGEgbWljIGJlIGF0dGFjaGVkLCBvciBpdCBmYWlscyB0byBjb25uZWN0LlxuICAgICAgICAgICAgICAgICAgICBjb25zdCBjYW1lcmEgPSBhd2FpdCBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYSh7IHZpZGVvOiB0cnVlIH0pO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHRyYWNrIG9mIGNhbWVyYS5nZXRUcmFja3MoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGMuYWRkVHJhY2sodHJhY2spO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIHdoYXQgbm93XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcGMuYWRkVHJhbnNjZWl2ZXIoJ3ZpZGVvJywgc2V0dXAudmlkZW8pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIGNyZWF0ZUxvY2FsRGVzY3JpcHRpb24odHlwZSwgc2V0dXAsIHNlbmRJY2VDYW5kaWRhdGUpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5jcmVhdGVQZWVyQ29ubmVjdGlvbihzZXR1cCk7XG4gICAgICAgIGNvbnN0IGdhdGhlcmluZ1Byb21pc2UgPSBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICAgICAgICAgIHRoaXMucGMub25pY2VjYW5kaWRhdGUgPSBldiA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGV2LmNhbmRpZGF0ZSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhcImxvY2FsIGNhbmRpZGF0ZVwiLCBldi5jYW5kaWRhdGUpO1xuICAgICAgICAgICAgICAgICAgICBzZW5kSWNlQ2FuZGlkYXRlPy4oSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShldi5jYW5kaWRhdGUpKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHVuZGVmaW5lZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMucGMub25pY2VnYXRoZXJpbmdzdGF0ZWNoYW5nZSA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5wYy5pY2VHYXRoZXJpbmdTdGF0ZSA9PT0gJ2NvbXBsZXRlJylcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSh1bmRlZmluZWQpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IHRvRGVzY3JpcHRpb24gPSAoaW5pdCkgPT4ge1xuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ2xvY2FsIGRlc2NyaXB0aW9uJywgaW5pdC5zZHApO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB0eXBlOiBpbml0LnR5cGUsXG4gICAgICAgICAgICAgICAgc2RwOiBpbml0LnNkcCxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH07XG4gICAgICAgIGlmICh0eXBlID09PSAnb2ZmZXInKSB7XG4gICAgICAgICAgICBsZXQgb2ZmZXIgPSBhd2FpdCB0aGlzLnBjLmNyZWF0ZU9mZmVyKHtcbiAgICAgICAgICAgICAgICBvZmZlclRvUmVjZWl2ZUF1ZGlvOiAhIXNldHVwLmF1ZGlvLFxuICAgICAgICAgICAgICAgIG9mZmVyVG9SZWNlaXZlVmlkZW86ICEhc2V0dXAudmlkZW8sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNvbnN0IHNldCA9IHRoaXMucGMuc2V0TG9jYWxEZXNjcmlwdGlvbihvZmZlcik7XG4gICAgICAgICAgICBpZiAoc2VuZEljZUNhbmRpZGF0ZSlcbiAgICAgICAgICAgICAgICByZXR1cm4gdG9EZXNjcmlwdGlvbihvZmZlcik7XG4gICAgICAgICAgICBhd2FpdCBzZXQ7XG4gICAgICAgICAgICBhd2FpdCBnYXRoZXJpbmdQcm9taXNlO1xuICAgICAgICAgICAgb2ZmZXIgPSBhd2FpdCB0aGlzLnBjLmNyZWF0ZU9mZmVyKHtcbiAgICAgICAgICAgICAgICBvZmZlclRvUmVjZWl2ZUF1ZGlvOiAhIXNldHVwLmF1ZGlvLFxuICAgICAgICAgICAgICAgIG9mZmVyVG9SZWNlaXZlVmlkZW86ICEhc2V0dXAudmlkZW8sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiB0b0Rlc2NyaXB0aW9uKG9mZmVyKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGxldCBhbnN3ZXIgPSBhd2FpdCB0aGlzLnBjLmNyZWF0ZUFuc3dlcigpO1xuICAgICAgICAgICAgY29uc3Qgc2V0ID0gdGhpcy5wYy5zZXRMb2NhbERlc2NyaXB0aW9uKGFuc3dlcik7XG4gICAgICAgICAgICBpZiAoc2VuZEljZUNhbmRpZGF0ZSlcbiAgICAgICAgICAgICAgICByZXR1cm4gdG9EZXNjcmlwdGlvbihhbnN3ZXIpO1xuICAgICAgICAgICAgYXdhaXQgc2V0O1xuICAgICAgICAgICAgYXdhaXQgZ2F0aGVyaW5nUHJvbWlzZTtcbiAgICAgICAgICAgIGFuc3dlciA9IHRoaXMucGMuY3VycmVudExvY2FsRGVzY3JpcHRpb24gfHwgYW5zd2VyO1xuICAgICAgICAgICAgcmV0dXJuIHRvRGVzY3JpcHRpb24oYW5zd2VyKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBzZXRSZW1vdGVEZXNjcmlwdGlvbihkZXNjcmlwdGlvbiwgc2V0dXApIHtcbiAgICAgICAgYXdhaXQgdGhpcy5jcmVhdGVQZWVyQ29ubmVjdGlvbihzZXR1cCk7XG4gICAgICAgIGF3YWl0IHRoaXMucGMuc2V0UmVtb3RlRGVzY3JpcHRpb24oZGVzY3JpcHRpb24pO1xuICAgICAgICAvLyBjb25zb2xlLmxvZygncmVtb3RlIGRlc2NyaXB0aW9uJywgZGVzY3JpcHRpb24uc2RwKTtcbiAgICB9XG4gICAgYXN5bmMgYWRkSWNlQ2FuZGlkYXRlKGNhbmRpZGF0ZSkge1xuICAgICAgICBhd2FpdCB0aGlzLnBjLmFkZEljZUNhbmRpZGF0ZShjYW5kaWRhdGUpO1xuICAgICAgICAvLyBjb25zb2xlLmxvZyhcInJlbW90ZSBjYW5kaWRhdGVcIiwgY2FuZGlkYXRlKTtcbiAgICB9XG4gICAgYXN5bmMgZW5kU2Vzc2lvbigpIHtcbiAgICB9XG59XG5mdW5jdGlvbiBsb2dTZW5kQ2FuZGlkYXRlKGNvbnNvbGUsIHR5cGUsIHNlc3Npb24pIHtcbiAgICByZXR1cm4gYXN5bmMgKGNhbmRpZGF0ZSkgPT4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coYCR7dHlwZX0gdHJpY2tsZWQgY2FuZGlkYXRlOmAsIGNhbmRpZGF0ZS5zZHBNTGluZUluZGV4LCBjYW5kaWRhdGUuY2FuZGlkYXRlKTtcbiAgICAgICAgICAgIGF3YWl0IHNlc3Npb24uYWRkSWNlQ2FuZGlkYXRlKGNhbmRpZGF0ZSk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ2FkZEljZUNhbmRpZGF0ZSBlcnJvcicsIGUpO1xuICAgICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgfVxuICAgIH07XG59XG5mdW5jdGlvbiBjcmVhdGVDYW5kaWRhdGVRdWV1ZShjb25zb2xlLCB0eXBlLCBzZXNzaW9uKSB7XG4gICAgbGV0IHJlYWR5ID0gZmFsc2U7XG4gICAgbGV0IGNhbmRpZGF0ZVF1ZXVlID0gW107XG4gICAgY29uc3QgbHMgPSBsb2dTZW5kQ2FuZGlkYXRlKGNvbnNvbGUsIHR5cGUsIHNlc3Npb24pO1xuICAgIGNvbnN0IHF1ZXVlU2VuZENhbmRpZGF0ZSA9IGFzeW5jIChjYW5kaWRhdGUpID0+IHtcbiAgICAgICAgaWYgKCFyZWFkeSlcbiAgICAgICAgICAgIGNhbmRpZGF0ZVF1ZXVlLnB1c2goY2FuZGlkYXRlKTtcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgbHMoY2FuZGlkYXRlKTtcbiAgICB9O1xuICAgIHJldHVybiB7XG4gICAgICAgIGZsdXNoKCkge1xuICAgICAgICAgICAgcmVhZHkgPSB0cnVlO1xuICAgICAgICAgICAgZm9yIChjb25zdCBjYW5kaWRhdGUgb2YgY2FuZGlkYXRlUXVldWUpIHtcbiAgICAgICAgICAgICAgICBscyhjYW5kaWRhdGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FuZGlkYXRlUXVldWUgPSBbXTtcbiAgICAgICAgfSxcbiAgICAgICAgcXVldWVTZW5kQ2FuZGlkYXRlLFxuICAgIH07XG59XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY29ubmVjdFJUQ1NpZ25hbGluZ0NsaWVudHMoY29uc29sZSwgb2ZmZXJDbGllbnQsIG9mZmVyU2V0dXAsIGFuc3dlckNsaWVudCwgYW5zd2VyU2V0dXApIHtcbiAgICBjb25zdCBvZmZlck9wdGlvbnMgPSBhd2FpdCBvZmZlckNsaWVudC5nZXRPcHRpb25zKCk7XG4gICAgY29uc3QgYW5zd2VyT3B0aW9ucyA9IGF3YWl0IGFuc3dlckNsaWVudC5nZXRPcHRpb25zKCk7XG4gICAgY29uc3QgZGlzYWJsZVRyaWNrbGUgPSBvZmZlck9wdGlvbnM/LmRpc2FibGVUcmlja2xlIHx8IGFuc3dlck9wdGlvbnM/LmRpc2FibGVUcmlja2xlO1xuICAgIGlmIChvZmZlck9wdGlvbnM/Lm9mZmVyICYmIGFuc3dlck9wdGlvbnM/Lm9mZmVyKVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0JvdGggUlRDIGNsaWVudHMgaGF2ZSBvZmZlcnMgYW5kIGNhbiBub3QgbmVnb3RpYXRlLiBDb25zaWRlciBpbXBsZW1lbnRpbmcgdGhpcyBpbiBAc2NyeXB0ZWQvd2VicnRjLicpO1xuICAgIGlmIChvZmZlck9wdGlvbnM/LnJlcXVpcmVzT2ZmZXIgJiYgYW5zd2VyT3B0aW9ucy5yZXF1aXJlc09mZmVyKVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0JvdGggUlRDIGNsaWVudHMgcmVxdWlyZSBvZmZlcnMgYW5kIGNhbiBub3QgbmVnb3RpYXRlLicpO1xuICAgIG9mZmVyU2V0dXAudHlwZSA9ICdvZmZlcic7XG4gICAgYW5zd2VyU2V0dXAudHlwZSA9ICdhbnN3ZXInO1xuICAgIGNvbnN0IGFuc3dlclF1ZXVlID0gY3JlYXRlQ2FuZGlkYXRlUXVldWUoY29uc29sZSwgJ29mZmVyJywgYW5zd2VyQ2xpZW50KTtcbiAgICBjb25zdCBvZmZlclF1ZXVlID0gY3JlYXRlQ2FuZGlkYXRlUXVldWUoY29uc29sZSwgJ2Fuc3dlcicsIG9mZmVyQ2xpZW50KTtcbiAgICBjb25zdCBvZmZlciA9IGF3YWl0IG9mZmVyQ2xpZW50LmNyZWF0ZUxvY2FsRGVzY3JpcHRpb24oJ29mZmVyJywgb2ZmZXJTZXR1cCwgZGlzYWJsZVRyaWNrbGUgPyB1bmRlZmluZWQgOiBhbnN3ZXJRdWV1ZS5xdWV1ZVNlbmRDYW5kaWRhdGUpO1xuICAgIGNvbnNvbGUubG9nKCdvZmZlciBzZHAnLCBvZmZlci5zZHApO1xuICAgIGF3YWl0IGFuc3dlckNsaWVudC5zZXRSZW1vdGVEZXNjcmlwdGlvbihvZmZlciwgYW5zd2VyU2V0dXApO1xuICAgIGFuc3dlclF1ZXVlLmZsdXNoKCk7XG4gICAgY29uc3QgYW5zd2VyID0gYXdhaXQgYW5zd2VyQ2xpZW50LmNyZWF0ZUxvY2FsRGVzY3JpcHRpb24oJ2Fuc3dlcicsIGFuc3dlclNldHVwLCBkaXNhYmxlVHJpY2tsZSA/IHVuZGVmaW5lZCA6IG9mZmVyUXVldWUucXVldWVTZW5kQ2FuZGlkYXRlKTtcbiAgICBjb25zb2xlLmxvZygnYW5zd2VyIHNkcCcsIGFuc3dlci5zZHApO1xuICAgIGF3YWl0IG9mZmVyQ2xpZW50LnNldFJlbW90ZURlc2NyaXB0aW9uKGFuc3dlciwgb2ZmZXJTZXR1cCk7XG4gICAgb2ZmZXJRdWV1ZS5mbHVzaCgpO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cnRjLXNpZ25hbGluZy5qcy5tYXAiLCJpbXBvcnQgeyBScGNQZWVyIH0gZnJvbSAnLi4vLi4vLi4vLi4vLi4vc2VydmVyL3NyYy9ycGMnO1xuaW1wb3J0IHsgQnJvd3NlclNpZ25hbGluZ1Nlc3Npb24sIHdhaXRQZWVyQ29ubmVjdGlvbkljZUNvbm5lY3RlZCwgd2FpdFBlZXJJY2VDb25uZWN0aW9uQ2xvc2VkIH0gZnJvbSAnLi4vLi4vLi4vLi4vLi4vY29tbW9uL3NyYy9ydGMtc2lnbmFsaW5nJztcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsIGZ1bmN0aW9uIChldmVudCkge1xuICAgIGNvbnN0IG9wdGlvbnMgPSBuZXcgY2FzdC5mcmFtZXdvcmsuQ2FzdFJlY2VpdmVyT3B0aW9ucygpO1xuICAgIG9wdGlvbnMuZGlzYWJsZUlkbGVUaW1lb3V0ID0gdHJ1ZTtcbiAgICBjYXN0LmZyYW1ld29yay5DYXN0UmVjZWl2ZXJDb250ZXh0LmdldEluc3RhbmNlKCkuc3RhcnQob3B0aW9ucyk7XG4gICAgY29uc3QgY29udGV4dCA9IGNhc3QuZnJhbWV3b3JrLkNhc3RSZWNlaXZlckNvbnRleHQuZ2V0SW5zdGFuY2UoKTtcbiAgICBjb25zdCBwbGF5ZXJNYW5hZ2VyID0gY29udGV4dC5nZXRQbGF5ZXJNYW5hZ2VyKCk7XG4gICAgY29uc3QgdmlkZW8gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWVkaWEnKTtcbiAgICBsZXQgcHJldmlvdXNDbGVhbnVwO1xuICAgIC8vIGludGVyY2VwdCB0aGUgTE9BRCByZXF1ZXN0IHRvIGJlIGFibGUgdG8gcmVhZCBpbiBhIGNvbnRlbnRJZCBhbmQgZ2V0IGRhdGFcbiAgICBjb25zdCBpbnRlcmNlcHRvciA9IChsb2FkUmVxdWVzdERhdGEpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2cobG9hZFJlcXVlc3REYXRhKTtcbiAgICAgICAgY29uc3QgZWlvVXJsID0gbG9hZFJlcXVlc3REYXRhLm1lZGlhLmVudGl0eSB8fCBsb2FkUmVxdWVzdERhdGEubWVkaWEuY29udGVudElkO1xuICAgICAgICBjb25zdCB0b2tlbiA9IGxvYWRSZXF1ZXN0RGF0YS5jcmVkZW50aWFscyA/PyBsb2FkUmVxdWVzdERhdGEubWVkaWEuY3VzdG9tRGF0YS50b2tlbjtcbiAgICAgICAgY29uc3QgdXJsID0gbmV3IFVSTChlaW9VcmwpO1xuICAgICAgICBjb25zdCBlbmRwb2ludFBhdGggPSB1cmwucGF0aG5hbWU7XG4gICAgICAgIGNvbnN0IHF1ZXJ5ID0ge307XG4gICAgICAgIGZvciAoY29uc3QgW2ssIHZdIG9mIG5ldyBVUkxTZWFyY2hQYXJhbXModXJsLnNlYXJjaCkpIHtcbiAgICAgICAgICAgIHF1ZXJ5W2tdID0gdjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBvcHRpb25zID0ge1xuICAgICAgICAgICAgcGF0aDogZW5kcG9pbnRQYXRoLFxuICAgICAgICAgICAgcXVlcnksXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHNvY2tldCA9IGVpbyhgd3NzOi8vJHt1cmwuaG9zdH1gLCBvcHRpb25zKTtcbiAgICAgICAgc29ja2V0Lm9uKCdvcGVuJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgc29ja2V0LnNlbmQoSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICAgIHRva2VuLFxuICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgY29uc3QgcnBjUGVlciA9IG5ldyBScGNQZWVyKCdjYXN0LXJlY2VpdmVyJywgJ2hvc3QnLCAobWVzc2FnZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgc29ja2V0LnNlbmQoSlNPTi5zdHJpbmdpZnkobWVzc2FnZSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICByZWplY3Q/LihlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHNvY2tldC5vbignbWVzc2FnZScsIChkYXRhKSA9PiB7XG4gICAgICAgICAgICAgICAgcnBjUGVlci5oYW5kbGVNZXNzYWdlKEpTT04ucGFyc2UoZGF0YSkpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjb25zdCBzZXNzaW9uID0gbmV3IEJyb3dzZXJTaWduYWxpbmdTZXNzaW9uKCk7XG4gICAgICAgICAgICBjb25zdCBjbGVhbnVwID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdjbGVhbnVwJyk7XG4gICAgICAgICAgICAgICAgc29ja2V0LmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgc2Vzc2lvbi5wY0RlZmVycmVkLnByb21pc2UudGhlbihwYyA9PiBwYy5jbG9zZSgpKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBwcmV2aW91c0NsZWFudXA/LigpO1xuICAgICAgICAgICAgcHJldmlvdXNDbGVhbnVwID0gY2xlYW51cDtcbiAgICAgICAgICAgIHNvY2tldC5vbignY2xvc2UnLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3NvY2tldCBpbyBjb25uZWN0aW9uIGNsb3NlIGV2ZW50Jyk7XG4gICAgICAgICAgICAgICAgY2xlYW51cCgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBzZXNzaW9uLm9uUGVlckNvbm5lY3Rpb24gPSBhc3luYyAocGMpID0+IHtcbiAgICAgICAgICAgICAgICB3YWl0UGVlckljZUNvbm5lY3Rpb25DbG9zZWQocGMpLnRoZW4oY2xlYW51cCk7XG4gICAgICAgICAgICAgICAgY29uc3QgbWVkaWFTdHJlYW0gPSBuZXcgTWVkaWFTdHJlYW0ocGMuZ2V0UmVjZWl2ZXJzKCkubWFwKChyZWNlaXZlcikgPT4gcmVjZWl2ZXIudHJhY2spKTtcbiAgICAgICAgICAgICAgICBwYy5vbnRyYWNrID0gZSA9PiBtZWRpYVN0cmVhbS5hZGRUcmFjayhlLnRyYWNrKTtcbiAgICAgICAgICAgICAgICB2aWRlby5zcmNPYmplY3QgPSBtZWRpYVN0cmVhbTtcbiAgICAgICAgICAgICAgICB3YWl0UGVlckNvbm5lY3Rpb25JY2VDb25uZWN0ZWQocGMpXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgc29ja2V0LnJlbW92ZUFsbExpc3RlbmVycygpO1xuICAgICAgICAgICAgICAgICAgICBzb2NrZXQuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBycGNQZWVyLnBhcmFtc1snc2Vzc2lvbiddID0gc2Vzc2lvbjtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH07XG4gICAgcGxheWVyTWFuYWdlci5zZXRNZXNzYWdlSW50ZXJjZXB0b3IoY2FzdC5mcmFtZXdvcmsubWVzc2FnZXMuTWVzc2FnZVR5cGUuTE9BRCwgaW50ZXJjZXB0b3IpO1xufSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jYXN0LmpzLm1hcCJdLCJuYW1lcyI6WyJzdGFydFBlcmlvZGljR2FyYmFnZUNvbGxlY3Rpb24iLCJnIiwiZ2MiLCJzZXRJbnRlcnZhbCIsImUiLCJjb25zb2xlIiwid2FybiIsIlJwY1Byb3h5IiwicGVlciIsImVudHJ5IiwiY29uc3RydWN0b3JOYW1lIiwicHJveHlQcm9wcyIsInByb3h5T25lV2F5TWV0aG9kcyIsImNvbnN0cnVjdG9yIiwidGhpcyIsInRvUHJpbWl0aXZlIiwic2VsZk5hbWUiLCJwZWVyTmFtZSIsImdldCIsInRhcmdldCIsInAiLCJyZWNlaXZlciIsIlJwY1BlZXIiLCJQUk9QRVJUWV9QUk9YWV9JRCIsImlkIiwiUFJPUEVSVFlfUFJPWFlfUFJPUEVSVElFUyIsIlBST1BFUlRZX1BST1hZX09ORVdBWV9NRVRIT0RTIiwiUFJPUEVSVFlfSlNPTl9ESVNBQkxFX1NFUklBTElaQVRJT04iLCJQUk9QRVJUWV9KU09OX0NPUFlfU0VSSUFMSVpFX0NISUxEUkVOIiwidW5kZWZpbmVkIiwiaGFuZGxlRnVuY3Rpb25JbnZvY2F0aW9ucyIsIlByb3h5Iiwic2V0IiwidmFsdWUiLCJmaW5hbGl6ZXJJZFN5bWJvbCIsImZpbmFsaXplcklkIiwiYXBwbHkiLCJ0aGlzQXJnIiwiYXJnQXJyYXkiLCJPYmplY3QiLCJpc0Zyb3plbiIsInBlbmRpbmdSZXN1bHRzIiwiUHJvbWlzZSIsInJlamVjdCIsIlJQQ1Jlc3VsdEVycm9yIiwibWV0aG9kIiwiYXJncyIsInNlcmlhbGl6YXRpb25Db250ZXh0IiwiYXJnIiwicHVzaCIsInNlcmlhbGl6ZSIsInJwY0FwcGx5IiwidHlwZSIsInByb3h5SWQiLCJpbmNsdWRlcyIsIm9uZXdheSIsInNlbmQiLCJyZXNvbHZlIiwiY3JlYXRlUGVuZGluZ1Jlc3VsdCIsIkVycm9yIiwiY2F1c2UiLCJtZXNzYWdlIiwib3B0aW9ucyIsInN1cGVyIiwibmFtZSIsInN0YWNrIiwiY29tcGlsZUZ1bmN0aW9uIiwiY29kZSIsInBhcmFtcyIsImYiLCJqb2luIiwiZXZhbCIsImZyIiwiRmluYWxpemF0aW9uUmVnaXN0cnkiLCJ3aW5kb3ciLCJXZWFrUmVmIiwiZGVyZWYiLCJyZWdpc3RlciIsImlkQ291bnRlciIsInByb3h5Q291bnRlciIsImxvY2FsUHJveGllZCIsIk1hcCIsImxvY2FsUHJveHlNYXAiLCJyZW1vdGVXZWFrUHJveGllcyIsImZpbmFsaXplcnMiLCJmaW5hbGl6ZSIsIm5hbWVEZXNlcmlhbGl6ZXJNYXAiLCJjb25zdHJ1Y3RvclNlcmlhbGl6ZXJNYXAiLCJ0cmFuc3BvcnRTYWZlQXJndW1lbnRUeXBlcyIsImdldERlZmF1bHRUcmFuc3BvcnRTYWZlQXJndW1lbnRUeXBlcyIsImtpbGxlZCIsImtpbGxlZERlZmVycmVkIiwic3RhdGljIiwiU3ltYm9sIiwianNvblNlcmlhbGl6YWJsZSIsIlNldCIsImFkZCIsIk51bWJlciIsIlN0cmluZyIsIkJvb2xlYW4iLCJBcnJheSIsInRoaXoiLCJjYiIsInByb21pc2UiLCJ0b1N0cmluZyIsImNhdGNoIiwia2lsbCIsImVycm9yIiwicmVzdWx0IiwidmFsdWVzIiwiZnJlZXplIiwiY2xlYXIiLCJhZGRTZXJpYWxpemVyIiwiY3RyIiwic2VyaWFsaXplciIsInJwY0ZpbmFsaXplIiwiX19sb2NhbF9wcm94eV9pZCIsIl9fbG9jYWxfcHJveHlfZmluYWxpemVyX2lkIiwiYXN5bmMiLCJwYXJhbSIsInBhcmFtTWVzc2FnZSIsImV2YWxMb2NhbCIsInNjcmlwdCIsImZpbGVuYW1lIiwiY29lcmNlZFBhcmFtcyIsImFzc2lnbiIsImNvbXBpbGUiLCJtb2R1bGUiLCJrZXlzIiwiY3JlYXRlRXJyb3JSZXN1bHQiLCJkZXNlcmlhbGl6ZSIsImRlc2VyaWFsaXphdGlvbkNvbnRleHQiLCJyZXQiLCJrZXkiLCJ2YWwiLCJlbnRyaWVzIiwiX19yZW1vdGVfcHJveHlfaWQiLCJfX3JlbW90ZV9wcm94eV9maW5hbGl6ZXJfaWQiLCJfX3JlbW90ZV9jb25zdHJ1Y3Rvcl9uYW1lIiwiX19zZXJpYWxpemVkX3ZhbHVlIiwiX19yZW1vdGVfcHJveHlfcHJvcHMiLCJfX3JlbW90ZV9wcm94eV9vbmV3YXlfbWV0aG9kcyIsInByb3h5IiwibmV3UHJveHkiLCJkZXNlcmlhbGl6ZXIiLCJoYXMiLCJfX3Byb3h5X2NvbnN0cnVjdG9yIiwicHJveGllZEVudHJ5IiwiX19wcm94eV9pZCIsIl9fcHJveHlfcGVlciIsInNlcmlhbGl6ZXJNYXBOYW1lIiwic2VyaWFsaXplZCIsInByb3h5Q29uc3RydWN0b3JOYW1lIiwibG9jYWxQcm94aWVkRW50cnkiLCJycGMiLCJ3ZWFrcmVmIiwicnBjUGFyYW0iLCJycGNSZXN1bHQiLCJkZWZlcnJlZCIsImxvY2FsIiwiZGVsZXRlIiwiZ2V0RXZhbFNvdXJjZSIsIl9fd2VicGFja19tb2R1bGVfY2FjaGVfXyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImNhY2hlZE1vZHVsZSIsImV4cG9ydHMiLCJsb2FkZWQiLCJfX3dlYnBhY2tfbW9kdWxlc19fIiwiZCIsImRlZmluaXRpb24iLCJvIiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2xvYmFsVGhpcyIsIkZ1bmN0aW9uIiwiaG1kIiwiY3JlYXRlIiwiY2hpbGRyZW4iLCJvYmoiLCJwcm9wIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiRGVmZXJyZWQiLCJmaW5pc2hlZCIsInYiLCJnZXRVc2VyQWdlbnQiLCJuYXZpZ2F0b3IiLCJ1c2VyQWdlbnQiLCJ3YWl0UGVlckljZUNvbm5lY3Rpb25DbG9zZWQiLCJwYyIsImFkZEV2ZW50TGlzdGVuZXIiLCJpc1BlZXJDb25uZWN0aW9uQ2xvc2VkIiwiaWNlQ29ubmVjdGlvblN0YXRlIiwiQnJvd3NlclNpZ25hbGluZ1Nlc3Npb24iLCJwY0RlZmVycmVkIiwiZGNEZWZlcnJlZCIsIm1pY3JvcGhvbmUiLCJtaWNFbmFibGVkIiwib25QZWVyQ29ubmVjdGlvbiIsImNhcGFiaWxpdGllcyIsImF1ZGlvIiwiUlRDUnRwUmVjZWl2ZXIiLCJnZXRDYXBhYmlsaXRpZXMiLCJjb2RlY3MiLCJoZWFkZXJFeHRlbnNpb25zIiwidmlkZW8iLCJzY3JlZW4iLCJ3aWR0aCIsImhlaWdodCIsImVuYWJsZWQiLCJtaWMiLCJtZWRpYURldmljZXMiLCJnZXRVc2VyTWVkaWEiLCJyZXBsYWNlVHJhY2siLCJnZXRUcmFja3MiLCJ0cmFjayIsImNsb3NlIiwidGhlbiIsInQiLCJnZXRUcmFuc2NlaXZlcnMiLCJzZW5kZXIiLCJzdG9wIiwic2V0dXAiLCJSVENQZWVyQ29ubmVjdGlvbiIsImNvbmZpZ3VyYXRpb24iLCJsb2ciLCJjb25uZWN0aW9uU3RhdGUiLCJkYXRhY2hhbm5lbCIsImRjIiwiY3JlYXRlRGF0YUNoYW5uZWwiLCJsYWJlbCIsImRpY3QiLCJiaW5hcnlUeXBlIiwiYWRkVHJhbnNjZWl2ZXIiLCJkaXJlY3Rpb24iLCJjYW1lcmEiLCJhZGRUcmFjayIsInNlbmRJY2VDYW5kaWRhdGUiLCJjcmVhdGVQZWVyQ29ubmVjdGlvbiIsImdhdGhlcmluZ1Byb21pc2UiLCJvbmljZWNhbmRpZGF0ZSIsImV2IiwiY2FuZGlkYXRlIiwiSlNPTiIsInBhcnNlIiwic3RyaW5naWZ5Iiwib25pY2VnYXRoZXJpbmdzdGF0ZWNoYW5nZSIsImljZUdhdGhlcmluZ1N0YXRlIiwidG9EZXNjcmlwdGlvbiIsImluaXQiLCJzZHAiLCJvZmZlciIsImNyZWF0ZU9mZmVyIiwib2ZmZXJUb1JlY2VpdmVBdWRpbyIsIm9mZmVyVG9SZWNlaXZlVmlkZW8iLCJzZXRMb2NhbERlc2NyaXB0aW9uIiwiYW5zd2VyIiwiY3JlYXRlQW5zd2VyIiwiY3VycmVudExvY2FsRGVzY3JpcHRpb24iLCJkZXNjcmlwdGlvbiIsInNldFJlbW90ZURlc2NyaXB0aW9uIiwiYWRkSWNlQ2FuZGlkYXRlIiwiZG9jdW1lbnQiLCJldmVudCIsImNhc3QiLCJmcmFtZXdvcmsiLCJDYXN0UmVjZWl2ZXJPcHRpb25zIiwiZGlzYWJsZUlkbGVUaW1lb3V0IiwiQ2FzdFJlY2VpdmVyQ29udGV4dCIsImdldEluc3RhbmNlIiwic3RhcnQiLCJwbGF5ZXJNYW5hZ2VyIiwiZ2V0UGxheWVyTWFuYWdlciIsImdldEVsZW1lbnRCeUlkIiwicHJldmlvdXNDbGVhbnVwIiwic2V0TWVzc2FnZUludGVyY2VwdG9yIiwibWVzc2FnZXMiLCJNZXNzYWdlVHlwZSIsIkxPQUQiLCJsb2FkUmVxdWVzdERhdGEiLCJlaW9VcmwiLCJtZWRpYSIsImVudGl0eSIsImNvbnRlbnRJZCIsInRva2VuIiwiY3JlZGVudGlhbHMiLCJjdXN0b21EYXRhIiwidXJsIiwiVVJMIiwiZW5kcG9pbnRQYXRoIiwicGF0aG5hbWUiLCJxdWVyeSIsImsiLCJVUkxTZWFyY2hQYXJhbXMiLCJzZWFyY2giLCJwYXRoIiwic29ja2V0IiwiZWlvIiwiaG9zdCIsIm9uIiwicnBjUGVlciIsImRhdGEiLCJoYW5kbGVNZXNzYWdlIiwic2Vzc2lvbiIsImNsZWFudXAiLCJtZWRpYVN0cmVhbSIsIk1lZGlhU3RyZWFtIiwiZ2V0UmVjZWl2ZXJzIiwibWFwIiwib250cmFjayIsInNyY09iamVjdCIsInJlYXNvbiIsIndhaXRQZWVyQ29ubmVjdGlvbkljZUNvbm5lY3RlZCIsInJlbW92ZUFsbExpc3RlbmVycyJdLCJzb3VyY2VSb290IjoiIn0=